<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Central de Personal ‚Äî El Rinc√≥n del Barril</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Mono:wght@400;500&family=Barlow:ital,wght@0,400;0,600;0,700;1,400&family=Barlow+Condensed:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
:root{
  --rojo:#D01920;--rojo-d:#8B0D12;
  --ng:#0A0A0A;--c1:#141414;--c2:#1E1E1E;--c3:#2C2C2C;--c4:#3A3A3A;
  --bl:#F2EDE6;--cr:#D8CEBC;
  --am:#D4890A;--am-b:#1F1600;
  --vd:#3A7A30;--vd-b:#0E1A0C;--vd-t:#7EC86A;
  --or-t:#E8A050;
  --az-b:#080E1A;--az-t:#70A8E8;
  --mo-t:#B080E8;
}
*{margin:0;padding:0;box-sizing:border-box}
body{background:var(--ng);color:var(--bl);font-family:'Barlow',sans-serif;font-size:14px;line-height:1.5}

/* HDR */
.hdr{background:var(--ng);border-bottom:3px solid var(--rojo);padding:16px 28px;display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;position:sticky;top:0;z-index:50}
.brand{font-family:'Bebas Neue',sans-serif;font-size:26px;color:var(--rojo);letter-spacing:3px}
.brand-s{font-family:'Barlow Condensed',sans-serif;font-size:9px;letter-spacing:4px;text-transform:uppercase;color:var(--cr);opacity:.4}
.nav{display:flex;gap:12px}
.nav a{color:#555;text-decoration:none;font-family:'Barlow Condensed',sans-serif;font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase}
.nav a:hover{color:var(--am)}

/* BOT√ìN MODO EDICI√ìN */
.btn-modo{display:flex;align-items:center;gap:8px;padding:9px 16px;font-family:'Barlow Condensed',sans-serif;font-size:12px;font-weight:700;letter-spacing:2px;text-transform:uppercase;border:2px solid var(--c4);border-radius:3px;cursor:pointer;background:var(--c2);color:#666;transition:all .2s}
.btn-modo:hover{border-color:var(--am);color:var(--am)}
.btn-modo.on{background:var(--am-b);border-color:var(--am);color:var(--am)}
.dot{width:8px;height:8px;border-radius:50%;background:currentColor}
.btn-modo.on .dot{box-shadow:0 0 6px var(--am)}

/* BANNER */
.banner{display:none;background:var(--am-b);border-bottom:2px solid var(--am);padding:10px 28px;font-size:12.5px;color:#C8A050;align-items:flex-start;gap:10px}
.banner.on{display:flex}
.banner strong{color:var(--am);font-family:'Barlow Condensed',sans-serif;font-size:10px;letter-spacing:2px;text-transform:uppercase;display:block;margin-bottom:3px}
.tag{background:var(--c2);border:1px solid var(--am);color:var(--am);padding:1px 7px;border-radius:2px;font-family:'DM Mono',monospace;font-size:10px}

/* TABS */
.tabs{display:flex;border-bottom:2px solid var(--c3);padding:0 28px;background:var(--ng);position:sticky;top:57px;z-index:40;overflow-x:auto}
.tab{padding:10px 18px;background:transparent;border:none;border-bottom:3px solid transparent;margin-bottom:-2px;color:#555;font-family:'Barlow Condensed',sans-serif;font-size:13px;font-weight:700;letter-spacing:2px;text-transform:uppercase;cursor:pointer;white-space:nowrap;transition:all .2s}
.tab:hover{color:var(--bl)}
.tab.on{color:var(--rojo);border-bottom-color:var(--rojo)}
.pane{display:none;padding:20px 28px 100px}
.pane.on{display:block}

/* SECTION DIVIDER */
.sdiv{display:flex;align-items:center;gap:10px;margin:18px 0 8px}
.sdiv span{font-family:'Barlow Condensed',sans-serif;font-size:10px;font-weight:700;letter-spacing:3px;text-transform:uppercase;color:#444;white-space:nowrap}
.sdiv hr{flex:1;border:none;border-top:1px solid var(--c3)}

/* CARGO CARD */
.card{background:var(--c1);border:1px solid var(--c3);border-radius:4px;margin-bottom:8px;overflow:hidden}
.ctog{display:flex;align-items:center;gap:12px;padding:12px 16px;background:var(--c2);cursor:pointer;border:none;width:100%;text-align:left;color:inherit;transition:background .15s}
.ctog:hover{background:var(--c3)}
.cico{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:17px;flex-shrink:0;background:var(--rojo-d)}
.cnom{font-family:'Bebas Neue',sans-serif;font-size:20px;letter-spacing:2px;line-height:1}
.cdsc{font-size:11px;color:#666;font-family:'Barlow Condensed',sans-serif;margin-top:1px}
.chv{color:#555;font-size:9px;transition:transform .2s;flex-shrink:0;margin-left:6px}
.chv.o{transform:rotate(180deg)}
.cbody{display:none}
.cbody.o{display:block}

/* BADGE */
.badge{padding:2px 8px;border-radius:2px;font-family:'Barlow Condensed',sans-serif;font-size:9px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase}
.bc{background:var(--rojo-d);color:#FFAAAA}
.bp{background:#3A1A00;color:var(--or-t)}
.bf{background:#0A1A0A;color:var(--vd-t)}

/* CONFIG PANEL */
.cep{display:none;background:rgba(212,137,10,.06);border:1px dashed var(--am);border-radius:3px;margin:0 14px 8px;padding:12px 14px}
.cep.o{display:block}
.cep-row{display:flex;gap:8px;flex-wrap:wrap;align-items:flex-end}
.cep-g{display:flex;flex-direction:column;gap:3px}
.cep-l{font-size:9px;font-family:'Barlow Condensed',sans-serif;letter-spacing:2px;text-transform:uppercase;color:var(--am);opacity:.7}
.cep-i{background:var(--c2);border:1px solid var(--am);border-radius:2px;padding:5px 9px;color:var(--bl);font-family:'Barlow Condensed',sans-serif;font-size:12px;outline:none}
.cep-i:focus{border-color:#F0A030}
.cep-ico{width:52px;text-align:center}
.cep-sel{background:var(--c2);border:1px solid var(--am);border-radius:2px;padding:5px 7px;color:var(--bl);font-family:'Barlow Condensed',sans-serif;font-size:11px;outline:none}

/* INNER BLOCK */
.ib{background:var(--c2);border:1px solid var(--c3);border-radius:3px;padding:10px 14px;margin:0 14px 8px}
.ib:first-of-type{margin-top:14px}
.ibt{font-family:'Barlow Condensed',sans-serif;font-size:9px;font-weight:700;letter-spacing:2px;text-transform:uppercase;margin-bottom:8px;padding-bottom:6px;border-bottom:1px solid}
.ir{color:#FF9090;border-color:#2A1010}
.ia{color:var(--or-t);border-color:#2A1A00}
.iv{color:var(--vd-t);border-color:#1A2A18}
.ib2{color:var(--az-t);border-color:#0A1A28}
.im{color:var(--mo-t);border-color:#1A0A28}
.iam{color:var(--am);border-color:#2A1800}
.ig{color:#888;border-color:var(--c4)}

/* ITEMS */
.iw{min-height:6px}
.eitem{display:flex;align-items:flex-start;gap:7px;padding:4px 0;border-bottom:1px solid rgba(255,255,255,.04);font-size:12px;color:#A0A0A0;line-height:1.4}
.eitem:last-child{border-bottom:none}
.ebul{flex-shrink:0;font-size:7px;margin-top:5px}
.etxt{flex:1;outline:none;border-radius:2px;padding:1px 3px}
.deli{display:none;background:var(--rojo-d);color:#FFB0B0;border:none;border-radius:2px;padding:1px 5px;font-size:9px;cursor:pointer;flex-shrink:0;margin-top:3px;font-family:'Barlow Condensed',sans-serif}
.add-i{display:flex;align-items:center;gap:4px;padding:4px 0;color:#3A3A3A;font-family:'Barlow Condensed',sans-serif;font-size:9px;letter-spacing:2px;text-transform:uppercase;cursor:pointer;border:none;background:none;width:100%;margin-top:3px;transition:color .15s;pointer-events:none;opacity:.3}

/* D√çAS */
.dias{display:flex;flex-wrap:wrap;gap:3px}
.dc{display:inline-flex;align-items:center;gap:4px;padding:3px 9px;border-radius:2px;font-family:'Barlow Condensed',sans-serif;font-size:10px;font-weight:700;letter-spacing:1px;border:1px solid;transition:opacity .2s;cursor:default}
.dc.on{opacity:1}.dc.off{opacity:.25}
.dlun{background:var(--c2);border-color:var(--c4);color:#888}
.dmar{background:#1A1020;border-color:#4A2A70;color:#C090E8}
.dmie{background:var(--az-b);border-color:#1A3A6A;color:var(--az-t)}
.djue{background:var(--am-b);border-color:#4A2800;color:var(--am)}
.dvie{background:var(--vd-b);border-color:#2A5A20;color:var(--vd-t)}
.dsab{background:#1A0808;border-color:#4A1010;color:#FF9090}
.ddom{background:#200A0A;border-color:#5A1010;color:#FFB0B0}
.dtxt{outline:none}

/* CARGO ACTIONS */
.cact{display:none;gap:6px;padding:7px 14px;border-top:1px solid var(--c3);align-items:center;flex-wrap:wrap}
.btn-cfg{background:transparent;border:1px solid var(--c4);color:#666;font-family:'Barlow Condensed',sans-serif;font-size:9px;letter-spacing:1px;text-transform:uppercase;padding:5px 9px;border-radius:2px;cursor:pointer;transition:all .15s}
.btn-cfg:hover{background:var(--c3);color:var(--bl)}
.btn-cfg.on{background:var(--am-b);border-color:var(--am);color:var(--am)}
.btn-del{background:transparent;border:1px solid #2A1010;color:#662020;font-family:'Barlow Condensed',sans-serif;font-size:9px;letter-spacing:1px;text-transform:uppercase;padding:5px 9px;border-radius:2px;cursor:pointer;transition:all .15s;margin-left:auto}
.btn-del:hover{background:var(--rojo-d);border-color:var(--rojo);color:#FFAAAA}

/* MODO EDICI√ìN: activa controles */
body.ed .etxt{background:rgba(212,137,10,.07);border-bottom:1px dashed rgba(212,137,10,.35);cursor:text}
body.ed .etxt:hover{background:rgba(212,137,10,.12)}
body.ed .etxt:focus{background:rgba(212,137,10,.17);outline:none;border-bottom-color:var(--am)}
body.ed .deli{display:inline}
body.ed .add-i{color:var(--am);pointer-events:auto;opacity:1}
body.ed .add-i:hover{color:#F0A030}
body.ed .cact{display:flex}
body.ed .dc{cursor:pointer}
body.ed .dtxt{cursor:text}
body.ed .ibt-t{cursor:text}
body.ed .ibt-t:hover{color:var(--am)}
body.ed .sdiv span{cursor:text}
body.ed .sdiv span:hover{color:var(--am)}

/* PERFIL GRID */
.pgrid{display:grid;grid-template-columns:1fr 1fr;gap:8px;padding:10px 14px 14px}
.pfull{grid-column:1/-1}
.pblk{background:var(--c2);border:1px solid var(--c3);border-radius:3px;padding:10px 12px}

/* ADD ZONE */
.addz{border:2px dashed var(--c3);border-radius:4px;padding:16px;text-align:center;margin-top:12px;display:none}
body.ed .addz{display:block}
.addz-btn{background:transparent;border:1px solid var(--c4);color:#555;font-family:'Barlow Condensed',sans-serif;font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase;cursor:pointer;padding:8px 16px;border-radius:2px;transition:all .2s}
.addz-btn:hover{background:var(--c2);color:var(--am);border-color:var(--am)}
.addform{display:none;margin-top:12px;text-align:left}
.addform.o{display:block}
.af-row{display:flex;gap:7px;flex-wrap:wrap;align-items:flex-end;margin-bottom:8px}
.af-g{display:flex;flex-direction:column;gap:3px}
.af-l{font-size:9px;font-family:'Barlow Condensed',sans-serif;letter-spacing:2px;text-transform:uppercase;color:#555}
.af-i{background:var(--c2);border:1px solid var(--c4);border-radius:2px;padding:6px 9px;color:var(--bl);font-family:'Barlow Condensed',sans-serif;font-size:12px;outline:none}
.af-i:focus{border-color:var(--am)}
.af-s{background:var(--c2);border:1px solid var(--c4);border-radius:2px;padding:6px 7px;color:var(--bl);font-family:'Barlow Condensed',sans-serif;font-size:11px;outline:none}
.btn{padding:6px 12px;font-family:'Barlow Condensed',sans-serif;font-size:10px;font-weight:700;letter-spacing:2px;text-transform:uppercase;border:none;cursor:pointer;border-radius:2px;display:inline-flex;align-items:center;gap:4px;transition:all .15s}
.bvd{background:var(--vd);color:#fff}.bvd:hover{background:#2A6020}
.bout{background:transparent;color:var(--cr);border:1px solid var(--c4)}.bout:hover{background:var(--c2)}

/* RACI */
.rlegend{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:8px;margin-bottom:16px}
.rl{background:var(--c1);border:1px solid var(--c3);border-radius:3px;padding:10px 12px;display:flex;align-items:center;gap:10px}
.rl-ico{width:30px;height:30px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-family:'DM Mono',monospace;font-size:13px;font-weight:700;flex-shrink:0}
.rl-R{background:var(--rojo-d);color:#FFAAAA}
.rl-A{background:#3A1A00;color:var(--or-t)}
.rl-C{background:var(--az-b);color:var(--az-t)}
.rl-I{background:var(--vd-b);color:var(--vd-t)}
.rl strong{font-size:12px;display:block;line-height:1.2}
.rl span{font-size:10px;color:#666}
.rhint{background:var(--am-b);border:1px solid var(--am);border-radius:3px;padding:8px 12px;font-size:11px;color:var(--am);margin-bottom:12px;display:none}
body.ed .rhint{display:block}
.rwrap{overflow-x:auto}
.rt{width:100%;border-collapse:collapse;min-width:580px}
.rt th{background:var(--c3);font-family:'Barlow Condensed',sans-serif;font-size:10px;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:8px 8px;text-align:center;border:1px solid var(--c4);color:var(--cr)}
.rt th:first-child{text-align:left;min-width:170px}
.rt td{padding:6px 8px;border:1px solid var(--c4);font-size:12px;color:#A0A0A0;text-align:center;vertical-align:middle}
.rt td:first-child{text-align:left;color:var(--bl)}
.rt .sr td{background:var(--c3);font-family:'Barlow Condensed',sans-serif;font-size:9px;font-weight:700;letter-spacing:3px;text-transform:uppercase;color:#777;text-align:left}
.rc{display:inline-flex;align-items:center;justify-content:center;width:28px;height:24px;border-radius:3px;font-family:'DM Mono',monospace;font-size:11px;font-weight:700;border:1px solid transparent;cursor:default;user-select:none;transition:all .15s}
.rc.R{background:var(--rojo-d);color:#FFAAAA;border-color:#5A1010}
.rc.A{background:#3A1A00;color:var(--or-t);border-color:#6A3000}
.rc.C{background:var(--az-b);color:var(--az-t);border-color:#1A3A6A}
.rc.I{background:var(--vd-b);color:var(--vd-t);border-color:#1A4A18}
.rc.X{background:transparent;color:#2A2A2A;border-color:transparent}
body.ed .rc{cursor:pointer}
body.ed .rc:hover{filter:brightness(1.4)}
.rdel{display:none;background:var(--rojo-d);color:#FFB0B0;border:none;border-radius:2px;padding:1px 5px;font-size:9px;cursor:pointer;margin-left:4px}
body.ed .rdel{display:inline}
.atxt{outline:none}
body.ed .atxt{cursor:text;border-bottom:1px dashed rgba(212,137,10,.3)}
body.ed .atxt:focus{outline:none;border-bottom-color:var(--am)}
.thtxt{outline:none}
body.ed .thtxt{cursor:text}
.radd{display:none;gap:7px;margin-top:10px;flex-wrap:wrap}
body.ed .radd{display:flex}

/* FAB */
.fab{position:fixed;bottom:20px;right:20px;z-index:100}
/* TOAST */
.toast{position:fixed;top:16px;right:20px;background:var(--vd-b);border:1px solid var(--vd);color:var(--vd-t);padding:8px 14px;border-radius:3px;font-family:'Barlow Condensed',sans-serif;font-size:12px;letter-spacing:1px;opacity:0;transform:translateY(-6px);transition:all .3s;z-index:999;pointer-events:none}
.toast.on{opacity:1;transform:translateY(0)}

@media(max-width:700px){
  .hdr,.tabs,.pane{padding-left:14px;padding-right:14px}
  .pgrid{grid-template-columns:1fr}.pfull{grid-column:1}
  .fab{bottom:14px;right:14px}
}
@media print{
  .fab,.cact,.addz,.add-i,.deli,.banner,.btn-modo,.nav,.tabs{display:none!important}
  .cbody{display:block!important}
  body{background:#fff;color:#111}
}

/* ‚îÄ‚îÄ EXPORT MODAL ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
.exp-overlay{position:fixed;inset:0;background:rgba(0,0,0,.75);z-index:200;display:none;align-items:center;justify-content:center;padding:20px}
.exp-overlay.on{display:flex}
.exp-modal{background:var(--c1);border:2px solid var(--am);border-radius:5px;width:100%;max-width:520px;max-height:88vh;display:flex;flex-direction:column;overflow:hidden}
.exp-hdr{background:var(--am-b);border-bottom:1px solid var(--am);padding:14px 18px;display:flex;align-items:center;justify-content:space-between;flex-shrink:0}
.exp-title{font-family:'Bebas Neue',sans-serif;font-size:20px;letter-spacing:2px;color:var(--am)}
.exp-close{background:none;border:none;color:#666;font-size:18px;cursor:pointer;padding:2px 6px;border-radius:2px}
.exp-close:hover{color:var(--bl);background:var(--c3)}
.exp-body{overflow-y:auto;padding:16px 18px;flex:1}
.exp-section{margin-bottom:16px}
.exp-sec-title{font-family:'Barlow Condensed',sans-serif;font-size:9px;font-weight:700;letter-spacing:3px;text-transform:uppercase;color:#555;margin-bottom:8px;padding-bottom:5px;border-bottom:1px solid var(--c3)}
.exp-tabs{display:flex;gap:6px;margin-bottom:14px}
.exp-tab{padding:6px 12px;background:var(--c2);border:1px solid var(--c3);border-radius:2px;font-family:'Barlow Condensed',sans-serif;font-size:11px;font-weight:700;letter-spacing:1px;text-transform:uppercase;cursor:pointer;color:#666;transition:all .15s}
.exp-tab.on{background:var(--am-b);border-color:var(--am);color:var(--am)}
.cargo-check{display:flex;align-items:flex-start;gap:8px;padding:7px 0;border-bottom:1px solid rgba(255,255,255,.04)}
.cargo-check:last-child{border-bottom:none}
.cc-left{display:flex;align-items:center;gap:8px;flex:1;cursor:pointer}
.cc-ico{font-size:14px}
.cc-name{font-size:12.5px;color:var(--cr)}
.cc-badge{font-family:'Barlow Condensed',sans-serif;font-size:9px;padding:1px 6px;border-radius:2px}
.cc-subs{display:flex;gap:6px;flex-wrap:wrap;margin-top:4px;margin-left:22px}
.sub-check{display:flex;align-items:center;gap:4px;cursor:pointer;font-family:'Barlow Condensed',sans-serif;font-size:10px;color:#555;letter-spacing:.5px;text-transform:uppercase;padding:2px 6px;border-radius:2px;background:var(--c2);border:1px solid var(--c3);transition:all .15s}
.sub-check:hover{color:var(--bl)}
.sub-check.on{background:rgba(112,168,232,.1);border-color:var(--az-t);color:var(--az-t)}
input[type=checkbox].hidden-cb{position:absolute;opacity:0;pointer-events:none}
.exp-footer{border-top:1px solid var(--c3);padding:12px 18px;display:flex;gap:8px;justify-content:flex-end;flex-shrink:0;background:var(--c1)}
.exp-btn{padding:8px 16px;font-family:'Barlow Condensed',sans-serif;font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase;border:none;cursor:pointer;border-radius:2px;display:inline-flex;align-items:center;gap:6px;transition:all .15s}
.exp-print{background:var(--c2);border:1px solid var(--c4);color:var(--cr)}.exp-print:hover{background:var(--c3)}
.exp-word{background:rgba(48,120,205,.15);border:1px solid #1A4A9A;color:#80AAEE}.exp-word:hover{background:rgba(48,120,205,.25)}
.exp-all{font-size:10px;color:var(--am);background:none;border:none;cursor:pointer;font-family:'Barlow Condensed',sans-serif;letter-spacing:1px;text-transform:uppercase;padding:4px 0;text-decoration:underline}
/* PRINT STYLES */
@media print{
  body *{visibility:hidden}
  .print-zone,.print-zone *{visibility:visible}
  .print-zone{position:absolute;left:0;top:0;width:100%;padding:20px}
  .print-zone .cact,.print-zone .add-i,.print-zone .deli,.print-zone .cep,.print-zone .addz{display:none!important}
  .print-zone .cbody{display:block!important}
  .print-zone .card{border:1px solid #ccc;margin-bottom:16px;page-break-inside:avoid}
  .print-zone .ctog{background:#f5f5f5;color:#111}
  .print-zone .cnom{color:#111}
  .print-zone .cdsc{color:#555}
  .print-zone .ib{background:#fafafa;border:1px solid #ddd;color:#333}
  .print-zone .ibt-t{color:#333}
  .print-zone .etxt{color:#444}
  .print-zone .badge{color:#111;border:1px solid #999;background:#eee}
  .print-zone .dias{flex-wrap:wrap}
  .print-zone .dc.off{display:none}
  .print-zone .pgrid{display:block}
  .print-zone .pblk{border:1px solid #ddd;margin-bottom:8px;padding:8px}
  .print-hdr{display:block!important;font-family:Arial,sans-serif;border-bottom:2px solid #D01920;padding-bottom:8px;margin-bottom:16px}
  .hdr,.tabs,.fab,.toast,.exp-overlay,.banner{display:none!important}
}
.print-hdr{display:none}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   EQUIPO / EXPEDIENTE EMPLEADOS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.eq-wrap{padding:16px}
.eq-toolbar{display:flex;align-items:center;gap:10px;margin-bottom:16px;flex-wrap:wrap}
.eq-search{flex:1;min-width:180px;background:var(--c2);border:1px solid var(--c3);border-radius:3px;padding:8px 12px;color:var(--bl);font-family:'Barlow',sans-serif;font-size:13px}
.eq-search:focus{outline:none;border-color:var(--am)}
.eq-filter{padding:8px 12px;background:var(--c2);border:1px solid var(--c3);border-radius:3px;color:#888;font-family:'Barlow Condensed',sans-serif;font-size:11px;font-weight:700;letter-spacing:1px;cursor:pointer}
.eq-filter.on{background:var(--am-b);border-color:var(--am);color:var(--am)}
/* Employee list */
.eq-list{display:flex;flex-direction:column;gap:8px}
.eq-card{background:var(--c2);border:1px solid var(--c3);border-radius:4px;overflow:hidden;transition:border-color .15s}
.eq-card.archivado{opacity:.5}
.eq-card-hdr{display:flex;align-items:center;gap:10px;padding:12px 14px;cursor:pointer}
.eq-card-hdr:hover{background:rgba(255,255,255,.02)}
.eq-avatar{width:38px;height:38px;border-radius:50%;background:var(--rd);display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0;font-weight:700;color:#fff;font-family:'Bebas Neue',sans-serif}
.eq-info{flex:1;min-width:0}
.eq-nombre{font-size:14px;font-weight:700;color:var(--bl);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.eq-cargo-tag{font-family:'Barlow Condensed',sans-serif;font-size:10px;letter-spacing:1px;text-transform:uppercase;color:#666;margin-top:1px}
.eq-meta{display:flex;gap:8px;align-items:center;flex-shrink:0}
.eq-estado{padding:2px 8px;border-radius:2px;font-family:'Barlow Condensed',sans-serif;font-size:9px;font-weight:700;letter-spacing:1px;text-transform:uppercase}
.es-activo{background:var(--vd-b);border:1px solid #2A5A28;color:var(--vd-t)}
.es-inactivo{background:#1A1000;border:1px solid #3A2800;color:var(--am)}
.es-archivado{background:var(--c3);border:1px solid var(--c4);color:#555}
.eq-prog{display:flex;gap:3px;align-items:center}
.eq-dot{width:8px;height:8px;border-radius:50%}
.eq-chv{color:#444;font-size:12px;margin-left:4px;transition:transform .2s}
.eq-chv.o{transform:rotate(180deg)}
/* Body */
.eq-body{display:none;border-top:1px solid var(--c3)}
.eq-body.o{display:block}
/* Tabs inside employee card */
.eq-tabs{display:flex;overflow-x:auto;border-bottom:1px solid var(--c3);background:var(--c1)}
.eq-tab{padding:8px 14px;font-family:'Barlow Condensed',sans-serif;font-size:10px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;color:#555;cursor:pointer;border-bottom:2px solid transparent;white-space:nowrap;flex-shrink:0}
.eq-tab.on{color:var(--am);border-bottom-color:var(--am)}
.eq-pane{display:none;padding:14px}
.eq-pane.on{display:block}
/* Section inside pane */
.eq-sec{margin-bottom:14px}
.eq-sec-title{font-family:'Barlow Condensed',sans-serif;font-size:9px;font-weight:700;letter-spacing:3px;text-transform:uppercase;color:#444;margin-bottom:8px;display:flex;align-items:center;gap:8px}
.eq-sec-title::after{content:'';flex:1;height:1px;background:var(--c3)}
/* Field */
.eq-field{display:flex;flex-direction:column;gap:3px;margin-bottom:8px}
.eq-label{font-family:'Barlow Condensed',sans-serif;font-size:9px;letter-spacing:2px;text-transform:uppercase;color:#555}
.eq-val{font-size:12.5px;color:var(--cr);padding:5px 8px;background:var(--c2);border:1px solid var(--c3);border-radius:2px;cursor:pointer}
.eq-val:hover{border-color:var(--c4)}
.eq-val.editing{background:var(--c1);border-color:var(--am);color:var(--bl)}
input.eq-input,select.eq-input,textarea.eq-input{width:100%;background:var(--c1);border:1px solid var(--am);border-radius:2px;padding:5px 8px;color:var(--bl);font-family:'Barlow',sans-serif;font-size:12.5px}
input.eq-input:focus,select.eq-input:focus,textarea.eq-input:focus{outline:none}
.eq-grid2{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.eq-grid3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px}
/* Checklist item */
.ck-item{display:flex;align-items:center;gap:8px;padding:7px 0;border-bottom:1px solid rgba(255,255,255,.04)}
.ck-item:last-child{border-bottom:none}
.ck-box{width:18px;height:18px;border-radius:2px;border:2px solid var(--c4);background:var(--c2);cursor:pointer;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:11px;transition:all .15s}
.ck-box.on{background:var(--vd-t);border-color:var(--vd-t);color:#000}
.ck-text{flex:1;font-size:12px;color:var(--cr)}
.ck-fecha{font-size:10px;color:#555;flex-shrink:0;font-family:'DM Mono',monospace}
/* Records (pagos, capacitaciones, etc) */
.rec-list{display:flex;flex-direction:column;gap:6px}
.rec-item{background:var(--c2);border:1px solid var(--c3);border-radius:3px;padding:10px 12px;position:relative}
.rec-item:hover{border-color:var(--c4)}
.rec-top{display:flex;align-items:flex-start;justify-content:space-between;gap:8px;margin-bottom:6px}
.rec-titulo{font-size:12.5px;font-weight:700;color:var(--bl)}
.rec-fecha{font-size:10px;color:#555;font-family:'DM Mono',monospace;flex-shrink:0}
.rec-body{font-size:12px;color:var(--cr);line-height:1.5}
.rec-actions{display:flex;gap:4px;margin-top:8px}
.rec-btn{padding:3px 8px;font-family:'Barlow Condensed',sans-serif;font-size:9px;font-weight:700;letter-spacing:1px;text-transform:uppercase;border:none;border-radius:2px;cursor:pointer}
.rb-edit{background:var(--c3);color:var(--cr)}.rb-edit:hover{background:var(--c4)}
.rb-del{background:rgba(139,13,18,.2);color:#FF9090}.rb-del:hover{background:rgba(139,13,18,.4)}
.rb-print{background:rgba(112,168,232,.15);color:var(--az-t)}.rb-print:hover{background:rgba(112,168,232,.25)}
.rb-ok{background:var(--vd-b);color:var(--vd-t);border:1px solid #2A5A28}.rb-ok:hover{background:#1A3A18}
/* Add record button */
.add-rec{width:100%;padding:8px;background:var(--c2);border:1px dashed var(--c3);border-radius:3px;color:#555;font-family:'Barlow Condensed',sans-serif;font-size:10px;font-weight:700;letter-spacing:2px;text-transform:uppercase;cursor:pointer;transition:all .15s;margin-top:6px}
.add-rec:hover{border-color:var(--am);color:var(--am)}
/* Pago chips */
.pago-chips{display:flex;flex-wrap:wrap;gap:5px;margin-top:6px}
.p-chip{padding:2px 8px;border-radius:2px;font-family:'Barlow Condensed',sans-serif;font-size:10px;font-weight:700}
.pc-b{background:var(--c3);color:#888}
.pc-r{background:rgba(112,168,232,.1);border:1px solid #1A3A6A;color:var(--az-t)}
.pc-d{background:rgba(139,13,18,.1);border:1px solid #3A1010;color:#FF9090}
.pc-t{background:rgba(126,200,106,.1);border:1px solid #2A5A28;color:var(--vd-t);font-size:12px}
/* Evaluaci√≥n stars */
.eval-stars{display:flex;gap:3px}
.star{font-size:16px;cursor:pointer;opacity:.3;transition:opacity .1s}
.star.on{opacity:1}
/* Progress bar */
.prog-bar{height:4px;background:var(--c3);border-radius:2px;overflow:hidden;margin-top:4px}
.prog-fill{height:100%;background:var(--am);border-radius:2px;transition:width .3s}
/* Badge total */
.eq-total-badge{background:var(--c2);border:1px solid var(--c3);border-radius:3px;padding:10px 14px;display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.etb-label{font-family:'Barlow Condensed',sans-serif;font-size:10px;letter-spacing:2px;text-transform:uppercase;color:#555}
.etb-val{font-size:20px;font-weight:700;color:var(--bl);font-family:'Bebas Neue',sans-serif;letter-spacing:1px}
/* Empty state */
.eq-empty{text-align:center;padding:40px 20px;color:#333}
.eq-empty-ico{font-size:36px;margin-bottom:8px;opacity:.3}
.eq-empty-t{font-family:'Bebas Neue',sans-serif;font-size:22px;letter-spacing:2px;color:#2A2A2A}
.eq-empty-s{font-size:12px;color:#333;margin-top:4px}
/* MODAL */
.eq-modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.8);z-index:300;display:none;align-items:center;justify-content:center;padding:16px}
.eq-modal-overlay.on{display:flex}
.eq-modal{background:var(--c1);border:2px solid var(--am);border-radius:5px;width:100%;max-width:560px;max-height:90vh;display:flex;flex-direction:column;overflow:hidden}
.eq-modal-hdr{background:var(--am-b);border-bottom:1px solid var(--am);padding:12px 16px;display:flex;align-items:center;justify-content:space-between;flex-shrink:0}
.eq-modal-title{font-family:'Bebas Neue',sans-serif;font-size:18px;letter-spacing:2px;color:var(--am)}
.eq-modal-body{overflow-y:auto;padding:14px 16px;flex:1}
.eq-modal-footer{border-top:1px solid var(--c3);padding:10px 16px;display:flex;gap:8px;justify-content:flex-end;flex-shrink:0}
.eq-modal-btn{padding:7px 14px;font-family:'Barlow Condensed',sans-serif;font-size:10px;font-weight:700;letter-spacing:2px;text-transform:uppercase;border:none;border-radius:2px;cursor:pointer}
.emb-cancel{background:var(--c3);color:var(--cr)}.emb-cancel:hover{background:var(--c4)}
.emb-save{background:var(--am);color:#000}.emb-save:hover{background:#B87A08}
.emb-danger{background:var(--rd);color:#fff}.emb-danger:hover{background:#6B0910}
/* PRINT desprendible */
@media print{
  .desprendible-print{display:block!important}
  body *{visibility:hidden}
  .desprendible-print,.desprendible-print *{visibility:visible}
  .desprendible-print{position:absolute;left:0;top:0;width:100%;padding:20px;font-family:Arial,sans-serif;color:#000}
}
.desprendible-print{display:none}

</style>
</head>
<body>

<!-- HEADER -->
<div class="hdr">
  <div><div class="brand">El Rinc√≥n del Barril</div><div class="brand-s">Asados ¬∑ C√∫cuta</div></div>
  <div class="nav">
    <a href="index.html">üè† Inicio</a>
    <a href="roles-cruzados-v3.html">‚ö° Roles Cruzados</a>
    <a href="induccion-rincon-barril.html">üéØ Inducci√≥n</a>
  </div>
  <div style="display:flex;gap:8px;align-items:center">
    <button class="btn-modo" id="btnModo" onclick="toggleModo()">
      <span class="dot"></span><span id="modoLbl">‚úé Modo Edici√≥n</span>
    </button>
    <button class="btn bout" onclick="openExport()" style="padding:8px 11px;color:var(--am);border-color:var(--am)" title="Imprimir o exportar a Word">üìÑ Exportar</button>
    <button class="btn bout" onclick="resetCache()" style="padding:8px 11px;color:#666" title="Borrar cach√© guardada">‚Ü∫</button>
    <button class="btn bvd" onclick="guardar()" style="padding:8px 11px">üíæ Guardar</button>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê PANEL RESPALDO ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="panel-respaldo" style="background:#111;border-top:1px solid #222;border-bottom:3px solid #8B0D12;padding:10px 32px;display:flex;align-items:center;gap:10px;flex-wrap:wrap">
  <span style="font-family:'Barlow Condensed',sans-serif;font-size:11px;font-weight:700;letter-spacing:2px;color:#666;text-transform:uppercase">üíæ RESPALDO DE DATOS</span>
  <span style="color:#444;font-size:11px;flex:1;min-width:160px">Guarda tus datos o rest√°uralos en otro dispositivo</span>
  <button onclick="exportarJSON()" style="background:#1A2A1A;border:2px solid #2E7D32;color:#66BB6A;padding:8px 20px;border-radius:3px;cursor:pointer;font-family:'Barlow Condensed',sans-serif;font-size:12px;font-weight:700;letter-spacing:1px;white-space:nowrap">‚¨á DESCARGAR RESPALDO</button>
  <button onclick="document.getElementById('jsonInput').click()" style="background:#1A1A2A;border:2px solid #1565C0;color:#64B5F6;padding:8px 20px;border-radius:3px;cursor:pointer;font-family:'Barlow Condensed',sans-serif;font-size:12px;font-weight:700;letter-spacing:1px;white-space:nowrap">‚¨Ü RESTAURAR RESPALDO</button>
  <input type="file" id="jsonInput" accept=".json" style="display:none" onchange="leerJSON(this)">
</div>
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->


<!-- BANNER -->
<div class="banner" id="banner">
  <div style="font-size:16px;flex-shrink:0">‚úé</div>
  <div>
    <strong>Modo Edici√≥n activo</strong>
    Haz clic en cualquier texto para editarlo.
    Usa <span class="tag">+ agregar √≠tem</span> para a√±adir filas.
    Bot√≥n <span class="tag">‚öô Configurar</span> para cambiar nombre, √≠cono y criticidad.
    Bot√≥n <span class="tag">üóë Eliminar</span> para borrar el cargo completo.
    En la pesta√±a RACI, haz clic en <span class="tag">R</span><span class="tag">A</span><span class="tag">C</span><span class="tag">I</span> para cambiar la asignaci√≥n.
  </div>
</div>

<!-- TABS -->
<div class="tabs">
  <button class="tab on"  onclick="switchTab('prf',this)">üë§ Perfiles de Cargo</button>
  <button class="tab"     onclick="switchTab('fn',this)">üìã Manual de Funciones</button>
  <button class="tab"     onclick="switchTab('raci',this)">üìä Qui√©n hace qu√©</button>
  <button class="tab"     onclick="switchTab('eq',this)">üë• Equipo</button>
</div>


<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- TAB: CENTRAL DE PERSONAL RB          -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="pane" id="pane-fn">

  <div class="sdiv"><span contenteditable="false">Cocina</span><hr></div>

  <!-- COCINERO PRINCIPAL -->
  <div class="card" data-id="f1">
    <button class="ctog" onclick="togCard(this)">
      <div class="cico">üî•</div>
      <div style="flex:1;min-width:0">
        <div class="cnom">Cocinero Principal</div>
        <div class="cdsc">Parrilla al carb√≥n ¬∑ Producci√≥n ¬∑ Liderazgo de cocina</div>
      </div>
      <span class="badge bc">Cr√≠tico</span><span class="chv">‚ñº</span>
    </button>
    <div class="cbody" id="cb-f1">
      <div class="cep" id="cep-f1">
        <div class="cep-row">
          <div class="cep-g"><label class="cep-l">√çcono</label><input class="cep-i cep-ico" value="üî•" oninput="setIco(this,'f1')"></div>
          <div class="cep-g" style="flex:1"><label class="cep-l">Nombre del cargo</label><input class="cep-i" style="width:100%" value="Cocinero Principal" oninput="setNom(this,'f1')"></div>
          <div class="cep-g" style="flex:2"><label class="cep-l">Descripci√≥n breve</label><input class="cep-i" style="width:100%" value="Parrilla al carb√≥n ¬∑ Producci√≥n ¬∑ Liderazgo de cocina" oninput="setDsc(this,'f1')"></div>
          <div class="cep-g"><label class="cep-l">Criticidad</label><select class="cep-sel" onchange="setBadge(this,'f1')"><option value="c" selected>Cr√≠tico</option><option value="p">Parcial</option><option value="f">Flexible</option></select></div>
        </div>
      </div>
      <div class="ib">
        <div class="ibt ig"><span class="ibt-t" contenteditable="false">üìÖ D√≠as activos ‚Äî clic para activar/desactivar</span></div>
        <div class="dias">
          <span class="dc dlun off" onclick="togDia(this)">Lun</span>
          <span class="dc dmar on"  onclick="togDia(this)">Mar ¬∑ <span class="dtxt" contenteditable="false">Producci√≥n</span></span>
          <span class="dc dmie on"  onclick="togDia(this)">Mi√© ¬∑ <span class="dtxt" contenteditable="false">Producci√≥n</span></span>
          <span class="dc djue on"  onclick="togDia(this)">Jue ¬∑ <span class="dtxt" contenteditable="false">Producci√≥n</span></span>
          <span class="dc dvie on"  onclick="togDia(this)">Vie ¬∑ <span class="dtxt" contenteditable="false">Producci√≥n</span></span>
          <span class="dc dsab on"  onclick="togDia(this)">S√°b ¬∑ <span class="dtxt" contenteditable="false">Servicio</span></span>
          <span class="dc ddom on"  onclick="togDia(this)">Dom ¬∑ <span class="dtxt" contenteditable="false">Servicio</span></span>
        </div>
      </div>
      <div class="ib">
        <div class="ibt ir"><span class="ibt-t" contenteditable="false">üî• Funciones en parrilla</span></div>
        <div class="iw" id="iw-f1a">
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Montar carne al barril al inicio de cada turno (costilla, chicharr√≥n, colita, morcilla, chorizo)</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Verificar temperatura interna con term√≥metro ‚Äî punto de cocci√≥n no negociable</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Preparar t√°rtara y pi√±a seg√∫n ficha t√©cnica exacta</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Organizar mise en place de parrilla antes de abrir servicio</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Porcionar y empacar lomo de cerdo y punta de anca</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Limpiar y reportar estado de parrilla en Registro_Equipo al cierre</span><button class="deli" onclick="delI(this)">‚úï</button></div>
        </div>
        <button class="add-i" onclick="addI('iw-f1a','var(--rojo)')">+ agregar funci√≥n</button>
      </div>
      <div class="ib">
        <div class="ibt ia"><span class="ibt-t" contenteditable="false">‚òÖ Responsabilidades de liderazgo</span></div>
        <div class="iw" id="iw-f1b">
          <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Lidera el equipo de cocina ‚Äî decide el orden de producci√≥n durante el servicio</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Verifica calidad de cocina con el cajero antes de abrir el servicio</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Realiza inventario semanal de cocina al cierre del domingo</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Reporta alertas cr√≠ticas al administrador (equipos, insumos bajos)</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Revisa registros en Cocina v3.0, Saneamiento y Registro_Equipo al cierre</span><button class="deli" onclick="delI(this)">‚úï</button></div>
        </div>
        <button class="add-i" onclick="addI('iw-f1b','var(--am)')">+ agregar responsabilidad</button>
      </div>
      <div class="ib">
        <div class="ibt ig"><span class="ibt-t" contenteditable="false">‚è∞ Horario y condiciones espec√≠ficas</span></div>
        <div class="iw" id="iw-f1c">
          <div class="eitem"><span class="ebul" style="color:#555">‚óÜ</span><span class="etxt" contenteditable="false">Horario d√≠as de producci√≥n (mar‚Äìvie): completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:#555">‚óÜ</span><span class="etxt" contenteditable="false">Horario d√≠as de servicio (s√°b‚Äìdom): completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:#555">‚óÜ</span><span class="etxt" contenteditable="false">Tipo de contrato: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:#555">‚óÜ</span><span class="etxt" contenteditable="false">Salario: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
        </div>
        <button class="add-i" onclick="addI('iw-f1c','#555')">+ agregar dato</button>
      </div>
      <div class="cact"><button class="btn-cfg" onclick="togCEP('f1',this)">‚öô Configurar cargo</button><button class="btn-del" onclick="delCard('f1')">üóë Eliminar cargo</button></div>
    </div>
  </div>

  <!-- AUXILIAR DE COCINA -->
  <div class="card" data-id="f2">
    <button class="ctog" onclick="togCard(this)">
      <div class="cico">üç≥</div>
      <div style="flex:1;min-width:0">
        <div class="cnom">Auxiliar de Cocina</div>
        <div class="cdsc">Producci√≥n ¬∑ Croquetas ¬∑ Guarniciones ¬∑ Recepci√≥n pedidos</div>
      </div>
      <span class="badge bp">Parcial</span><span class="chv">‚ñº</span>
    </button>
    <div class="cbody" id="cb-f2">
      <div class="cep" id="cep-f2">
        <div class="cep-row">
          <div class="cep-g"><label class="cep-l">√çcono</label><input class="cep-i cep-ico" value="üç≥" oninput="setIco(this,'f2')"></div>
          <div class="cep-g" style="flex:1"><label class="cep-l">Nombre</label><input class="cep-i" style="width:100%" value="Auxiliar de Cocina" oninput="setNom(this,'f2')"></div>
          <div class="cep-g" style="flex:2"><label class="cep-l">Descripci√≥n</label><input class="cep-i" style="width:100%" value="Producci√≥n ¬∑ Croquetas ¬∑ Guarniciones ¬∑ Recepci√≥n pedidos" oninput="setDsc(this,'f2')"></div>
          <div class="cep-g"><label class="cep-l">Criticidad</label><select class="cep-sel" onchange="setBadge(this,'f2')"><option value="c">Cr√≠tico</option><option value="p" selected>Parcial</option><option value="f">Flexible</option></select></div>
        </div>
      </div>
      <div class="ib">
        <div class="ibt ig"><span class="ibt-t" contenteditable="false">üìÖ D√≠as activos</span></div>
        <div class="dias">
          <span class="dc dlun off" onclick="togDia(this)">Lun</span>
          <span class="dc dmar on"  onclick="togDia(this)">Mar ¬∑ <span class="dtxt" contenteditable="false">Aseo+Producci√≥n</span></span>
          <span class="dc dmie on"  onclick="togDia(this)">Mi√© ¬∑ <span class="dtxt" contenteditable="false">Producci√≥n</span></span>
          <span class="dc djue on"  onclick="togDia(this)">Jue ¬∑ <span class="dtxt" contenteditable="false">Producci√≥n</span></span>
          <span class="dc dvie on"  onclick="togDia(this)">Vie ¬∑ <span class="dtxt" contenteditable="false">Producci√≥n</span></span>
          <span class="dc dsab on"  onclick="togDia(this)">S√°b ¬∑ <span class="dtxt" contenteditable="false">Ma√±ana</span></span>
          <span class="dc ddom on"  onclick="togDia(this)">Dom ¬∑ <span class="dtxt" contenteditable="false">Ma√±ana</span></span>
        </div>
      </div>
      <div class="ib">
        <div class="ibt ir"><span class="ibt-t" contenteditable="false">üç≥ Funciones de producci√≥n</span></div>
        <div class="iw" id="iw-f2a">
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Porcionar y formar croquetas ‚Äî m√≠nimo 130 unidades por producci√≥n</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Marinar carnes (sal, pimienta, ajo) seg√∫n ficha t√©cnica</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Cocinar carne al barril (lomo, punta de anca) ‚Äî verificar temperatura interna</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Almacenar a 0‚Äì5¬∞C: lomo, punta de anca, panceta</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Abrir pechuga de pollo y porcionar</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Preparar cebolla grille y cruda ‚Äî mise en place barra y parrilla</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Preparar guarniciones para almuerzos (s√°b/dom ma√±ana)</span><button class="deli" onclick="delI(this)">‚úï</button></div>
        </div>
        <button class="add-i" onclick="addI('iw-f2a','var(--rojo)')">+ agregar funci√≥n</button>
      </div>
      <div class="ib">
        <div class="ibt iv"><span class="ibt-t" contenteditable="false">üì¶ Recepci√≥n y registros</span></div>
        <div class="iw" id="iw-f2b">
          <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Recibir pedidos de proveedores (Atlantic, MC Pollo, Mccormick, Cenabastos, Charcuter√≠a)</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Registrar ingredientes en sistema Cocina v3.0 (Movimiento_MP)</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Registrar limpieza en Saneamiento cada hora durante el turno</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Aseo cocina, lavar platos y equipo, sacar basura</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Informar cantidades producidas al cocinero principal al finalizar</span><button class="deli" onclick="delI(this)">‚úï</button></div>
        </div>
        <button class="add-i" onclick="addI('iw-f2b','var(--vd-t)')">+ agregar funci√≥n</button>
      </div>
      <div class="ib">
        <div class="ibt ig"><span class="ibt-t" contenteditable="false">‚è∞ Horario y condiciones</span></div>
        <div class="iw" id="iw-f2c">
          <div class="eitem"><span class="ebul" style="color:#555">‚óÜ</span><span class="etxt" contenteditable="false">Horario y turno: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:#555">‚óÜ</span><span class="etxt" contenteditable="false">Distribuci√≥n de turnos entre auxiliares: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
        </div>
        <button class="add-i" onclick="addI('iw-f2c','#555')">+ agregar dato</button>
      </div>
      <div class="cact"><button class="btn-cfg" onclick="togCEP('f2',this)">‚öô Configurar cargo</button><button class="btn-del" onclick="delCard('f2')">üóë Eliminar cargo</button></div>
    </div>
  </div>

  <div class="sdiv"><span contenteditable="false">Sala y Caja</span><hr></div>

  <!-- CAJERO -->
  <div class="card" data-id="f3">
    <button class="ctog" onclick="togCard(this)">
      <div class="cico">üí≥</div>
      <div style="flex:1;min-width:0">
        <div class="cnom">Cajero / Responsable de Sala</div>
        <div class="cdsc">Caja Wahio ¬∑ Supervisi√≥n sala ¬∑ Comandas ¬∑ Cuadre diario</div>
      </div>
      <span class="badge bc">Cr√≠tico</span><span class="chv">‚ñº</span>
    </button>
    <div class="cbody" id="cb-f3">
      <div class="cep" id="cep-f3">
        <div class="cep-row">
          <div class="cep-g"><label class="cep-l">√çcono</label><input class="cep-i cep-ico" value="üí≥" oninput="setIco(this,'f3')"></div>
          <div class="cep-g" style="flex:1"><label class="cep-l">Nombre</label><input class="cep-i" style="width:100%" value="Cajero / Responsable de Sala" oninput="setNom(this,'f3')"></div>
          <div class="cep-g" style="flex:2"><label class="cep-l">Descripci√≥n</label><input class="cep-i" style="width:100%" value="Caja Wahio ¬∑ Supervisi√≥n sala ¬∑ Comandas ¬∑ Cuadre diario" oninput="setDsc(this,'f3')"></div>
          <div class="cep-g"><label class="cep-l">Criticidad</label><select class="cep-sel" onchange="setBadge(this,'f3')"><option value="c" selected>Cr√≠tico</option><option value="p">Parcial</option><option value="f">Flexible</option></select></div>
        </div>
      </div>
      <div class="ib">
        <div class="ibt ig"><span class="ibt-t" contenteditable="false">üìÖ D√≠as activos</span></div>
        <div class="dias">
          <span class="dc dlun off" onclick="togDia(this)">Lun</span><span class="dc dmar off" onclick="togDia(this)">Mar</span>
          <span class="dc dmie on"  onclick="togDia(this)">Mi√© ¬∑ <span class="dtxt" contenteditable="false">Admin.</span></span>
          <span class="dc djue on"  onclick="togDia(this)">Jue ¬∑ <span class="dtxt" contenteditable="false">Servicio</span></span>
          <span class="dc dvie on"  onclick="togDia(this)">Vie ¬∑ <span class="dtxt" contenteditable="false">Servicio</span></span>
          <span class="dc dsab on"  onclick="togDia(this)">S√°b ¬∑ <span class="dtxt" contenteditable="false">Servicio</span></span>
          <span class="dc ddom on"  onclick="togDia(this)">Dom ¬∑ <span class="dtxt" contenteditable="false">Servicio</span></span>
        </div>
      </div>
      <div class="ib">
        <div class="ibt ir"><span class="ibt-t" contenteditable="false">üí≥ Funciones de caja ‚Äî Wahio</span></div>
        <div class="iw" id="iw-f3a">
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Abrir caja: verificar fondo inicial y registrar apertura en Wahio</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Tomar pagos (efectivo y transferencia) y registrar cada venta en Wahio</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Cerrar comandas en Wahio ‚Äî verificar que cada mesa est√© cobrada</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Cuadrar caja por turno: efectivo real vs. Wahio</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Reportar diferencias al administrador ‚Äî positivas o negativas, sin excepci√≥n</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Registrar compras del d√≠a en el sistema</span><button class="deli" onclick="delI(this)">‚úï</button></div>
        </div>
        <button class="add-i" onclick="addI('iw-f3a','var(--rojo)')">+ agregar funci√≥n de caja</button>
      </div>
      <div class="ib">
        <div class="ibt ia"><span class="ibt-t" contenteditable="false">üõé Funciones de sala y supervisi√≥n</span></div>
        <div class="iw" id="iw-f3b">
          <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Supervisar personal de sala durante todo el servicio</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Escribir comandas en papel (obligaci√≥n legal colombiana) y llevarlas a cocina</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Confirmar tiempos de cocina con el cocinero principal</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Verificar satisfacci√≥n del cliente ‚Äî responsable de la experiencia en sala</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Lavar ba√±os cada 2 horas durante el servicio</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Registros de cierre en Saneamiento y Registro_Equipo</span><button class="deli" onclick="delI(this)">‚úï</button></div>
        </div>
        <button class="add-i" onclick="addI('iw-f3b','var(--am)')">+ agregar funci√≥n de sala</button>
      </div>
      <div class="ib">
        <div class="ibt ig"><span class="ibt-t" contenteditable="false">‚è∞ Horario y procedimientos Wahio</span></div>
        <div class="iw" id="iw-f3c">
          <div class="eitem"><span class="ebul" style="color:#555">‚óÜ</span><span class="etxt" contenteditable="false">Horario (jue‚Äìdom): completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:#555">‚óÜ</span><span class="etxt" contenteditable="false">Procedimiento apertura Wahio: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:#555">‚óÜ</span><span class="etxt" contenteditable="false">Procedimiento cierre Wahio: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:#555">‚óÜ</span><span class="etxt" contenteditable="false">Qu√© hacer si Wahio falla: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
        </div>
        <button class="add-i" onclick="addI('iw-f3c','#555')">+ agregar procedimiento</button>
      </div>
      <div class="cact"><button class="btn-cfg" onclick="togCEP('f3',this)">‚öô Configurar cargo</button><button class="btn-del" onclick="delCard('f3')">üóë Eliminar cargo</button></div>
    </div>
  </div>

  <!-- MESERO -->
  <div class="card" data-id="f4">
    <button class="ctog" onclick="togCard(this)">
      <div class="cico">üõéÔ∏è</div>
      <div style="flex:1;min-width:0">
        <div class="cnom">Mesero</div>
        <div class="cdsc">Atenci√≥n al cliente ¬∑ Servicio en sala ¬∑ Aseo ¬∑ Comandas</div>
      </div>
      <span class="badge bf">Flexible</span><span class="chv">‚ñº</span>
    </button>
    <div class="cbody" id="cb-f4">
      <div class="cep" id="cep-f4">
        <div class="cep-row">
          <div class="cep-g"><label class="cep-l">√çcono</label><input class="cep-i cep-ico" value="üõéÔ∏è" oninput="setIco(this,'f4')"></div>
          <div class="cep-g" style="flex:1"><label class="cep-l">Nombre</label><input class="cep-i" style="width:100%" value="Mesero" oninput="setNom(this,'f4')"></div>
          <div class="cep-g" style="flex:2"><label class="cep-l">Descripci√≥n</label><input class="cep-i" style="width:100%" value="Atenci√≥n al cliente ¬∑ Servicio en sala ¬∑ Aseo ¬∑ Comandas" oninput="setDsc(this,'f4')"></div>
          <div class="cep-g"><label class="cep-l">Criticidad</label><select class="cep-sel" onchange="setBadge(this,'f4')"><option value="c">Cr√≠tico</option><option value="p">Parcial</option><option value="f" selected>Flexible</option></select></div>
        </div>
      </div>
      <div class="ib">
        <div class="ibt ig"><span class="ibt-t" contenteditable="false">üìÖ D√≠as activos</span></div>
        <div class="dias">
          <span class="dc dlun off" onclick="togDia(this)">Lun</span><span class="dc dmar off" onclick="togDia(this)">Mar</span><span class="dc dmie off" onclick="togDia(this)">Mi√©</span>
          <span class="dc djue on"  onclick="togDia(this)">Jue ¬∑ <span class="dtxt" contenteditable="false">Servicio</span></span>
          <span class="dc dvie on"  onclick="togDia(this)">Vie ¬∑ <span class="dtxt" contenteditable="false">Servicio</span></span>
          <span class="dc dsab on"  onclick="togDia(this)">S√°b ¬∑ <span class="dtxt" contenteditable="false">Servicio</span></span>
          <span class="dc ddom on"  onclick="togDia(this)">Dom ¬∑ <span class="dtxt" contenteditable="false">Servicio</span></span>
        </div>
      </div>
      <div class="ib">
        <div class="ibt iv"><span class="ibt-t" contenteditable="false">üõé Funciones de servicio</span></div>
        <div class="iw" id="iw-f4a">
          <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Recibir al cliente: asignar mesa y dar bienvenida con calidez</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Tomar orden escuchando activamente ‚Äî anotar adicionales y variaciones exactas</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Escribir comanda en papel (obligaci√≥n legal) y llevarla a cocina</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Servir comida ‚Äî verificar que est√© completa antes de llevar a la mesa</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Verificar satisfacci√≥n del cliente durante el servicio</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Retirar platos usados y limpiar mesa entre clientes</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Llenar salseros y servilleteros antes de cada servicio</span><button class="deli" onclick="delI(this)">‚úï</button></div>
        </div>
        <button class="add-i" onclick="addI('iw-f4a','var(--vd-t)')">+ agregar funci√≥n</button>
      </div>
      <div class="ib">
        <div class="ibt ib2"><span class="ibt-t" contenteditable="false">üßπ Funciones de aseo</span></div>
        <div class="iw" id="iw-f4b">
          <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Barrer zona interna y externa antes de abrir</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Trapear pisos, aseo segundo piso y sacar/entrar mesas y sillas</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Registrar limpieza en Saneamiento al cierre del turno</span><button class="deli" onclick="delI(this)">‚úï</button></div>
        </div>
        <button class="add-i" onclick="addI('iw-f4b','var(--az-t)')">+ agregar funci√≥n de aseo</button>
      </div>
      <div class="ib">
        <div class="ibt ig"><span class="ibt-t" contenteditable="false">‚è∞ Horario</span></div>
        <div class="iw" id="iw-f4c">
          <div class="eitem"><span class="ebul" style="color:#555">‚óÜ</span><span class="etxt" contenteditable="false">Horario (jue‚Äìdom): completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
        </div>
        <button class="add-i" onclick="addI('iw-f4c','#555')">+ agregar dato</button>
      </div>
      <div class="cact"><button class="btn-cfg" onclick="togCEP('f4',this)">‚öô Configurar cargo</button><button class="btn-del" onclick="delCard('f4')">üóë Eliminar cargo</button></div>
    </div>
  </div>

  <div class="sdiv"><span contenteditable="false">Bar</span><hr></div>

  <!-- BARTENDER -->
  <div class="card" data-id="f5">
    <button class="ctog" onclick="togCard(this)">
      <div class="cico">ü•§</div>
      <div style="flex:1;min-width:0">
        <div class="cnom">Bartender / Encargado de Bar</div>
        <div class="cdsc">Bebidas preparadas ¬∑ Limonadas ¬∑ Control stock bar</div>
      </div>
      <span class="badge bp">Parcial</span><span class="chv">‚ñº</span>
    </button>
    <div class="cbody" id="cb-f5">
      <div class="cep" id="cep-f5">
        <div class="cep-row">
          <div class="cep-g"><label class="cep-l">√çcono</label><input class="cep-i cep-ico" value="ü•§" oninput="setIco(this,'f5')"></div>
          <div class="cep-g" style="flex:1"><label class="cep-l">Nombre</label><input class="cep-i" style="width:100%" value="Bartender / Encargado de Bar" oninput="setNom(this,'f5')"></div>
          <div class="cep-g" style="flex:2"><label class="cep-l">Descripci√≥n</label><input class="cep-i" style="width:100%" value="Bebidas preparadas ¬∑ Limonadas ¬∑ Control stock bar" oninput="setDsc(this,'f5')"></div>
          <div class="cep-g"><label class="cep-l">Criticidad</label><select class="cep-sel" onchange="setBadge(this,'f5')"><option value="c">Cr√≠tico</option><option value="p" selected>Parcial</option><option value="f">Flexible</option></select></div>
        </div>
      </div>
      <div class="ib">
        <div class="ibt ig"><span class="ibt-t" contenteditable="false">üìÖ D√≠as activos</span></div>
        <div class="dias">
          <span class="dc dlun off" onclick="togDia(this)">Lun</span><span class="dc dmar off" onclick="togDia(this)">Mar</span><span class="dc dmie off" onclick="togDia(this)">Mi√©</span>
          <span class="dc djue on"  onclick="togDia(this)">Jue ¬∑ <span class="dtxt" contenteditable="false">Servicio</span></span>
          <span class="dc dvie on"  onclick="togDia(this)">Vie ¬∑ <span class="dtxt" contenteditable="false">Servicio</span></span>
          <span class="dc dsab on"  onclick="togDia(this)">S√°b ¬∑ <span class="dtxt" contenteditable="false">Servicio</span></span>
          <span class="dc ddom on"  onclick="togDia(this)">Dom ¬∑ <span class="dtxt" contenteditable="false">Servicio</span></span>
        </div>
      </div>
      <div class="ib">
        <div class="ibt ib2"><span class="ibt-t" contenteditable="false">ü•§ Bebidas bajo responsabilidad directa</span></div>
        <div class="iw" id="iw-f5a">
          <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Limonadas: Coco $8k ¬∑ Cereza $8k ¬∑ Aguacate $10k ¬∑ Panela copa $3.5k / jarra $10k</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Sodas: Sunrise $8k ¬∑ Blue cura√ßao $8k ¬∑ Frutos rojos $8k ¬∑ Frutos amarillos $8k</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Jugos naturales: Mora $8k ¬∑ Maracuy√° $8k ¬∑ Naranja $8k</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Embotelladas: Coca-Cola familiar $9k ¬∑ Personal $5k ¬∑ Agua sin gas $3.5k ¬∑ Cerveza $5k</span><button class="deli" onclick="delI(this)">‚úï</button></div>
        </div>
        <button class="add-i" onclick="addI('iw-f5a','var(--az-t)')">+ agregar bebida</button>
      </div>
      <div class="ib">
        <div class="ibt ir"><span class="ibt-t" contenteditable="false">‚öô Funciones operativas</span></div>
        <div class="iw" id="iw-f5b">
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Preparar y servir bebidas siguiendo ficha t√©cnica ‚Äî temperatura y presentaci√≥n correctas</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Cargar nevera de gaseosas al inicio de cada turno</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Registrar consumo de bebidas en sistema Bar</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Reportar alertas de reposici√≥n antes de quedarse sin producto</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Limpiar barra y vasos al cierre ‚Äî registrar en Saneamiento</span><button class="deli" onclick="delI(this)">‚úï</button></div>
        </div>
        <button class="add-i" onclick="addI('iw-f5b','var(--rojo)')">+ agregar funci√≥n</button>
      </div>
      <div class="ib">
        <div class="ibt ig"><span class="ibt-t" contenteditable="false">‚è∞ Horario</span></div>
        <div class="iw" id="iw-f5c">
          <div class="eitem"><span class="ebul" style="color:#555">‚óÜ</span><span class="etxt" contenteditable="false">Horario (jue‚Äìdom): completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
        </div>
        <button class="add-i" onclick="addI('iw-f5c','#555')">+ agregar dato</button>
      </div>
      <div class="cact"><button class="btn-cfg" onclick="togCEP('f5',this)">‚öô Configurar cargo</button><button class="btn-del" onclick="delCard('f5')">üóë Eliminar cargo</button></div>
    </div>
  </div>

  <div class="sdiv"><span contenteditable="false">Bodega y Dep√≥sito</span><hr></div>

  <!-- BODEGA -->
  <div class="card" data-id="f6">
    <button class="ctog" onclick="togCard(this)">
      <div class="cico">üì¶</div>
      <div style="flex:1;min-width:0">
        <div class="cnom">Encargado de Bodega / Dep√≥sito</div>
        <div class="cdsc">Recepci√≥n ¬∑ Almacenamiento ¬∑ Despacho a cocina ¬∑ Control inventario</div>
      </div>
      <span class="badge bp">Parcial</span><span class="chv">‚ñº</span>
    </button>
    <div class="cbody" id="cb-f6">
      <div class="cep" id="cep-f6">
        <div class="cep-row">
          <div class="cep-g"><label class="cep-l">√çcono</label><input class="cep-i cep-ico" value="üì¶" oninput="setIco(this,'f6')"></div>
          <div class="cep-g" style="flex:1"><label class="cep-l">Nombre</label><input class="cep-i" style="width:100%" value="Encargado de Bodega / Dep√≥sito" oninput="setNom(this,'f6')"></div>
          <div class="cep-g" style="flex:2"><label class="cep-l">Descripci√≥n</label><input class="cep-i" style="width:100%" value="Recepci√≥n ¬∑ Almacenamiento ¬∑ Despacho a cocina ¬∑ Control inventario" oninput="setDsc(this,'f6')"></div>
          <div class="cep-g"><label class="cep-l">Criticidad</label><select class="cep-sel" onchange="setBadge(this,'f6')"><option value="c">Cr√≠tico</option><option value="p" selected>Parcial</option><option value="f">Flexible</option></select></div>
        </div>
      </div>
      <div class="ib">
        <div class="ibt ig"><span class="ibt-t" contenteditable="false">üìÖ D√≠as activos</span></div>
        <div class="dias">
          <span class="dc dlun off" onclick="togDia(this)">Lun</span>
          <span class="dc dmar on"  onclick="togDia(this)">Mar ¬∑ <span class="dtxt" contenteditable="false">Recepci√≥n</span></span>
          <span class="dc dmie on"  onclick="togDia(this)">Mi√© ¬∑ <span class="dtxt" contenteditable="false">Control</span></span>
          <span class="dc djue on"  onclick="togDia(this)">Jue ¬∑ <span class="dtxt" contenteditable="false">Recepci√≥n</span></span>
          <span class="dc dvie on"  onclick="togDia(this)">Vie ¬∑ <span class="dtxt" contenteditable="false">Control</span></span>
          <span class="dc dsab off" onclick="togDia(this)">S√°b</span>
          <span class="dc ddom off" onclick="togDia(this)">Dom</span>
        </div>
      </div>
      <div class="ib">
        <div class="ibt im"><span class="ibt-t" contenteditable="false">üì¶ Recepci√≥n y despacho</span></div>
        <div class="iw" id="iw-f6a">
          <div class="eitem"><span class="ebul" style="color:var(--mo-t)">‚óÜ</span><span class="etxt" contenteditable="false">Recibir compras (pl√°sticos, cajas, desechables) y verificar contra factura</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--mo-t)">‚óÜ</span><span class="etxt" contenteditable="false">Almacenar correctamente ‚Äî rotaci√≥n FIFO y control de temperaturas</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--mo-t)">‚óÜ</span><span class="etxt" contenteditable="false">Registrar ENTRADA en sistema Dep√≥sito al momento de recibir</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--mo-t)">‚óÜ</span><span class="etxt" contenteditable="false">Despachar insumos a cocina seg√∫n solicitud documentada</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--mo-t)">‚óÜ</span><span class="etxt" contenteditable="false">Registrar SALIDA en sistema cada vez que despacha ‚Äî sin excepci√≥n</span><button class="deli" onclick="delI(this)">‚úï</button></div>
        </div>
        <button class="add-i" onclick="addI('iw-f6a','var(--mo-t)')">+ agregar funci√≥n</button>
      </div>
      <div class="ib">
        <div class="ibt iv"><span class="ibt-t" contenteditable="false">üìä Control y limpieza</span></div>
        <div class="iw" id="iw-f6b">
          <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Control de inventario semanal ‚Äî lo f√≠sico debe coincidir con el sistema</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Limpiar bodega y dep√≥sito ‚Äî registrar en Saneamiento</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Controlar plagas ‚Äî seguimiento al contrato de fumigaci√≥n</span><button class="deli" onclick="delI(this)">‚úï</button></div>
        </div>
        <button class="add-i" onclick="addI('iw-f6b','var(--vd-t)')">+ agregar funci√≥n</button>
      </div>
      <div class="ib">
        <div class="ibt ig"><span class="ibt-t" contenteditable="false">‚è∞ Horario y d√≠as de recepci√≥n</span></div>
        <div class="iw" id="iw-f6c">
          <div class="eitem"><span class="ebul" style="color:#555">‚óÜ</span><span class="etxt" contenteditable="false">Horario: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          <div class="eitem"><span class="ebul" style="color:#555">‚óÜ</span><span class="etxt" contenteditable="false">D√≠as de recepci√≥n por proveedor: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
        </div>
        <button class="add-i" onclick="addI('iw-f6c','#555')">+ agregar dato</button>
      </div>
      <div class="cact"><button class="btn-cfg" onclick="togCEP('f6',this)">‚öô Configurar cargo</button><button class="btn-del" onclick="delCard('f6')">üóë Eliminar cargo</button></div>
    </div>
  </div>

  <div class="addz" id="az-fn">
    <button class="addz-btn" onclick="togF('af-fn')">+ Agregar nuevo cargo al manual</button>
    <div class="addform" id="af-fn">
      <div class="af-row">
        <div class="af-g"><label class="af-l">Nombre del cargo</label><input class="af-i" id="afn-n" placeholder="Ej: Encargado de Saneamiento" style="min-width:180px"></div>
        <div class="af-g"><label class="af-l">Descripci√≥n</label><input class="af-i" id="afn-d" placeholder="Ej: Limpieza, registros..." style="min-width:160px"></div>
        <div class="af-g"><label class="af-l">√çcono</label><input class="af-i" id="afn-i" placeholder="üßº" style="width:52px;text-align:center"></div>
        <div class="af-g"><label class="af-l">Criticidad</label><select class="af-s" id="afn-c"><option value="c">Cr√≠tico</option><option value="p" selected>Parcial</option><option value="f">Flexible</option></select></div>
      </div>
      <div style="display:flex;gap:7px">
        <button class="btn bvd" onclick="addFn()">‚úì Crear cargo</button>
        <button class="btn bout" onclick="togF('af-fn')">Cancelar</button>
      </div>
    </div>
  </div>

</div><!-- /pane-fn -->


<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- TAB: PERFILES DE CARGO            -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="pane on" id="pane-prf">

  <div class="sdiv"><span contenteditable="false">Cocina</span><hr></div>

  <!-- PERFIL COCINERO PRINCIPAL -->
  <div class="card" data-id="p1">
    <button class="ctog" onclick="togCard(this)">
      <div class="cico">üî•</div>
      <div style="flex:1;min-width:0">
        <div class="cnom">Perfil: Cocinero Principal</div>
        <div class="cdsc">Requisitos ¬∑ Habilidades ¬∑ Actitud ¬∑ Condiciones ¬∑ Entrevista</div>
      </div>
      <span class="badge bc">Cr√≠tico</span><span class="chv">‚ñº</span>
    </button>
    <div class="cbody" id="cb-p1">
      <div class="cep" id="cep-p1">
        <div class="cep-row">
          <div class="cep-g"><label class="cep-l">√çcono</label><input class="cep-i cep-ico" value="üî•" oninput="setIco(this,'p1')"></div>
          <div class="cep-g" style="flex:1"><label class="cep-l">Nombre</label><input class="cep-i" style="width:100%" value="Perfil: Cocinero Principal" oninput="setNom(this,'p1')"></div>
          <div class="cep-g"><label class="cep-l">Criticidad</label><select class="cep-sel" onchange="setBadge(this,'p1')"><option value="c" selected>Cr√≠tico</option><option value="p">Parcial</option><option value="f">Flexible</option></select></div>
        </div>
      </div>
      <div class="pgrid">
        <div class="pblk">
          <div class="ibt ir" style="margin-bottom:8px;padding-bottom:6px">‚ö†Ô∏è Requisitos obligatorios</div>
          <div class="iw" id="iw-p1a">
            <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Experiencia m√≠nima 2 a√±os en parrilla a carb√≥n o le√±a ‚Äî no negociable</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Conocimiento de puntos de cocci√≥n (cerdo, res, pollo)</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Manejo de term√≥metro de cocina para control INVIMA</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Certificado de manipulaci√≥n de alimentos vigente</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p1a','var(--rojo)')">+ agregar requisito</button>
        </div>
        <div class="pblk">
          <div class="ibt ia" style="margin-bottom:8px;padding-bottom:6px">‚ú¶ Habilidades t√©cnicas</div>
          <div class="iw" id="iw-p1b">
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Control de temperatura del carb√≥n sin term√≥metro (criterio visual)</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Mise en place organizado para servicio de alto volumen</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Marinado y preparaci√≥n de carnes al estilo colombiano</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p1b','var(--am)')">+ agregar habilidad</button>
        </div>
        <div class="pblk">
          <div class="ibt iv" style="margin-bottom:8px;padding-bottom:6px">‚úì Actitud y perfil humano</div>
          <div class="iw" id="iw-p1c">
            <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Liderazgo natural ‚Äî el equipo de cocina responde a √©l</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Resistencia f√≠sica para turnos de 8+ horas en calor</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Cumple recetas exactas ‚Äî no improvisa sin autorizaci√≥n</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Puntualidad ‚Äî el carb√≥n no espera</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p1c','var(--vd-t)')">+ agregar actitud</button>
        </div>
        <div class="pblk">
          <div class="ibt ib2" style="margin-bottom:8px;padding-bottom:6px">‚óà Condiciones del cargo</div>
          <div class="iw" id="iw-p1d">
            <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Tipo de contrato: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Salario: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Per√≠odo de prueba: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Dotaci√≥n: uniforme, delantal, guantes, cofia</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p1d','var(--az-t)')">+ agregar condici√≥n</button>
        </div>
        <div class="pblk pfull">
          <div class="ibt iam" style="margin-bottom:8px;padding-bottom:6px">‚òÖ Preguntas clave para la entrevista</div>
          <div class="iw" id="iw-p1e">
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">¬øCu√°nto tiempo lleva trabajando con parrilla a carb√≥n?</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">¬øC√≥mo sabe visualmente que una punta de anca est√° en su punto?</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Si en pleno servicio se acaba el carb√≥n, ¬øqu√© hace?</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">¬øHa liderado un equipo de cocina? ¬øCu√°ntas personas?</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p1e','var(--am)')">+ agregar pregunta de entrevista</button>
        </div>
      </div>
      <div class="cact"><button class="btn-cfg" onclick="togCEP('p1',this)">‚öô Configurar perfil</button><button class="btn-del" onclick="delCard('p1')">üóë Eliminar perfil</button></div>
    </div>
  </div>


  <!-- AUXILIAR DE COCINA -->
  <div class="card" data-id="p2">
    <button class="ctog" onclick="togCard(this)">
      <div class="cico">üç≥</div>
      <div style="flex:1;min-width:0">
        <div class="cnom">Perfil: Auxiliar de Cocina</div>
        <div class="cdsc">Requisitos ¬∑ Habilidades ¬∑ Actitud ¬∑ Condiciones ¬∑ Entrevista</div>
      </div>
      <span class="badge bp">Parcial</span><span class="chv">‚ñº</span>
    </button>
    <div class="cbody" id="cb-p2">
      <div class="cep" id="cep-p2">
        <div class="cep-row">
          <div class="cep-g"><label class="cep-l">√çcono</label><input class="cep-i cep-ico" value="üç≥" oninput="setIco(this,'p2')"></div>
          <div class="cep-g" style="flex:1"><label class="cep-l">Nombre</label><input class="cep-i" style="width:100%" value="Perfil: Auxiliar de Cocina" oninput="setNom(this,'p2')"></div>
          <div class="cep-g"><label class="cep-l">Criticidad</label><select class="cep-sel" onchange="setBadge(this,'p2')"><option value="c">Cr√≠tico</option><option value="p" selected>Parcial</option><option value="f">Flexible</option></select></div>
        </div>
      </div>
      <div class="pgrid">
        <div class="pblk">
          <div class="ibt ir" style="margin-bottom:8px;padding-bottom:6px">‚ö†Ô∏è Requisitos obligatorios</div>
          <div class="iw" id="iw-p2a">
            <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Experiencia m√≠nima 6 meses en cocina de restaurante</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Conocimiento b√°sico de manipulaci√≥n de alimentos</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Certificado de manipulaci√≥n de alimentos vigente (o disposici√≥n a obtenerlo)</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Disponibilidad para trabajar fines de semana</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p2a','var(--rojo)')">+ agregar requisito</button>
        </div>
        <div class="pblk">
          <div class="ibt ia" style="margin-bottom:8px;padding-bottom:6px">‚ú¶ Habilidades t√©cnicas</div>
          <div class="iw" id="iw-p2b">
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Porcionado preciso de carnes con b√°scula</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Formado de croquetas a mano ‚Äî tama√±o y peso consistente</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Mise en place organizado y r√°pido</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Registro b√°sico en app/sistema desde celular</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p2b','var(--am)')">+ agregar habilidad</button>
        </div>
        <div class="pblk">
          <div class="ibt iv" style="margin-bottom:8px;padding-bottom:6px">‚úì Actitud y perfil humano</div>
          <div class="iw" id="iw-p2c">
            <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Seguidor de instrucciones exactas ‚Äî no improvisa las recetas</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Resistencia f√≠sica para jornadas largas de pie</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Orden y limpieza en su √°rea de trabajo durante toda la jornada</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Actitud de aprendizaje ‚Äî dispuesto a recibir correcciones</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p2c','var(--vd-t)')">+ agregar actitud</button>
        </div>
        <div class="pblk">
          <div class="ibt ib2" style="margin-bottom:8px;padding-bottom:6px">‚óà Condiciones del cargo</div>
          <div class="iw" id="iw-p2d">
            <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Tipo de contrato: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Salario: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Per√≠odo de prueba: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Dotaci√≥n: uniforme, delantal, guantes, cofia</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p2d','var(--az-t)')">+ agregar condici√≥n</button>
        </div>
        <div class="pblk pfull">
          <div class="ibt iam" style="margin-bottom:8px;padding-bottom:6px">‚òÖ Preguntas clave para la entrevista</div>
          <div class="iw" id="iw-p2e">
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">¬øHa porcionado y formado croquetas o hamburguesas antes? ¬øCu√°ntas por turno?</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Si la carne marinada no huele bien al llegar, ¬øqu√© hace?</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">¬øC√≥mo organiza su √°rea de trabajo cuando hay mucho volumen de producci√≥n?</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">¬øQu√© hace si se le acaba un ingrediente y el cocinero principal no est√° disponible?</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p2e','var(--am)')">+ agregar pregunta</button>
        </div>
      </div>
      <div class="cact"><button class="btn-cfg" onclick="togCEP('p2',this)">‚öô Configurar perfil</button><button class="btn-del" onclick="delCard('p2')">üóë Eliminar perfil</button></div>
    </div>
  </div>

  <div class="sdiv"><span contenteditable="false">Sala y Caja</span><hr></div>

  <!-- CAJERO -->
  <div class="card" data-id="p3">
    <button class="ctog" onclick="togCard(this)">
      <div class="cico">üí≥</div>
      <div style="flex:1;min-width:0">
        <div class="cnom">Perfil: Cajero / Responsable de Sala</div>
        <div class="cdsc">Requisitos ¬∑ Habilidades ¬∑ Actitud ¬∑ Condiciones ¬∑ Entrevista</div>
      </div>
      <span class="badge bc">Cr√≠tico</span><span class="chv">‚ñº</span>
    </button>
    <div class="cbody" id="cb-p3">
      <div class="cep" id="cep-p3">
        <div class="cep-row">
          <div class="cep-g"><label class="cep-l">√çcono</label><input class="cep-i cep-ico" value="üí≥" oninput="setIco(this,'p3')"></div>
          <div class="cep-g" style="flex:1"><label class="cep-l">Nombre</label><input class="cep-i" style="width:100%" value="Perfil: Cajero / Responsable de Sala" oninput="setNom(this,'p3')"></div>
          <div class="cep-g"><label class="cep-l">Criticidad</label><select class="cep-sel" onchange="setBadge(this,'p3')"><option value="c" selected>Cr√≠tico</option><option value="p">Parcial</option><option value="f">Flexible</option></select></div>
        </div>
      </div>
      <div class="pgrid">
        <div class="pblk">
          <div class="ibt ir" style="margin-bottom:8px;padding-bottom:6px">‚ö†Ô∏è Requisitos obligatorios</div>
          <div class="iw" id="iw-p3a">
            <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Experiencia m√≠nima 1 a√±o manejando caja registradora o POS</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Manejo de efectivo y cuadre de caja sin diferencias frecuentes</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Conocimiento b√°sico de atenci√≥n al cliente y protocolo de sala</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Manejo de Wahio o sistema POS similar (o r√°pida curva de aprendizaje)</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p3a','var(--rojo)')">+ agregar requisito</button>
        </div>
        <div class="pblk">
          <div class="ibt ia" style="margin-bottom:8px;padding-bottom:6px">‚ú¶ Habilidades t√©cnicas</div>
          <div class="iw" id="iw-p3b">
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Operaci√≥n fluida de Wahio: abrir, tomar pedidos, cobrar, cerrar caja</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Aritm√©tica r√°pida para verificar vueltos y cuadre</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Supervisi√≥n de personal de sala durante el servicio</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Resoluci√≥n r√°pida de quejas o problemas con clientes</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p3b','var(--am)')">+ agregar habilidad</button>
        </div>
        <div class="pblk">
          <div class="ibt iv" style="margin-bottom:8px;padding-bottom:6px">‚úì Actitud y perfil humano</div>
          <div class="iw" id="iw-p3c">
            <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Honestidad absoluta con el manejo de dinero ‚Äî no negociable</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Liderazgo para coordinar meseros y sala bajo presi√≥n</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Trato amable con el cliente incluso en momentos de alta demanda</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Reporte inmediato de diferencias en caja ‚Äî sin ocultar nada</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p3c','var(--vd-t)')">+ agregar actitud</button>
        </div>
        <div class="pblk">
          <div class="ibt ib2" style="margin-bottom:8px;padding-bottom:6px">‚óà Condiciones del cargo</div>
          <div class="iw" id="iw-p3d">
            <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Tipo de contrato: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Salario: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">D√≠as y horario: mi√©rcoles a domingo</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Dotaci√≥n: uniforme de cajero/supervisor</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p3d','var(--az-t)')">+ agregar condici√≥n</button>
        </div>
        <div class="pblk pfull">
          <div class="ibt iam" style="margin-bottom:8px;padding-bottom:6px">‚òÖ Preguntas clave para la entrevista</div>
          <div class="iw" id="iw-p3e">
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">¬øCu√°nto tiempo manej√≥ caja en su trabajo anterior? ¬øCu√°nto era el volumen diario?</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Si al cuadrar la caja le falta dinero, ¬øqu√© hace exactamente?</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">¬øHa supervisado meseros o personal de servicio antes?</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Un cliente se queja de que su pedido lleg√≥ mal. ¬øC√≥mo lo maneja?</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p3e','var(--am)')">+ agregar pregunta</button>
        </div>
      </div>
      <div class="cact"><button class="btn-cfg" onclick="togCEP('p3',this)">‚öô Configurar perfil</button><button class="btn-del" onclick="delCard('p3')">üóë Eliminar perfil</button></div>
    </div>
  </div>

  <!-- MESERO -->
  <div class="card" data-id="p4">
    <button class="ctog" onclick="togCard(this)">
      <div class="cico">üõéÔ∏è</div>
      <div style="flex:1;min-width:0">
        <div class="cnom">Perfil: Mesero</div>
        <div class="cdsc">Requisitos ¬∑ Habilidades ¬∑ Actitud ¬∑ Condiciones ¬∑ Entrevista</div>
      </div>
      <span class="badge bf">Flexible</span><span class="chv">‚ñº</span>
    </button>
    <div class="cbody" id="cb-p4">
      <div class="cep" id="cep-p4">
        <div class="cep-row">
          <div class="cep-g"><label class="cep-l">√çcono</label><input class="cep-i cep-ico" value="üõéÔ∏è" oninput="setIco(this,'p4')"></div>
          <div class="cep-g" style="flex:1"><label class="cep-l">Nombre</label><input class="cep-i" style="width:100%" value="Perfil: Mesero" oninput="setNom(this,'p4')"></div>
          <div class="cep-g"><label class="cep-l">Criticidad</label><select class="cep-sel" onchange="setBadge(this,'p4')"><option value="c">Cr√≠tico</option><option value="p">Parcial</option><option value="f" selected>Flexible</option></select></div>
        </div>
      </div>
      <div class="pgrid">
        <div class="pblk">
          <div class="ibt ir" style="margin-bottom:8px;padding-bottom:6px">‚ö†Ô∏è Requisitos obligatorios</div>
          <div class="iw" id="iw-p4a">
            <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Experiencia m√≠nima 6 meses en atenci√≥n al cliente o servicio de mesa</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Disponibilidad fines de semana completos (jue‚Äìdom)</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Buena presentaci√≥n personal y dicci√≥n clara</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p4a','var(--rojo)')">+ agregar requisito</button>
        </div>
        <div class="pblk">
          <div class="ibt ia" style="margin-bottom:8px;padding-bottom:6px">‚ú¶ Habilidades t√©cnicas</div>
          <div class="iw" id="iw-p4b">
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Conocimiento del men√∫ completo ‚Äî precios, ingredientes, adicionales</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Escritura clara de comandas en papel</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Capacidad de atender varias mesas simult√°neamente sin perder calidad</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p4b','var(--am)')">+ agregar habilidad</button>
        </div>
        <div class="pblk">
          <div class="ibt iv" style="margin-bottom:8px;padding-bottom:6px">‚úì Actitud y perfil humano</div>
          <div class="iw" id="iw-p4c">
            <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Calidez genuina ‚Äî hace que el cliente se sienta como en casa</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Aguante ante clientes dif√≠ciles ‚Äî no se altera bajo presi√≥n</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Proactivo ‚Äî no espera a que le digan qu√© hacer</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p4c','var(--vd-t)')">+ agregar actitud</button>
        </div>
        <div class="pblk">
          <div class="ibt ib2" style="margin-bottom:8px;padding-bottom:6px">‚óà Condiciones del cargo</div>
          <div class="iw" id="iw-p4d">
            <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Tipo de contrato: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Salario: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">D√≠as y horario: jueves a domingo</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p4d','var(--az-t)')">+ agregar condici√≥n</button>
        </div>
        <div class="pblk pfull">
          <div class="ibt iam" style="margin-bottom:8px;padding-bottom:6px">‚òÖ Preguntas clave para la entrevista</div>
          <div class="iw" id="iw-p4e">
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">¬øC√≥mo recibe a un cliente cuando entra al restaurante?</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Si un cliente dice que su hamburguesa lleg√≥ fr√≠a, ¬øqu√© hace?</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">¬øCu√°ntas mesas puede atender solo sin perder la calidad del servicio?</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">¬øQu√© hace si cocina le entrega un pedido incompleto?</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p4e','var(--am)')">+ agregar pregunta</button>
        </div>
      </div>
      <div class="cact"><button class="btn-cfg" onclick="togCEP('p4',this)">‚öô Configurar perfil</button><button class="btn-del" onclick="delCard('p4')">üóë Eliminar perfil</button></div>
    </div>
  </div>

  <div class="sdiv"><span contenteditable="false">Bar</span><hr></div>

  <!-- BARTENDER -->
  <div class="card" data-id="p5">
    <button class="ctog" onclick="togCard(this)">
      <div class="cico">ü•§</div>
      <div style="flex:1;min-width:0">
        <div class="cnom">Perfil: Bartender / Encargado de Bar</div>
        <div class="cdsc">Requisitos ¬∑ Habilidades ¬∑ Actitud ¬∑ Condiciones ¬∑ Entrevista</div>
      </div>
      <span class="badge bp">Parcial</span><span class="chv">‚ñº</span>
    </button>
    <div class="cbody" id="cb-p5">
      <div class="cep" id="cep-p5">
        <div class="cep-row">
          <div class="cep-g"><label class="cep-l">√çcono</label><input class="cep-i cep-ico" value="ü•§" oninput="setIco(this,'p5')"></div>
          <div class="cep-g" style="flex:1"><label class="cep-l">Nombre</label><input class="cep-i" style="width:100%" value="Perfil: Bartender / Encargado de Bar" oninput="setNom(this,'p5')"></div>
          <div class="cep-g"><label class="cep-l">Criticidad</label><select class="cep-sel" onchange="setBadge(this,'p5')"><option value="c">Cr√≠tico</option><option value="p" selected>Parcial</option><option value="f">Flexible</option></select></div>
        </div>
      </div>
      <div class="pgrid">
        <div class="pblk">
          <div class="ibt ir" style="margin-bottom:8px;padding-bottom:6px">‚ö†Ô∏è Requisitos obligatorios</div>
          <div class="iw" id="iw-p5a">
            <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Experiencia m√≠nima 1 a√±o preparando bebidas (jugos, limonadas, sodas)</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Conocimiento de BPM en manejo de bebidas y cadena de fr√≠o</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Disponibilidad fines de semana (jue‚Äìdom)</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p5a','var(--rojo)')">+ agregar requisito</button>
        </div>
        <div class="pblk">
          <div class="ibt ia" style="margin-bottom:8px;padding-bottom:6px">‚ú¶ Habilidades t√©cnicas</div>
          <div class="iw" id="iw-p5b">
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Preparaci√≥n exacta de limonadas siguiendo ficha t√©cnica (coco, cereza, aguacate, panela)</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Control de temperatura de servicio: bebidas fr√≠as a 3‚Äì5¬∞C</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Registro de consumo en sistema Bar desde celular</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p5b','var(--am)')">+ agregar habilidad</button>
        </div>
        <div class="pblk">
          <div class="ibt iv" style="margin-bottom:8px;padding-bottom:6px">‚úì Actitud y perfil humano</div>
          <div class="iw" id="iw-p5c">
            <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Presentaci√≥n y orden impecable en la barra durante todo el turno</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Rapidez sin sacrificar calidad ni presentaci√≥n</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Alerta al stock ‚Äî reporta antes de quedarse sin producto</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p5c','var(--vd-t)')">+ agregar actitud</button>
        </div>
        <div class="pblk">
          <div class="ibt ib2" style="margin-bottom:8px;padding-bottom:6px">‚óà Condiciones del cargo</div>
          <div class="iw" id="iw-p5d">
            <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Tipo de contrato: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Salario: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">D√≠as y horario: jueves a domingo</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p5d','var(--az-t)')">+ agregar condici√≥n</button>
        </div>
        <div class="pblk pfull">
          <div class="ibt iam" style="margin-bottom:8px;padding-bottom:6px">‚òÖ Preguntas clave para la entrevista</div>
          <div class="iw" id="iw-p5e">
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">¬øHa preparado limonadas o bebidas artesanales en volumen? ¬øCu√°ntos vasos por turno aproximadamente?</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Si una limonada le sale rosada en vez de blanca (coco), ¬øqu√© har√≠a?</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">¬øC√≥mo maneja el control de stock cuando hay servicio y no puede revisar la bodega?</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p5e','var(--am)')">+ agregar pregunta</button>
        </div>
      </div>
      <div class="cact"><button class="btn-cfg" onclick="togCEP('p5',this)">‚öô Configurar perfil</button><button class="btn-del" onclick="delCard('p5')">üóë Eliminar perfil</button></div>
    </div>
  </div>

  <div class="sdiv"><span contenteditable="false">Bodega y Dep√≥sito</span><hr></div>

  <!-- BODEGA -->
  <div class="card" data-id="p6">
    <button class="ctog" onclick="togCard(this)">
      <div class="cico">üì¶</div>
      <div style="flex:1;min-width:0">
        <div class="cnom">Perfil: Encargado de Bodega / Dep√≥sito</div>
        <div class="cdsc">Requisitos ¬∑ Habilidades ¬∑ Actitud ¬∑ Condiciones ¬∑ Entrevista</div>
      </div>
      <span class="badge bp">Parcial</span><span class="chv">‚ñº</span>
    </button>
    <div class="cbody" id="cb-p6">
      <div class="cep" id="cep-p6">
        <div class="cep-row">
          <div class="cep-g"><label class="cep-l">√çcono</label><input class="cep-i cep-ico" value="üì¶" oninput="setIco(this,'p6')"></div>
          <div class="cep-g" style="flex:1"><label class="cep-l">Nombre</label><input class="cep-i" style="width:100%" value="Perfil: Encargado de Bodega / Dep√≥sito" oninput="setNom(this,'p6')"></div>
          <div class="cep-g"><label class="cep-l">Criticidad</label><select class="cep-sel" onchange="setBadge(this,'p6')"><option value="c">Cr√≠tico</option><option value="p" selected>Parcial</option><option value="f">Flexible</option></select></div>
        </div>
      </div>
      <div class="pgrid">
        <div class="pblk">
          <div class="ibt ir" style="margin-bottom:8px;padding-bottom:6px">‚ö†Ô∏è Requisitos obligatorios</div>
          <div class="iw" id="iw-p6a">
            <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Experiencia en recepci√≥n y control de inventario de insumos</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Conocimiento de rotaci√≥n FIFO y BPM b√°sicas</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="false">Capacidad de verificar facturas vs. mercanc√≠a recibida</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p6a','var(--rojo)')">+ agregar requisito</button>
        </div>
        <div class="pblk">
          <div class="ibt ia" style="margin-bottom:8px;padding-bottom:6px">‚ú¶ Habilidades t√©cnicas</div>
          <div class="iw" id="iw-p6b">
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Registro de entradas y salidas en sistema digital (celular/tablet)</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Organizaci√≥n de bodega por categor√≠as y rotaci√≥n correcta</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Control de temperaturas en neveras y cuartos fr√≠os</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p6b','var(--am)')">+ agregar habilidad</button>
        </div>
        <div class="pblk">
          <div class="ibt iv" style="margin-bottom:8px;padding-bottom:6px">‚úì Actitud y perfil humano</div>
          <div class="iw" id="iw-p6c">
            <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Orden extremo ‚Äî cada cosa en su lugar, siempre</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Honestidad con el inventario ‚Äî no despacha sin registrar</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--vd-t)">‚óÜ</span><span class="etxt" contenteditable="false">Proactivo para reportar faltantes antes de que afecten la operaci√≥n</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p6c','var(--vd-t)')">+ agregar actitud</button>
        </div>
        <div class="pblk">
          <div class="ibt ib2" style="margin-bottom:8px;padding-bottom:6px">‚óà Condiciones del cargo</div>
          <div class="iw" id="iw-p6d">
            <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Tipo de contrato: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">Salario: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--az-t)">‚óÜ</span><span class="etxt" contenteditable="false">D√≠as y horario: martes a viernes (d√≠as de producci√≥n y recepci√≥n)</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p6d','var(--az-t)')">+ agregar condici√≥n</button>
        </div>
        <div class="pblk pfull">
          <div class="ibt iam" style="margin-bottom:8px;padding-bottom:6px">‚òÖ Preguntas clave para la entrevista</div>
          <div class="iw" id="iw-p6e">
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">¬øHa manejado inventario en restaurante o empresa de alimentos? ¬øC√≥mo lo controlaba?</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">Si llega un pedido de carne y el peso no coincide con la factura, ¬øqu√© hace?</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">¬øQu√© es FIFO y c√≥mo lo aplica en la rotaci√≥n de inventario?</span><button class="deli" onclick="delI(this)">‚úï</button></div>
            <div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="false">¬øC√≥mo reportar√≠a un faltante que descubri√≥ pero no sabe cu√°ndo ocurri√≥?</span><button class="deli" onclick="delI(this)">‚úï</button></div>
          </div>
          <button class="add-i" onclick="addI('iw-p6e','var(--am)')">+ agregar pregunta</button>
        </div>
      </div>
      <div class="cact"><button class="btn-cfg" onclick="togCEP('p6',this)">‚öô Configurar perfil</button><button class="btn-del" onclick="delCard('p6')">üóë Eliminar perfil</button></div>
    </div>
  </div>

  <div class="addz" id="az-prf">
    <button class="addz-btn" onclick="togF('af-prf')">+ Agregar nuevo perfil de cargo</button>
    <div class="addform" id="af-prf">
      <div class="af-row">
        <div class="af-g"><label class="af-l">Nombre del perfil</label><input class="af-i" id="afp-n" placeholder="Ej: Perfil: Cajero" style="min-width:180px"></div>
        <div class="af-g"><label class="af-l">√çcono</label><input class="af-i" id="afp-i" placeholder="üí≥" style="width:52px;text-align:center"></div>
        <div class="af-g"><label class="af-l">Criticidad</label><select class="af-s" id="afp-c"><option value="c">Cr√≠tico</option><option value="p" selected>Parcial</option><option value="f">Flexible</option></select></div>
      </div>
      <div style="display:flex;gap:7px">
        <button class="btn bvd" onclick="addPrf()">‚úì Crear perfil</button>
        <button class="btn bout" onclick="togF('af-prf')">Cancelar</button>
      </div>
    </div>
  </div>

</div><!-- /pane-prf -->


<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- TAB: QUI√âN HACE QU√â (RACI)        -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="pane" id="pane-raci">

  <div class="rlegend">
    <div class="rl"><div class="rl-ico rl-R">R</div><div><strong style="color:#FF9090">Responsable</strong><span>Hace la tarea directamente</span></div></div>
    <div class="rl"><div class="rl-ico rl-A">A</div><div><strong style="color:var(--or-t)">Aprueba</strong><span>Revisa y da el visto bueno final</span></div></div>
    <div class="rl"><div class="rl-ico rl-C">C</div><div><strong style="color:var(--az-t)">Coordina</strong><span>Trabaja con otros, se le consulta</span></div></div>
    <div class="rl"><div class="rl-ico rl-I">I</div><div><strong style="color:var(--vd-t)">Informado</strong><span>Recibe el reporte o resultado</span></div></div>
  </div>

  <div class="rhint">‚úé Modo Edici√≥n activo ‚Äî haz clic en cualquier celda R / A / C / I para cambiarla (cicla R‚ÜíA‚ÜíC‚ÜíI‚Üívac√≠o). Clic en el texto de las actividades para editarlo. Bot√≥n ‚úï para eliminar fila.</div>

  <div class="rwrap">
  <table class="rt" id="rtbl">
    <thead>
      <tr>
        <th><span class="thtxt" contenteditable="false">Actividad</span></th>
        <th><span class="thtxt" contenteditable="false">Cocinero Ppal.</span></th>
        <th><span class="thtxt" contenteditable="false">Auxiliar Cocina</span></th>
        <th><span class="thtxt" contenteditable="false">Cajero / Sala</span></th>
        <th><span class="thtxt" contenteditable="false">Mesero</span></th>
        <th><span class="thtxt" contenteditable="false">Bartender</span></th>
        <th><span class="thtxt" contenteditable="false">Bodega</span></th>
        <th><span class="thtxt" contenteditable="false">Admon.</span></th>
        <th style="width:28px"></th>
      </tr>
    </thead>
    <tbody id="rbody">
      <tr class="sr"><td colspan="9" contenteditable="false">üî• COCINA</td></tr>
      <tr><td><span class="atxt" contenteditable="false">Montar carne al barril</span></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td></td><td></td><td></td><td></td><td></td><td><span class="rc I" onclick="ciclo(this)">I</span></td><td><button class="rdel" onclick="this.parentNode.parentNode.remove();ag()">‚úï</button></td></tr>
      <tr><td><span class="atxt" contenteditable="false">Porcionar croquetas (‚â•130)</span></td><td></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td></td><td></td><td></td><td></td><td><span class="rc I" onclick="ciclo(this)">I</span></td><td><button class="rdel" onclick="this.parentNode.parentNode.remove();ag()">‚úï</button></td></tr>
      <tr><td><span class="atxt" contenteditable="false">Preparar t√°rtara y pi√±a</span></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td></td><td></td><td></td><td></td><td></td><td><span class="rc I" onclick="ciclo(this)">I</span></td><td><button class="rdel" onclick="this.parentNode.parentNode.remove();ag()">‚úï</button></td></tr>
      <tr><td><span class="atxt" contenteditable="false">Recibir pedidos de proveedores</span></td><td></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td></td><td></td><td></td><td><span class="rc C" onclick="ciclo(this)">C</span></td><td><span class="rc I" onclick="ciclo(this)">I</span></td><td><button class="rdel" onclick="this.parentNode.parentNode.remove();ag()">‚úï</button></td></tr>
      <tr><td><span class="atxt" contenteditable="false">Registrar en sistema Cocina v3.0</span></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td></td><td></td><td></td><td></td><td><span class="rc I" onclick="ciclo(this)">I</span></td><td><button class="rdel" onclick="this.parentNode.parentNode.remove();ag()">‚úï</button></td></tr>
      <tr><td><span class="atxt" contenteditable="false">Inventario semanal cocina</span></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td></td><td></td><td></td><td></td><td></td><td><span class="rc A" onclick="ciclo(this)">A</span></td><td><button class="rdel" onclick="this.parentNode.parentNode.remove();ag()">‚úï</button></td></tr>
      <tr class="sr"><td colspan="9" contenteditable="false">üí≥ CAJA Y SALA</td></tr>
      <tr><td><span class="atxt" contenteditable="false">Abrir y cerrar caja en Wahio</span></td><td></td><td></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td></td><td></td><td></td><td><span class="rc A" onclick="ciclo(this)">A</span></td><td><button class="rdel" onclick="this.parentNode.parentNode.remove();ag()">‚úï</button></td></tr>
      <tr><td><span class="atxt" contenteditable="false">Cuadrar caja y reportar diferencias</span></td><td></td><td></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td></td><td></td><td></td><td><span class="rc A" onclick="ciclo(this)">A</span></td><td><button class="rdel" onclick="this.parentNode.parentNode.remove();ag()">‚úï</button></td></tr>
      <tr><td><span class="atxt" contenteditable="false">Supervisar personal de sala</span></td><td></td><td></td><td><span class="rc A" onclick="ciclo(this)">A</span></td><td></td><td></td><td></td><td><span class="rc I" onclick="ciclo(this)">I</span></td><td><button class="rdel" onclick="this.parentNode.parentNode.remove();ag()">‚úï</button></td></tr>
      <tr><td><span class="atxt" contenteditable="false">Recibir cliente y tomar orden</span></td><td></td><td></td><td><span class="rc C" onclick="ciclo(this)">C</span></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td></td><td></td><td><span class="rc I" onclick="ciclo(this)">I</span></td><td><button class="rdel" onclick="this.parentNode.parentNode.remove();ag()">‚úï</button></td></tr>
      <tr><td><span class="atxt" contenteditable="false">Servir comida y verificar satisfacci√≥n</span></td><td></td><td></td><td><span class="rc A" onclick="ciclo(this)">A</span></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td></td><td></td><td><span class="rc I" onclick="ciclo(this)">I</span></td><td><button class="rdel" onclick="this.parentNode.parentNode.remove();ag()">‚úï</button></td></tr>
      <tr class="sr"><td colspan="9" contenteditable="false">ü•§ BAR</td></tr>
      <tr><td><span class="atxt" contenteditable="false">Preparar bebidas (limonadas, sodas, jugos)</span></td><td></td><td></td><td></td><td></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td></td><td><span class="rc I" onclick="ciclo(this)">I</span></td><td><button class="rdel" onclick="this.parentNode.parentNode.remove();ag()">‚úï</button></td></tr>
      <tr><td><span class="atxt" contenteditable="false">Control stock y registrar en sistema Bar</span></td><td></td><td></td><td></td><td></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td><span class="rc C" onclick="ciclo(this)">C</span></td><td><span class="rc I" onclick="ciclo(this)">I</span></td><td><button class="rdel" onclick="this.parentNode.parentNode.remove();ag()">‚úï</button></td></tr>
      <tr class="sr"><td colspan="9" contenteditable="false">üì¶ BODEGA Y DEP√ìSITO</td></tr>
      <tr><td><span class="atxt" contenteditable="false">Recibir y verificar compras</span></td><td></td><td></td><td></td><td></td><td></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td><span class="rc A" onclick="ciclo(this)">A</span></td><td><button class="rdel" onclick="this.parentNode.parentNode.remove();ag()">‚úï</button></td></tr>
      <tr><td><span class="atxt" contenteditable="false">Registrar entradas y salidas</span></td><td></td><td></td><td></td><td></td><td></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td><span class="rc I" onclick="ciclo(this)">I</span></td><td><button class="rdel" onclick="this.parentNode.parentNode.remove();ag()">‚úï</button></td></tr>
      <tr><td><span class="atxt" contenteditable="false">Despachar insumos a cocina</span></td><td></td><td></td><td></td><td></td><td></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td><span class="rc C" onclick="ciclo(this)">C</span></td><td><button class="rdel" onclick="this.parentNode.parentNode.remove();ag()">‚úï</button></td></tr>
      <tr class="sr"><td colspan="9" contenteditable="false">üßº SANEAMIENTO Y EQUIPOS</td></tr>
      <tr><td><span class="atxt" contenteditable="false">Registrar limpieza en Saneamiento (cada hora)</span></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td><span class="rc I" onclick="ciclo(this)">I</span></td><td><button class="rdel" onclick="this.parentNode.parentNode.remove();ag()">‚úï</button></td></tr>
      <tr><td><span class="atxt" contenteditable="false">Reportar da√±os de equipos de inmediato</span></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td><span class="rc R" onclick="ciclo(this)">R</span></td><td><span class="rc A" onclick="ciclo(this)">A</span></td><td><button class="rdel" onclick="this.parentNode.parentNode.remove();ag()">‚úï</button></td></tr>
      <tr><td><span class="atxt" contenteditable="false">Reuni√≥n semanal lunes 10 AM</span></td><td><span class="rc C" onclick="ciclo(this)">C</span></td><td><span class="rc I" onclick="ciclo(this)">I</span></td><td><span class="rc C" onclick="ciclo(this)">C</span></td><td><span class="rc I" onclick="ciclo(this)">I</span></td><td><span class="rc I" onclick="ciclo(this)">I</span></td><td><span class="rc I" onclick="ciclo(this)">I</span></td><td><span class="rc A" onclick="ciclo(this)">A</span></td><td><button class="rdel" onclick="this.parentNode.parentNode.remove();ag()">‚úï</button></td></tr>
    </tbody>
  </table>
  </div>

  <div class="radd">
    <button class="btn bvd" onclick="addRRow()">+ Agregar actividad</button>
    <button class="btn bout" onclick="addRSec()">+ Agregar secci√≥n</button>
  </div>

</div><!-- /pane-raci -->




<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<!-- TAB: EQUIPO                        -->
<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="pane" id="pane-eq">
  <div class="eq-wrap">
    <div class="eq-toolbar">
      <input class="eq-search" type="text" placeholder="üîç Buscar empleado..." oninput="eqFilter(this.value)" id="eq-search">
      <button class="eq-filter on" id="eqf-activo" onclick="eqSetFilter('activo',this)">Activos</button>
      <button class="eq-filter" id="eqf-todos" onclick="eqSetFilter('todos',this)">Todos</button>
      <button class="eq-filter" id="eqf-arch" onclick="eqSetFilter('archivado',this)">Archivados</button>
      <button class="btn bvd" onclick="eqNuevoEmpleado()" style="padding:7px 12px;margin-left:auto">+ Nuevo empleado</button>
    </div>
    <div class="eq-list" id="eq-list">
      <div class="eq-empty"><div class="eq-empty-ico">üë•</div><div class="eq-empty-t">Sin empleados a√∫n</div><div class="eq-empty-s">Haz clic en "+ Nuevo empleado" para agregar el primero</div></div>
    </div>
  </div>
</div>

<!-- MODAL EMPLEADO / REGISTRO -->
<div class="eq-modal-overlay" id="eq-modal">
  <div class="eq-modal">
    <div class="eq-modal-hdr">
      <div class="eq-modal-title" id="eq-modal-title">Nuevo empleado</div>
      <button style="background:none;border:none;color:#666;font-size:18px;cursor:pointer" onclick="eqCloseModal()">‚úï</button>
    </div>
    <div class="eq-modal-body" id="eq-modal-body"></div>
    <div class="eq-modal-footer" id="eq-modal-footer"></div>
  </div>
</div>

<!-- DESPRENDIBLE PRINT ZONE -->
<div class="desprendible-print" id="desprendible-zone"></div>

<div class="fab">
  <button class="btn bvd" onclick="guardar()" style="padding:9px 14px">üíæ Guardar todo</button>
</div>
<div class="toast" id="toast"></div>

<script>
let editMode = false;
let ctr = 1;
const BM = {c:['bc','Cr√≠tico'],p:['bp','Parcial'],f:['bf','Flexible']};

function toggleModo(){
  editMode = !editMode;
  document.body.classList.toggle('ed', editMode);
  document.getElementById('btnModo').classList.toggle('on', editMode);
  document.getElementById('modoLbl').textContent = editMode ? '‚úì Salir de Edici√≥n' : '‚úé Modo Edici√≥n';
  document.getElementById('banner').classList.toggle('on', editMode);
  // toggle contenteditable on all text fields
  const sel = '.etxt,.ibt-t,.sdiv span,.thtxt,.atxt,.dtxt';
  document.querySelectorAll(sel).forEach(el => el.contentEditable = editMode ? 'true' : 'false');
  document.querySelectorAll('.rt .sr td').forEach(td => td.contentEditable = editMode ? 'true' : 'false');
  if(!editMode) guardar();
}

function switchTab(id, btn){
  document.querySelectorAll('.pane').forEach(p => p.classList.remove('on'));
  document.querySelectorAll('.tab').forEach(b => b.classList.remove('on'));
  document.getElementById('pane-' + id).classList.add('on');
  btn.classList.add('on');
}

function togCard(btn){
  const body = btn.closest('.card').querySelector('.cbody');
  const chv  = btn.querySelector('.chv');
  body.classList.toggle('o');
  if(chv) chv.classList.toggle('o');
}

function togCEP(id, btn){
  const p = document.getElementById('cep-' + id);
  const on = p.classList.toggle('o');
  btn.classList.toggle('on', on);
  btn.textContent = on ? '‚úì Cerrar' : '‚öô Configurar cargo';
  if(on){
    const card = document.querySelector('[data-id="'+id+'"]');
    const ins  = p.querySelectorAll('.cep-i');
    if(ins[0]) ins[0].value = card.querySelector('.cico').textContent.trim();
    if(ins[1]) ins[1].value = card.querySelector('.cnom').textContent.trim();
    if(ins[2]) ins[2].value = (card.querySelector('.cdsc')||{}).textContent||'';
  }
}

function setIco(inp,id){ document.querySelector('[data-id="'+id+'"] .cico').textContent = inp.value||'?'; ag(); }
function setNom(inp,id){ document.querySelector('[data-id="'+id+'"] .cnom').textContent = inp.value; ag(); }
function setDsc(inp,id){ const e = document.querySelector('[data-id="'+id+'"] .cdsc'); if(e) e.textContent = inp.value; ag(); }
function setBadge(sel,id){
  const b = document.querySelector('[data-id="'+id+'"] .badge');
  const m = BM[sel.value];
  b.className = 'badge ' + m[0];
  b.textContent = m[1];
  ag();
}

function togDia(chip){ if(!editMode) return; chip.classList.toggle('on'); chip.classList.toggle('off'); ag(); }

function addI(listId, col){
  const list = document.getElementById(listId);
  const d = document.createElement('div');
  d.className = 'eitem';
  d.innerHTML = '<span class="ebul" style="color:'+col+'">‚óÜ</span><span class="etxt" contenteditable="true">Escribe aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button>';
  list.appendChild(d);
  d.querySelector('.etxt').focus();
  ag();
}
function delI(btn){ if(confirm('¬øEliminar este √≠tem?')){ btn.closest('.eitem').remove(); ag(); } }
function delCard(id){
  const card = document.querySelector('[data-id="'+id+'"]');
  if(confirm('¬øEliminar "'+card.querySelector('.cnom').textContent+'"? No se puede deshacer.')){
    card.remove(); guardar(); toast('Eliminado');
  }
}

function togF(id){ document.getElementById(id).classList.toggle('o'); }

function addFn(){
  const n = document.getElementById('afn-n').value.trim();
  if(!n){ alert('Escribe el nombre del cargo'); return; }
  const d = document.getElementById('afn-d').value.trim();
  const i = document.getElementById('afn-i').value.trim() || 'üë§';
  const c = document.getElementById('afn-c').value;
  const id = 'fn'+ctr++;
  const m = BM[c];
  const html = `<div class="card" data-id="${id}">
    <button class="ctog" onclick="togCard(this)">
      <div class="cico">${i}</div>
      <div style="flex:1;min-width:0"><div class="cnom">${n}</div><div class="cdsc">${d}</div></div>
      <span class="badge ${m[0]}">${m[1]}</span><span class="chv">‚ñº</span>
    </button>
    <div class="cbody o" id="cb-${id}">
      <div class="cep" id="cep-${id}">
        <div class="cep-row">
          <div class="cep-g"><label class="cep-l">√çcono</label><input class="cep-i cep-ico" value="${i}" oninput="setIco(this,'${id}')"></div>
          <div class="cep-g" style="flex:1"><label class="cep-l">Nombre</label><input class="cep-i" style="width:100%" value="${n}" oninput="setNom(this,'${id}')"></div>
          <div class="cep-g" style="flex:2"><label class="cep-l">Descripci√≥n</label><input class="cep-i" style="width:100%" value="${d}" oninput="setDsc(this,'${id}')"></div>
          <div class="cep-g"><label class="cep-l">Criticidad</label><select class="cep-sel" onchange="setBadge(this,'${id}')"><option value="c"${c==='c'?' selected':''}>Cr√≠tico</option><option value="p"${c==='p'?' selected':''}>Parcial</option><option value="f"${c==='f'?' selected':''}>Flexible</option></select></div>
        </div>
      </div>
      <div class="ib">
        <div class="ibt ig"><span class="ibt-t" contenteditable="${editMode}">üìÖ D√≠as activos</span></div>
        <div class="dias">
          <span class="dc dlun off" onclick="togDia(this)">Lun</span><span class="dc dmar off" onclick="togDia(this)">Mar</span><span class="dc dmie off" onclick="togDia(this)">Mi√©</span>
          <span class="dc djue on" onclick="togDia(this)">Jue</span><span class="dc dvie on" onclick="togDia(this)">Vie</span>
          <span class="dc dsab on" onclick="togDia(this)">S√°b</span><span class="dc ddom on" onclick="togDia(this)">Dom</span>
        </div>
      </div>
      <div class="ib">
        <div class="ibt ir"><span class="ibt-t" contenteditable="${editMode}">‚öô Funciones principales</span></div>
        <div class="iw" id="iw-${id}a"><div class="eitem"><span class="ebul" style="color:var(--rojo)">‚óÜ</span><span class="etxt" contenteditable="${editMode}">Escribe las funciones aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div></div>
        <button class="add-i" onclick="addI('iw-${id}a','var(--rojo)')">+ agregar funci√≥n</button>
      </div>
      <div class="ib">
        <div class="ibt ig"><span class="ibt-t" contenteditable="${editMode}">‚è∞ Horario y condiciones</span></div>
        <div class="iw" id="iw-${id}b"><div class="eitem"><span class="ebul" style="color:#555">‚óÜ</span><span class="etxt" contenteditable="${editMode}">Horario: completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div></div>
        <button class="add-i" onclick="addI('iw-${id}b','#555')">+ agregar dato</button>
      </div>
      <div class="cact"><button class="btn-cfg" onclick="togCEP('${id}',this)">‚öô Configurar cargo</button><button class="btn-del" onclick="delCard('${id}')">üóë Eliminar cargo</button></div>
    </div>
  </div>`;
  document.getElementById('az-fn').insertAdjacentHTML('beforebegin', html);
  ['afn-n','afn-d','afn-i'].forEach(x => document.getElementById(x).value = '');
  document.getElementById('af-fn').classList.remove('o');
  guardar(); toast('Cargo creado ‚úì');
}

function addPrf(){
  const n = document.getElementById('afp-n').value.trim();
  if(!n){ alert('Escribe el nombre del perfil'); return; }
  const i = document.getElementById('afp-i').value.trim() || 'üë§';
  const c = document.getElementById('afp-c').value;
  const id = 'pn'+ctr++;
  const m = BM[c];
  const secs = [
    ['ir','var(--rojo)','‚ö†Ô∏è Requisitos obligatorios','req','+ agregar requisito'],
    ['ia','var(--am)','‚ú¶ Habilidades t√©cnicas','hab','+ agregar habilidad'],
    ['iv','var(--vd-t)','‚úì Actitud','act','+ agregar actitud'],
    ['ib2','var(--az-t)','‚óà Condiciones','cond','+ agregar condici√≥n'],
  ];
  const bloques = secs.map(s => `<div class="pblk"><div class="ibt ${s[0]}" style="margin-bottom:8px;padding-bottom:6px">${s[2]}</div><div class="iw" id="iw-${id}-${s[3]}"><div class="eitem"><span class="ebul" style="color:${s[1]}">‚óÜ</span><span class="etxt" contenteditable="${editMode}">Completar aqu√≠...</span><button class="deli" onclick="delI(this)">‚úï</button></div></div><button class="add-i" onclick="addI('iw-${id}-${s[3]}','${s[1]}')">${s[4]}</button></div>`).join('');
  const html = `<div class="card" data-id="${id}">
    <button class="ctog" onclick="togCard(this)">
      <div class="cico">${i}</div>
      <div style="flex:1;min-width:0"><div class="cnom">${n}</div><div class="cdsc">Requisitos ¬∑ Habilidades ¬∑ Actitud ¬∑ Condiciones ¬∑ Entrevista</div></div>
      <span class="badge ${m[0]}">${m[1]}</span><span class="chv">‚ñº</span>
    </button>
    <div class="cbody o" id="cb-${id}">
      <div class="cep" id="cep-${id}">
        <div class="cep-row">
          <div class="cep-g"><label class="cep-l">√çcono</label><input class="cep-i cep-ico" value="${i}" oninput="setIco(this,'${id}')"></div>
          <div class="cep-g" style="flex:1"><label class="cep-l">Nombre</label><input class="cep-i" style="width:100%" value="${n}" oninput="setNom(this,'${id}')"></div>
          <div class="cep-g"><label class="cep-l">Criticidad</label><select class="cep-sel" onchange="setBadge(this,'${id}')"><option value="c"${c==='c'?' selected':''}>Cr√≠tico</option><option value="p"${c==='p'?' selected':''}>Parcial</option><option value="f"${c==='f'?' selected':''}>Flexible</option></select></div>
        </div>
      </div>
      <div class="pgrid">${bloques}
        <div class="pblk pfull"><div class="ibt iam" style="margin-bottom:8px;padding-bottom:6px">‚òÖ Preguntas de entrevista</div>
          <div class="iw" id="iw-${id}-preg"><div class="eitem"><span class="ebul" style="color:var(--am)">‚óÜ</span><span class="etxt" contenteditable="${editMode}">Escribe una pregunta clave...</span><button class="deli" onclick="delI(this)">‚úï</button></div></div>
          <button class="add-i" onclick="addI('iw-${id}-preg','var(--am)')">+ agregar pregunta</button>
        </div>
      </div>
      <div class="cact"><button class="btn-cfg" onclick="togCEP('${id}',this)">‚öô Configurar perfil</button><button class="btn-del" onclick="delCard('${id}')">üóë Eliminar perfil</button></div>
    </div>
  </div>`;
  document.getElementById('az-prf').insertAdjacentHTML('beforebegin', html);
  ['afp-n','afp-i'].forEach(x => document.getElementById(x).value = '');
  document.getElementById('af-prf').classList.remove('o');
  guardar(); toast('Perfil creado ‚úì');
}

// RACI ciclo
const CICLO = ['R','A','C','I','X'];
function ciclo(cell){
  if(!editMode) return;
  const cur = cell.className.split(' ').find(c => CICLO.includes(c)) || 'X';
  const next = CICLO[(CICLO.indexOf(cur)+1) % CICLO.length];
  cell.className = 'rc ' + next;
  cell.textContent = next === 'X' ? '‚Äî' : next;
  ag();
}
function addRRow(){
  const cols = document.querySelectorAll('#rtbl thead th').length - 2;
  let cells = '';
  for(let i=0;i<cols;i++) cells += '<td><span class="rc X" onclick="ciclo(this)">&#8212;</span></td>';
  const row = document.createElement('tr');
  const delBtn = '<button class="rdel" onclick="this.parentNode.parentNode.remove();ag()">&#x2715;</button>';
  row.innerHTML = '<td><span class="atxt" contenteditable="true">Nueva actividad...</span></td>' + cells + '<td>' + delBtn + '</td>';
  document.getElementById('rbody').appendChild(row);
  row.querySelector('.atxt').focus();
  ag();
}
function addRSec(){
  const row = document.createElement('tr');
  row.className = 'sr';
  row.innerHTML = '<td colspan="9" contenteditable="true">Nueva secci√≥n...</td>';
  document.getElementById('rbody').appendChild(row);
  row.querySelector('td').focus();
  ag();
}

// GUARDAR / CARGAR
function guardar(){
  try{
    localStorage.setItem('mfb_v5', JSON.stringify({
      fn:   document.getElementById('pane-fn').innerHTML,
      prf:  document.getElementById('pane-prf').innerHTML,
      raci: document.getElementById('pane-raci').innerHTML,
      ts:   Date.now(),
      fileVer: 'v5'
    }));
    toast('‚úì Guardado');
  } catch(e){ toast('‚ö†Ô∏è Error'); }
}
function resetCache(){
  if(confirm('¬øBorrar datos guardados y restaurar el contenido original?')){
    localStorage.removeItem('mfb_v5');
    location.reload();
  }
}
function cargar(){
  try{
    const raw = localStorage.getItem('mfb_v5');
    if(!raw) return;
    const d = JSON.parse(raw);
    // Only restore if saved version matches current file version
    if(d.fileVer !== 'v5') { localStorage.removeItem('mfb_v5'); return; }
    if(d.fn)   document.getElementById('pane-fn').innerHTML   = d.fn;
    if(d.prf)  document.getElementById('pane-prf').innerHTML  = d.prf;
    if(d.raci) document.getElementById('pane-raci').innerHTML = d.raci;
  } catch(e){ console.warn(e); }
}

let _ag;
function ag(){ clearTimeout(_ag); _ag = setTimeout(guardar, 900); }
document.addEventListener('input', e => { if(e.target.matches('[contenteditable="true"],.cep-i,.af-i')) ag(); });

cargar();

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   EXPORT / PRINT SYSTEM
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let expTab = 'fn';

function openExport(){
  buildCargoList();
  document.getElementById('exp-overlay').classList.add('on');
}
function closeExport(){
  document.getElementById('exp-overlay').classList.remove('on');
  clearPrintZone();
}

function setExpTab(tab){
  expTab = tab;
  document.getElementById('etab-fn').classList.toggle('on', tab==='fn');
  document.getElementById('etab-prf').classList.toggle('on', tab==='prf');
  document.getElementById('exp-secs-wrap').style.display = tab==='fn' ? 'block' : 'none';
  document.getElementById('exp-prf-secs-wrap').style.display = tab==='prf' ? 'block' : 'none';
  buildCargoList();
}

function buildCargoList(){
  const pane = expTab === 'fn' ? 'pane-fn' : 'pane-prf';
  const cards = document.querySelectorAll('#' + pane + ' .card');
  const list = document.getElementById('exp-cargo-list');
  list.innerHTML = '';
  cards.forEach(card => {
    const id = card.dataset.id;
    const ico = card.querySelector('.cico').textContent.trim();
    const nom = card.querySelector('.cnom').textContent.trim();
    const badge = card.querySelector('.badge');
    const bc = badge ? badge.className.split(' ')[1] : 'bp';
    const bt = badge ? badge.textContent : '';
    const row = document.createElement('div');
    row.className = 'cargo-check';
    row.innerHTML = '<label class="cc-left" style="cursor:pointer"><input type="checkbox" checked style="accent-color:var(--am)" data-cargo="'+id+'"><span class="cc-ico">'+ico+'</span><span class="cc-name">'+nom+'</span><span class="cc-badge '+bc+'" style="margin-left:6px">'+bt+'</span></label>';
    list.appendChild(row);
  });
}

function toggleAll(){
  const cbs = document.querySelectorAll('#exp-cargo-list input[type=checkbox]');
  const allChecked = [...cbs].every(cb => cb.checked);
  cbs.forEach(cb => cb.checked = !allChecked);
}

function togSub(cb, labelId){
  document.getElementById(labelId).classList.toggle('on', cb.checked);
}

function getSelectedCargos(){
  return [...document.querySelectorAll('#exp-cargo-list input[type=checkbox]')]
    .filter(cb => cb.checked).map(cb => cb.dataset.cargo);
}

function getSelectedSecs(){
  if(expTab === 'fn'){
    return {
      dias: document.querySelector('#sec-dias input').checked,
      func: document.querySelector('#sec-func input').checked,
      hora: document.querySelector('#sec-hora input').checked
    };
  } else {
    return {
      req:  document.querySelector('#psec-req input').checked,
      hab:  document.querySelector('#psec-hab input').checked,
      act:  document.querySelector('#psec-act input').checked,
      con:  document.querySelector('#psec-con input').checked,
      preg: document.querySelector('#psec-preg input').checked
    };
  }
}

function buildPrintContent(){
  const pane = expTab === 'fn' ? 'pane-fn' : 'pane-prf';
  const ids = getSelectedCargos();
  const secs = getSelectedSecs();
  if(ids.length === 0){ alert('Selecciona al menos un cargo'); return null; }

  let html = '';
  ids.forEach(id => {
    const card = document.querySelector('[data-id="'+id+'"]');
    if(!card) return;
    const clone = card.cloneNode(true);

    // Always open cbody
    clone.querySelector('.cbody').classList.add('o');
    clone.querySelector('.chv').classList.add('o');
    // Remove config panel
    const cep = clone.querySelector('.cep');
    if(cep) cep.remove();
    // Remove action buttons
    const cact = clone.querySelector('.cact');
    if(cact) cact.remove();
    // Remove add buttons
    clone.querySelectorAll('.add-i,.deli,.addz').forEach(el => el.remove());

    if(expTab === 'fn'){
      // Filter sections
      const ibs = clone.querySelectorAll('.ib');
      ibs.forEach(ib => {
        const t = (ib.querySelector('.ibt-t')||{}).textContent||'';
        const isDias = t.includes('D√≠as');
        const isHora = t.includes('Horario') || t.includes('condiciones') || t.includes('procedimiento') || t.includes('dato');
        const isFunc = !isDias && !isHora;
        if(isDias && !secs.dias) ib.remove();
        else if(isHora && !secs.hora) ib.remove();
        else if(isFunc && !secs.func) ib.remove();
      });
    } else {
      // Filter profile sections
      const pblks = clone.querySelectorAll('.pblk');
      pblks.forEach(blk => {
        const t = (blk.querySelector('.ibt')||{}).textContent||'';
        const isReq  = t.includes('Requisit');
        const isHab  = t.includes('Habilid');
        const isAct  = t.includes('Actitud');
        const isCon  = t.includes('Condicion') || t.includes('condici');
        const isPreg = t.includes('Preguntas') || t.includes('entrevista');
        if(isReq  && !secs.req)  blk.remove();
        if(isHab  && !secs.hab)  blk.remove();
        if(isAct  && !secs.act)  blk.remove();
        if(isCon  && !secs.con)  blk.remove();
        if(isPreg && !secs.preg) blk.remove();
      });
    }

    html += clone.outerHTML;
  });
  return html;
}

function clearPrintZone(){
  const pz = document.getElementById('print-zone');
  pz.innerHTML = '';
  pz.style.display = 'none';
  pz.classList.remove('print-zone');
}

function doPrint(){
  const content = buildPrintContent();
  if(!content) return;
  const title = expTab === 'fn' ? 'Central de Personal RB' : 'Perfiles de Cargo';
  const pz = document.getElementById('print-zone');
  document.getElementById('print-doc-title').textContent = title;
  document.getElementById('print-date').textContent = 'Impreso el ' + new Date().toLocaleDateString('es-CO', {day:'2-digit',month:'long',year:'numeric'});
  pz.innerHTML = content;
  pz.style.display = 'block';
  pz.classList.add('print-zone');
  closeExport();
  setTimeout(() => {
    window.print();
    setTimeout(clearPrintZone, 500);
  }, 200);
}

function doWord(){
  const content = buildPrintContent();
  if(!content) return;
  const title = expTab === 'fn' ? 'Central de Personal RB ‚Äî El Rinc√≥n del Barril' : 'Perfiles de Cargo ‚Äî El Rinc√≥n del Barril';
  const fecha = new Date().toLocaleDateString('es-CO', {day:'2-digit',month:'long',year:'numeric'});

  // Build clean Word-compatible HTML
  const wordHtml = `<html xmlns:o='urn:schemas-microsoft-com:office:office'
    xmlns:w='urn:schemas-microsoft-com:office:word'
    xmlns='http://www.w3.org/TR/REC-html40'>
<head><meta charset='utf-8'>
<title>${title}</title>
<style>
  body{font-family:Arial,sans-serif;font-size:11pt;color:#111;margin:2cm}
  h1{font-size:18pt;color:#D01920;border-bottom:2px solid #D01920;padding-bottom:4pt;margin-bottom:12pt}
  h2{font-size:14pt;color:#8B0D12;margin-top:16pt;margin-bottom:6pt}
  h3{font-size:11pt;color:#555;font-weight:bold;margin-top:10pt;margin-bottom:4pt;text-transform:uppercase;letter-spacing:1pt;font-size:9pt}
  .cargo-titulo{font-size:16pt;font-weight:bold;color:#111;margin:0 0 3pt 0}
  .cargo-desc{font-size:9pt;color:#666;margin:0 0 8pt 0}
  .badge{display:inline-block;padding:2pt 6pt;font-size:8pt;font-weight:bold;border:1pt solid #999;border-radius:2pt;margin-left:8pt}
  .bc{background:#FFEEEE;color:#8B0D12;border-color:#D01920}
  .bp{background:#FFF3E0;color:#8B4500;border-color:#D4890A}
  .bf{background:#E8F5E9;color:#2E7D32;border-color:#3A7A30}
  ul{margin:4pt 0 8pt 18pt;padding:0}
  li{margin:2pt 0;font-size:10.5pt;color:#333}
  .dia-chip{display:inline-block;padding:1pt 6pt;margin:1pt;font-size:9pt;border:1pt solid #ccc;border-radius:2pt;background:#f5f5f5}
  .dia-off{opacity:.3}
  .sec-block{margin:10pt 0}
  hr.sec{border:none;border-top:1pt solid #ddd;margin:12pt 0}
  .grid2{display:table;width:100%}
  .grid-col{display:table-cell;width:50%;vertical-align:top;padding-right:12pt}
  .doc-footer{font-size:8pt;color:#aaa;border-top:1pt solid #ddd;padding-top:6pt;margin-top:24pt}
</style></head><body>
<h1>${title}</h1>
<p style="font-size:9pt;color:#999">Generado el ${fecha}</p>
${wordifyContent(content)}
<div class="doc-footer">El Rinc√≥n del Barril ¬∑ C√∫cuta ¬∑ Documento interno</div>
</body></html>`;

  const blob = new Blob([wordHtml], {type: 'application/msword'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = (expTab === 'fn' ? 'Manual_Funciones' : 'Perfiles_Cargo') + '_RinconDelBarril.doc';
  a.click();
  setTimeout(() => URL.revokeObjectURL(url), 1000);
  closeExport();
  toast('‚úì Archivo Word descargado');
}

function wordifyContent(rawHtml){
  // Convert the dark-themed HTML to clean Word content
  const tmp = document.createElement('div');
  tmp.innerHTML = rawHtml;
  let out = '';
  tmp.querySelectorAll('.card').forEach(card => {
    const ico = card.querySelector('.cico').textContent.trim();
    const nom = card.querySelector('.cnom').textContent.trim();
    const dsc = (card.querySelector('.cdsc')||{}).textContent||'';
    const badge = card.querySelector('.badge');
    const bc = badge ? badge.className.split(' ')[1] : 'bp';
    const bt = badge ? badge.textContent : '';
    out += '<hr class="sec">';
    out += '<p><span class="cargo-titulo">'+ico+' '+nom+'</span><span class="badge '+bc+'">'+bt+'</span></p>';
    if(dsc) out += '<p class="cargo-desc">'+dsc+'</p>';

    // D√≠as activos
    const dias = card.querySelectorAll('.dc');
    if(dias.length){
      out += '<h3>D√≠as activos</h3><p>';
      dias.forEach(d => {
        const cls = d.classList.contains('off') ? ' dia-off' : '';
        out += '<span class="dia-chip'+cls+'">'+d.textContent.trim()+'</span> ';
      });
      out += '</p>';
    }

    // Inner blocks (functions, conditions, profile sections)
    const ibs = card.querySelectorAll('.ib, .pblk');
    ibs.forEach(ib => {
      const t = (ib.querySelector('.ibt-t, .ibt')||{}).textContent||'';
      if(!t) return;
      out += '<h3>'+t+'</h3><ul>';
      ib.querySelectorAll('.etxt').forEach(el => {
        const txt = el.textContent.trim();
        if(txt && !txt.includes('completar aqu√≠')) out += '<li>'+txt+'</li>';
      });
      out += '</ul>';
    });
  });
  return out || '<p>Sin contenido seleccionado.</p>';
}


/* ‚îÄ‚îÄ TOAST HELPER ‚îÄ‚îÄ */
function toast(msg){
  const t = document.getElementById('toast');
  if(!t) return;
  t.textContent = msg;
  t.classList.add('visible');
  clearTimeout(toast._t);
  toast._t = setTimeout(() => t.classList.remove('visible'), 2800);
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   M√ìDULO EQUIPO ‚Äî Expediente Digital Empleados
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

const EQ_KEY = 'mfb_equipo_v1';
let eqData = { empleados: [] };
let eqFilterState = 'activo';
let eqSearchVal = '';
let eqModalCb = null;

// ‚îÄ‚îÄ CARGO COLORS ‚îÄ‚îÄ
const CARGO_COLORS = {
  'Cocinero Principal': '#8B0D12',
  'Auxiliar de Cocina': '#5A3A00',
  'Cajero / Sala': '#0A3A6A',
  'Mesero': '#1A3A0A',
  'Bartender': '#1A003A',
  'Encargado Bodega': '#3A2A00',
};
function eqColor(cargo){ return CARGO_COLORS[cargo] || '#333'; }
function eqInitials(nombre){ return nombre.split(' ').map(w=>w[0]).join('').slice(0,2).toUpperCase(); }

// ‚îÄ‚îÄ LOAD / SAVE ‚îÄ‚îÄ
function eqLoad(){
  try{
    const raw = localStorage.getItem(EQ_KEY);
    if(raw){ eqData = JSON.parse(raw); }
  } catch(e){}
}
function eqSave(){
  try{ localStorage.setItem(EQ_KEY, JSON.stringify(eqData)); } catch(e){ toast('‚ö† No se pudo guardar'); }
}

// ‚îÄ‚îÄ RENDER LIST ‚îÄ‚îÄ
function eqRender(){
  const list = document.getElementById('eq-list');
  let emps = eqData.empleados || [];
  if(eqFilterState !== 'todos'){
    emps = emps.filter(e => eqFilterState === 'archivado' ? e.estado === 'archivado' : e.estado !== 'archivado');
  }
  if(eqSearchVal){ emps = emps.filter(e => (e.nombre+e.cargo).toLowerCase().includes(eqSearchVal.toLowerCase())); }
  if(!emps.length){
    list.innerHTML = '<div class="eq-empty"><div class="eq-empty-ico">üë•</div><div class="eq-empty-t">Sin empleados</div><div class="eq-empty-s">'+
      (eqSearchVal ? 'No hay resultados para "'+eqSearchVal+'"' : 'Haz clic en "+ Nuevo empleado" para agregar')+
      '</div></div>';
    return;
  }
  list.innerHTML = emps.map(e => eqCardHTML(e)).join('');
}

function eqCardHTML(e){
  const pct = eqCompletionPct(e);
  const color = eqColor(e.cargo);
  const estClass = e.estado === 'activo' ? 'es-activo' : e.estado === 'inactivo' ? 'es-inactivo' : 'es-archivado';
  const estLabel = e.estado === 'activo' ? 'Activo' : e.estado === 'inactivo' ? 'Inactivo' : 'Archivado';
  return `<div class="eq-card ${e.estado === 'archivado' ? 'archivado' : ''}" id="eqc-${e.id}">
    <div class="eq-card-hdr" onclick="eqToggleCard('${e.id}')">
      <div class="eq-avatar" style="background:${color}">${eqInitials(e.nombre)}</div>
      <div class="eq-info">
        <div class="eq-nombre">${e.nombre}</div>
        <div class="eq-cargo-tag">${e.cargo} ¬∑ Ingreso: ${e.fechaIngreso||'‚Äî'}</div>
        <div class="prog-bar" style="margin-top:4px"><div class="prog-fill" style="width:${pct}%"></div></div>
      </div>
      <div class="eq-meta">
        <span class="eq-estado ${estClass}">${estLabel}</span>
        <span class="eq-chv" id="eqchv-${e.id}">‚ñº</span>
      </div>
    </div>
    <div class="eq-body" id="eqb-${e.id}">
      <div class="eq-tabs" id="eqtabs-${e.id}">
        <div class="eq-tab on" onclick="eqSwitchTab('${e.id}','datos',this)">üìã Datos</div>
        <div class="eq-tab" onclick="eqSwitchTab('${e.id}','docs',this)">üìÑ Documentos</div>
        <div class="eq-tab" onclick="eqSwitchTab('${e.id}','dotacion',this)">üëï Dotaci√≥n</div>
        <div class="eq-tab" onclick="eqSwitchTab('${e.id}','induccion',this)">üéØ Inducci√≥n</div>
        <div class="eq-tab" onclick="eqSwitchTab('${e.id}','capacitaciones',this)">üìö Capacitaciones</div>
        <div class="eq-tab" onclick="eqSwitchTab('${e.id}','pagos',this)">üí∞ Pagos</div>
        <div class="eq-tab" onclick="eqSwitchTab('${e.id}','disciplinario',this)" ${!editMode?'style="display:none"':''}>‚ö† Disciplinario</div>
        <div class="eq-tab" onclick="eqSwitchTab('${e.id}','evaluaciones',this)">‚≠ê Evaluaciones</div>
        <div class="eq-tab" onclick="eqSwitchTab('${e.id}','novedades',this)">üìå Novedades</div>
      </div>
      <div id="eqpane-${e.id}-datos" class="eq-pane on">${eqPaneDatos(e)}</div>
      <div id="eqpane-${e.id}-docs" class="eq-pane">${eqPaneDocs(e)}</div>
      <div id="eqpane-${e.id}-dotacion" class="eq-pane">${eqPaneDotacion(e)}</div>
      <div id="eqpane-${e.id}-induccion" class="eq-pane">${eqPaneInduccion(e)}</div>
      <div id="eqpane-${e.id}-capacitaciones" class="eq-pane">${eqPaneCapacitaciones(e)}</div>
      <div id="eqpane-${e.id}-pagos" class="eq-pane">${eqPanePagos(e)}</div>
      <div id="eqpane-${e.id}-disciplinario" class="eq-pane">${eqPaneDisciplinario(e)}</div>
      <div id="eqpane-${e.id}-evaluaciones" class="eq-pane">${eqPaneEvaluaciones(e)}</div>
      <div id="eqpane-${e.id}-novedades" class="eq-pane">${eqPaneNovedades(e)}</div>
    </div>
  </div>`;
}

// ‚îÄ‚îÄ TOGGLE CARD ‚îÄ‚îÄ
function eqToggleCard(id){
  const body = document.getElementById('eqb-'+id);
  const chv = document.getElementById('eqchv-'+id);
  if(!body) return;
  body.classList.toggle('o');
  chv.classList.toggle('o');
}

// ‚îÄ‚îÄ SWITCH TAB INSIDE CARD ‚îÄ‚îÄ
function eqSwitchTab(eid, tab, btn){
  const tabs = document.querySelectorAll('#eqtabs-'+eid+' .eq-tab');
  tabs.forEach(t => t.classList.remove('on'));
  btn.classList.add('on');
  const panes = document.querySelectorAll('[id^="eqpane-'+eid+'-"]');
  panes.forEach(p => p.classList.remove('on'));
  const target = document.getElementById('eqpane-'+eid+'-'+tab);
  if(target) target.classList.add('on');
}

// ‚îÄ‚îÄ COMPLETION % ‚îÄ‚îÄ
function eqCompletionPct(e){
  let total = 0, done = 0;
  const docs = e.docs || {};
  const dkeys = ['contrato','reglamento','autorizacion','certManip','examenMed'];
  dkeys.forEach(k => { total++; if(docs[k] && docs[k].ok) done++; });
  const ind = e.induccion || [];
  ind.forEach(i => { total++; if(i.ok) done++; });
  return total ? Math.round(done/total*100) : 0;
}

// ‚îÄ‚îÄ PANE: DATOS ‚îÄ‚îÄ
function eqPaneDatos(e){
  const editBtn = editMode ? `
    <button class="rec-btn rb-edit" onclick="eqEditarDatos('${e.id}')">‚úè Editar datos</button>
    <button class="rec-btn rb-del" onclick="eqArchivar('${e.id}')">${e.estado==='archivado'?'‚Ü© Restaurar':'üìÅ Archivar'}</button>
    <button class="rec-btn rb-del" style="background:rgba(139,13,18,.4)" onclick="eqEliminar('${e.id}')">üóë Eliminar</button>` : '';
  return `<div class="eq-grid2">
    <div class="eq-field"><div class="eq-label">Nombre completo</div><div class="eq-val">${e.nombre||'‚Äî'}</div></div>
    <div class="eq-field"><div class="eq-label">Cargo</div><div class="eq-val">${e.cargo||'‚Äî'}</div></div>
    <div class="eq-field"><div class="eq-label">Fecha de ingreso</div><div class="eq-val">${e.fechaIngreso||'‚Äî'}</div></div>
    <div class="eq-field"><div class="eq-label">Tipo de contrato</div><div class="eq-val">${e.tipoContrato||'‚Äî'}</div></div>
    <div class="eq-field"><div class="eq-label">Per√≠odo de prueba hasta</div><div class="eq-val">${e.prueba||'‚Äî'}</div></div>
    <div class="eq-field"><div class="eq-label">Estado</div><div class="eq-val">${e.estado||'activo'}</div></div>
    <div class="eq-field"><div class="eq-label">Salario base pactado</div><div class="eq-val">${e.salario||'‚Äî'}</div></div>
    <div class="eq-field"><div class="eq-label">Forma de pago</div><div class="eq-val">${e.formaPago||'‚Äî'}</div></div>
    <div class="eq-field" style="grid-column:1/-1"><div class="eq-label">Observaciones</div><div class="eq-val">${e.obsGeneral||'‚Äî'}</div></div>
  </div>
  ${editBtn ? '<div class="rec-actions">'+editBtn+'</div>' : ''}`;
}

// ‚îÄ‚îÄ PANE: DOCUMENTOS ‚îÄ‚îÄ
function eqPaneDocs(e){
  const docs = e.docs || {};
  const items = [
    { k:'contrato', label:'Contrato de trabajo firmado' },
    { k:'reglamento', label:'Reglamento interno recibido' },
    { k:'autorizacion', label:'Autorizaci√≥n tratamiento de datos (Ley 1581)' },
    { k:'certManip', label:'Certificado manipulaci√≥n de alimentos vigente' },
    { k:'examenMed', label:'Examen m√©dico de ingreso' },
    { k:'afpEps', label:'Afiliaci√≥n a EPS y pensi√≥n' },
    { k:'arl', label:'Afiliaci√≥n a ARL' },
  ];
  const rows = items.map(it => {
    const d = docs[it.k] || { ok:false, fecha:'' };
    const ck = d.ok ? 'on' : '';
    const editCk = editMode ? `onclick="eqToggleDoc('${e.id}','${it.k}')"` : '';
    return `<div class="ck-item">
      <div class="ck-box ${ck}" ${editCk}>${d.ok?'‚úì':''}</div>
      <div class="ck-text">${it.label}</div>
      <div class="ck-fecha">${d.fecha||'‚Äî'}</div>
      ${editMode && d.ok ? `<input type="date" class="eq-input" style="width:130px;padding:2px 6px" value="${d.fecha}" onchange="eqSetDocFecha('${e.id}','${it.k}',this.value)">` : ''}
    </div>`;
  }).join('');
  return `<div class="eq-sec"><div class="eq-sec-title">Checklist de documentaci√≥n</div>${rows}</div>`;
}

function eqToggleDoc(eid, key){
  const e = eqGetEmp(eid);
  if(!e) return;
  if(!e.docs) e.docs = {};
  if(!e.docs[key]) e.docs[key] = { ok:false, fecha:'' };
  e.docs[key].ok = !e.docs[key].ok;
  if(e.docs[key].ok && !e.docs[key].fecha) e.docs[key].fecha = new Date().toISOString().slice(0,10);
  eqSave(); eqRefreshCard(eid);
}
function eqSetDocFecha(eid, key, val){
  const e = eqGetEmp(eid);
  if(!e || !e.docs || !e.docs[key]) return;
  e.docs[key].fecha = val;
  eqSave();
}

// ‚îÄ‚îÄ PANE: DOTACI√ìN ‚îÄ‚îÄ
function eqPaneDotacion(e){
  const dot = e.dotacion || [{},{},{}];
  const meses = ['Abr','Ago','Dic'];
  const fechas_limite = ['30/04','31/08','20/12'];
  const rows = [0,1,2].map(i => {
    const d = dot[i] || {};
    return `<div class="rec-item">
      <div class="rec-top">
        <div class="rec-titulo">Entrega ${i+1} ‚Äî antes ${fechas_limite[i]}</div>
        <span class="eq-estado ${d.firmado?'es-activo':'es-inactivo'}">${d.firmado?'Firmada':'Pendiente'}</span>
      </div>
      <div class="eq-grid3" style="margin-bottom:6px">
        <div class="eq-field"><div class="eq-label">Fecha entrega</div><div class="eq-val">${d.fecha||'‚Äî'}</div></div>
        <div class="eq-field"><div class="eq-label">Talla camisa</div><div class="eq-val">${d.tallaCamisa||'‚Äî'}</div></div>
        <div class="eq-field"><div class="eq-label">Talla pantal√≥n</div><div class="eq-val">${d.tallaPant||'‚Äî'}</div></div>
      </div>
      <div class="eq-field"><div class="eq-label">√çtems entregados</div><div class="eq-val">${d.items||'‚Äî'}</div></div>
      ${editMode ? `<div class="rec-actions">
        <button class="rec-btn rb-edit" onclick="eqEditDotacion('${e.id}',${i})">‚úè Editar</button>
        <button class="rec-btn rb-ok ${d.firmado?'':'rb-edit'}" onclick="eqToggleDotFirma('${e.id}',${i})">${d.firmado?'‚úì Firmada':'Marcar firmada'}</button>
        <button class="rec-btn rb-print" onclick="eqImprimirDotacion('${e.id}',${i})">üñ® Imprimir acta</button>
      </div>` : `<div class="rec-actions"><button class="rec-btn rb-print" onclick="eqImprimirDotacion('${e.id}',${i})">üñ® Imprimir acta</button></div>`}
    </div>`;
  }).join('');
  return `<div class="eq-sec"><div class="eq-sec-title">Entregas de dotaci√≥n 2026 (Art. 230 CST)</div>${rows}</div>`;
}

function eqToggleDotFirma(eid, idx){
  const e = eqGetEmp(eid);
  if(!e) return;
  if(!e.dotacion) e.dotacion = [{},{},{}];
  if(!e.dotacion[idx]) e.dotacion[idx] = {};
  e.dotacion[idx].firmado = !e.dotacion[idx].firmado;
  eqSave(); eqRefreshCard(eid);
}

// ‚îÄ‚îÄ PANE: INDUCCI√ìN ‚îÄ‚îÄ
function eqPaneInduccion(e){
  const modules = [
    'üî• La empresa ‚Äî prop√≥sito, visi√≥n, sue√±o y valores del restaurante',
    'ü§ù Cultura del equipo ‚Äî l√≠mites, ambiente laboral y trabajo en equipo',
    'üìã Reglamento interno ‚Äî normas, puntualidad y escala disciplinaria',
    'üë§ Rol y funciones del cargo ‚Äî RACI y responsabilidades diarias',
    'üç≥ Alistamiento y mise en place ‚Äî apertura y preparaci√≥n del turno',
    'üòä Protocolo de servicio al cliente ‚Äî lenguaje, actitud y propina',
    '‚öñÔ∏è Porciones, estandarizaci√≥n y recetario oficial',
    'üì¶ Inventarios, control de recursos y econom√≠a del restaurante',
    'üíª Sistemas digitales ‚Äî Cocina v3.0, Bar, Wahio, Dep√≥sito',
    'üßº BPM, higiene personal e INVIMA ‚Äî trampa moscas y tapabocas',
    'üîí Cierre, limpieza y cultura de orden',
    '‚úÖ Evaluaci√≥n final de inducci√≥n'
  ];
  if(!e.induccion) e.induccion = modules.map(m => ({ m, ok:false, fecha:'' }));
  const rows = e.induccion.map((item, i) => {
    const ck = item.ok ? 'on' : '';
    const editCk = editMode ? `onclick="eqToggleInd('${e.id}',${i})"` : '';
    return `<div class="ck-item">
      <div class="ck-box ${ck}" ${editCk}>${item.ok?'‚úì':''}</div>
      <div class="ck-text">${item.m || modules[i] || 'M√≥dulo '+(i+1)}</div>
      <div class="ck-fecha">${item.fecha||'‚Äî'}</div>
    </div>`;
  }).join('');
  const pct = e.induccion.filter(i=>i.ok).length;
  return `<div class="eq-sec">
    <div class="eq-sec-title">M√≥dulos de inducci√≥n (${pct}/${e.induccion.length} completados)</div>
    <div class="prog-bar" style="margin-bottom:10px"><div class="prog-fill" style="width:${Math.round(pct/e.induccion.length*100)}%"></div></div>
    ${rows}
    ${editMode ? `<button class="add-rec" onclick="eqAddIndModulo('${e.id}')">+ Agregar m√≥dulo</button>` : ''}
  </div>`;
}

function eqToggleInd(eid, idx){
  const e = eqGetEmp(eid);
  if(!e || !e.induccion) return;
  e.induccion[idx].ok = !e.induccion[idx].ok;
  if(e.induccion[idx].ok && !e.induccion[idx].fecha) e.induccion[idx].fecha = new Date().toISOString().slice(0,10);
  eqSave(); eqRefreshCard(eid);
}

// ‚îÄ‚îÄ PANE: CAPACITACIONES ‚îÄ‚îÄ
function eqPaneCapacitaciones(e){
  const caps = e.capacitaciones || [];
  if(!caps.length) return `<div class="eq-empty" style="padding:20px"><div class="eq-empty-t" style="font-size:16px">Sin capacitaciones registradas</div></div>${editMode?'<button class="add-rec" onclick="eqAddCap(\''+e.id+'\')">+ Registrar capacitaci√≥n</button>':''}`;
  const rows = caps.map((c,i) => `<div class="rec-item">
    <div class="rec-top">
      <div class="rec-titulo">${c.tema||'Sin t√≠tulo'}</div>
      <div class="rec-fecha">${c.fecha||'‚Äî'}</div>
    </div>
    <div class="rec-body">
      <b>Dictada por:</b> ${c.dictadoPor||'‚Äî'} &nbsp;¬∑&nbsp; <b>Duraci√≥n:</b> ${c.duracion||'‚Äî'}<br>
      ${c.obs ? '<b>Obs:</b> '+c.obs : ''}
    </div>
    <div class="rec-actions">
      <span class="eq-estado ${c.firmado?'es-activo':'es-inactivo'}" style="font-size:9px">${c.firmado?'‚úì Firma asistencia':'Sin firma'}</span>
      ${editMode ? `<button class="rec-btn rb-ok" onclick="eqToggleCapFirma('${e.id}',${i})">${c.firmado?'Quitar firma':'Marcar firmada'}</button>
      <button class="rec-btn rb-edit" onclick="eqEditCap('${e.id}',${i})">‚úè Editar</button>
      <button class="rec-btn rb-del" onclick="eqDelCap('${e.id}',${i})">‚úï Eliminar</button>` : ''}
    </div>
  </div>`).join('');
  return `<div class="eq-sec"><div class="eq-sec-title">Historial de capacitaciones (${caps.length})</div>${rows}</div>
    ${editMode ? `<button class="add-rec" onclick="eqAddCap('${e.id}')">+ Registrar capacitaci√≥n</button>` : ''}`;
}

function eqToggleCapFirma(eid, idx){
  const e = eqGetEmp(eid);
  if(!e || !e.capacitaciones) return;
  e.capacitaciones[idx].firmado = !e.capacitaciones[idx].firmado;
  eqSave(); eqRefreshCard(eid);
}
function eqDelCap(eid, idx){
  const e = eqGetEmp(eid);
  if(!e || !confirm('¬øEliminar esta capacitaci√≥n?')) return;
  e.capacitaciones.splice(idx,1);
  eqSave(); eqRefreshCard(eid);
}

// ‚îÄ‚îÄ PANE: PAGOS ‚îÄ‚îÄ
function eqPanePagos(e){
  const pagos = e.pagos || [];
  const total = pagos.reduce((s,p)=>s+(parseFloat(p.totalNeto)||0),0);
  let html = '';
  if(total > 0) html += `<div class="eq-total-badge"><div class="etb-label">Total pagado (hist√≥rico)</div><div class="etb-val">$${total.toLocaleString('es-CO')}</div></div>`;
  if(!pagos.length){
    html += `<div class="eq-empty" style="padding:20px"><div class="eq-empty-t" style="font-size:16px">Sin pagos registrados</div></div>`;
  } else {
    html += pagos.map((p,i) => {
      const ded = (parseFloat(p.dedSalud)||0)+(parseFloat(p.dedPension)||0)+(parseFloat(p.dedOtras)||0);
      const devengado = (parseFloat(p.salarioBase)||0)+(parseFloat(p.recNocturno)||0)+(parseFloat(p.recDominical)||0)+(parseFloat(p.horasExtra)||0)+(parseFloat(p.auxTransporte)||0)+(parseFloat(p.otros)||0);
      return `<div class="rec-item">
        <div class="rec-top">
          <div class="rec-titulo">${p.periodo||'Per√≠odo sin definir'}</div>
          <div class="rec-fecha">${p.fechaPago||'‚Äî'}</div>
        </div>
        <div class="pago-chips">
          <span class="p-chip pc-b">Base: $${(parseFloat(p.salarioBase)||0).toLocaleString('es-CO')}</span>
          ${p.auxTransporte?`<span class="p-chip pc-b">Aux.Transp: $${(parseFloat(p.auxTransporte)||0).toLocaleString('es-CO')}</span>`:''}
          ${p.recNocturno?`<span class="p-chip pc-r">Noct: $${(parseFloat(p.recNocturno)||0).toLocaleString('es-CO')}</span>`:''}
          ${p.recDominical?`<span class="p-chip pc-r">Dom: $${(parseFloat(p.recDominical)||0).toLocaleString('es-CO')}</span>`:''}
          ${p.horasExtra?`<span class="p-chip pc-r">HE: $${(parseFloat(p.horasExtra)||0).toLocaleString('es-CO')}</span>`:''}
          ${p.otros?`<span class="p-chip pc-r">Otros: $${(parseFloat(p.otros)||0).toLocaleString('es-CO')}</span>`:''}
          ${ded?`<span class="p-chip pc-d">Ded: -$${ded.toLocaleString('es-CO')}</span>`:''}
          <span class="p-chip pc-t">NETO: $${(parseFloat(p.totalNeto)||0).toLocaleString('es-CO')}</span>
        </div>
        <div class="rec-body" style="margin-top:6px">
          <b>M√©todo:</b> ${p.metodo||'‚Äî'} &nbsp;¬∑&nbsp; ${p.obs||''}
        </div>
        <div class="rec-actions">
          ${editMode?`<button class="rec-btn rb-edit" onclick="eqEditPago('${e.id}',${i})">‚úè Editar</button>
          <button class="rec-btn rb-del" onclick="eqDelPago('${e.id}',${i})">‚úï Eliminar</button>`:''}
          <button class="rec-btn rb-print" onclick="eqImprimirDesprendible('${e.id}',${i})">üñ® Desprendible</button>
        </div>
      </div>`;
    }).join('');
  }
  html += editMode ? `<button class="add-rec" onclick="eqAddPago('${e.id}')">+ Registrar pago</button>` : '';
  return `<div class="eq-sec"><div class="eq-sec-title">Historial de pagos</div>${html}</div>`;
}
function eqDelPago(eid,idx){
  const e=eqGetEmp(eid); if(!e||!confirm('¬øEliminar este registro de pago?'))return;
  e.pagos.splice(idx,1); eqSave(); eqRefreshCard(eid);
}

// ‚îÄ‚îÄ PANE: DISCIPLINARIO ‚îÄ‚îÄ
function eqPaneDisciplinario(e){
  if(!editMode) return '<div style="padding:14px;color:#555;font-size:12px">Solo visible en modo administrador.</div>';
  const disc = e.disciplinario || [];
  let html = disc.length ? disc.map((d,i)=>`<div class="rec-item">
    <div class="rec-top"><div class="rec-titulo">${d.tipo||'‚Äî'}</div><div class="rec-fecha">${d.fecha||'‚Äî'}</div></div>
    <div class="rec-body">${d.descripcion||'‚Äî'}</div>
    <div class="rec-actions">
      <span class="eq-estado ${d.firmoDescargo?'es-activo':'es-inactivo'}" style="font-size:9px">${d.firmoDescargo?'‚úì Firm√≥ descargo':'Sin descargo'}</span>
      <button class="rec-btn rb-ok" onclick="eqToggleDescargo('${e.id}',${i})">${d.firmoDescargo?'Quitar firma':'Marcar firmado'}</button>
      <button class="rec-btn rb-edit" onclick="eqEditDisc('${e.id}',${i})">‚úè Editar</button>
      <button class="rec-btn rb-del" onclick="eqDelDisc('${e.id}',${i})">‚úï Eliminar</button>
    </div>
  </div>`).join('') : '<div class="eq-empty" style="padding:20px"><div class="eq-empty-t" style="font-size:16px">Sin registros disciplinarios</div></div>';
  return `<div class="eq-sec"><div class="eq-sec-title">Seguimiento disciplinario (confidencial)</div>${html}
    <button class="add-rec" onclick="eqAddDisc('${e.id}')">+ Registrar novedad disciplinaria</button></div>`;
}
function eqToggleDescargo(eid,idx){const e=eqGetEmp(eid);if(!e||!e.disciplinario)return;e.disciplinario[idx].firmoDescargo=!e.disciplinario[idx].firmoDescargo;eqSave();eqRefreshCard(eid);}
function eqDelDisc(eid,idx){const e=eqGetEmp(eid);if(!e||!confirm('¬øEliminar?'))return;e.disciplinario.splice(idx,1);eqSave();eqRefreshCard(eid);}

// ‚îÄ‚îÄ PANE: EVALUACIONES ‚îÄ‚îÄ
function eqPaneEvaluaciones(e){
  const evals = e.evaluaciones || [];
  let html = evals.length ? evals.map((ev,i)=>{
    const areas = [{k:'puntualidad',l:'Puntualidad'},{k:'calidad',l:'Calidad'},{k:'actitud',l:'Actitud'},{k:'sistemas',l:'Sistemas'},{k:'trabajo_equipo',l:'Trabajo en equipo'}];
    const prom = areas.reduce((s,a)=>s+(parseInt(ev[a.k])||3),0)/areas.length;
    return `<div class="rec-item">
      <div class="rec-top"><div class="rec-titulo">Evaluaci√≥n ${ev.periodo||'‚Äî'}</div><div class="rec-fecha">${ev.fecha||'‚Äî'}</div></div>
      ${areas.map(a=>`<div style="display:flex;align-items:center;gap:8px;margin:3px 0">
        <div style="font-size:11px;color:#888;width:130px;font-family:'Barlow Condensed',sans-serif;text-transform:uppercase;letter-spacing:.5px">${a.l}</div>
        <div class="eval-stars">${[1,2,3,4,5].map(n=>`<span class="star ${(parseInt(ev[a.k])||3)>=n?'on':''}">‚òÖ</span>`).join('')}</div>
        <div style="font-size:11px;color:#666">${ev[a.k]||3}/5</div>
      </div>`).join('')}
      <div style="margin-top:6px;font-size:11px;color:var(--am)">Promedio: ${prom.toFixed(1)}/5</div>
      ${ev.obs?`<div class="rec-body" style="margin-top:4px">${ev.obs}</div>`:''}
      ${editMode?`<div class="rec-actions">
        <button class="rec-btn rb-edit" onclick="eqEditEval('${e.id}',${i})">‚úè Editar</button>
        <button class="rec-btn rb-del" onclick="eqDelEval('${e.id}',${i})">‚úï Eliminar</button>
      </div>`:''}
    </div>`;
  }).join('') : '<div class="eq-empty" style="padding:20px"><div class="eq-empty-t" style="font-size:16px">Sin evaluaciones</div></div>';
  return `<div class="eq-sec"><div class="eq-sec-title">Evaluaciones de desempe√±o</div>${html}
    ${editMode?`<button class="add-rec" onclick="eqAddEval('${e.id}')">+ Nueva evaluaci√≥n</button>`:''}
  </div>`;
}
function eqDelEval(eid,idx){const e=eqGetEmp(eid);if(!e||!confirm('¬øEliminar?'))return;e.evaluaciones.splice(idx,1);eqSave();eqRefreshCard(eid);}

// ‚îÄ‚îÄ PANE: NOVEDADES ‚îÄ‚îÄ
function eqPaneNovedades(e){
  const nov = e.novedades || [];
  let html = nov.length ? nov.map((n,i)=>`<div class="rec-item">
    <div class="rec-top"><div class="rec-titulo">${n.tipo||'Novedad'}</div><div class="rec-fecha">${n.fecha||'‚Äî'}</div></div>
    <div class="rec-body">${n.descripcion||'‚Äî'}${n.dias?' ¬∑ '+n.dias+' d√≠as':''}</div>
    ${editMode?`<div class="rec-actions">
      <button class="rec-btn rb-edit" onclick="eqEditNov('${e.id}',${i})">‚úè Editar</button>
      <button class="rec-btn rb-del" onclick="eqDelNov('${e.id}',${i})">‚úï Eliminar</button>
    </div>`:''}
  </div>`).join('') : '<div class="eq-empty" style="padding:20px"><div class="eq-empty-t" style="font-size:16px">Sin novedades</div></div>';
  return `<div class="eq-sec"><div class="eq-sec-title">Novedades laborales</div>${html}
    ${editMode?`<button class="add-rec" onclick="eqAddNov('${e.id}')">+ Registrar novedad</button>`:''}
  </div>`;
}
function eqDelNov(eid,idx){const e=eqGetEmp(eid);if(!e||!confirm('¬øEliminar?'))return;e.novedades.splice(idx,1);eqSave();eqRefreshCard(eid);}

// ‚îÄ‚îÄ HELPERS ‚îÄ‚îÄ
function eqGetEmp(id){ return (eqData.empleados||[]).find(e=>e.id===id); }
function eqUID(){ return 'e'+Date.now().toString(36); }
function eqRefreshCard(id){
  const card = document.getElementById('eqc-'+id);
  if(!card) return;
  const e = eqGetEmp(id);
  if(!e) return;
  const wasOpen = document.getElementById('eqb-'+id).classList.contains('o');
  const activeTab = document.querySelector('#eqtabs-'+id+' .eq-tab.on');
  const activeTabIdx = activeTab ? [...document.querySelectorAll('#eqtabs-'+id+' .eq-tab')].indexOf(activeTab) : 0;
  card.outerHTML = eqCardHTML(e);
  const newCard = document.getElementById('eqc-'+id);
  if(wasOpen){
    document.getElementById('eqb-'+id).classList.add('o');
    document.getElementById('eqchv-'+id).classList.add('o');
    const newTabs = document.querySelectorAll('#eqtabs-'+id+' .eq-tab');
    if(newTabs[activeTabIdx]){ newTabs[activeTabIdx].click(); }
  }
}

// ‚îÄ‚îÄ FILTER & SEARCH ‚îÄ‚îÄ
function eqFilter(val){ eqSearchVal=val; eqRender(); }
function eqSetFilter(state, btn){
  eqFilterState = state;
  document.querySelectorAll('.eq-filter').forEach(b=>b.classList.remove('on'));
  btn.classList.add('on');
  eqRender();
}

// ‚îÄ‚îÄ MODAL HELPERS ‚îÄ‚îÄ
function eqOpenModal(title, bodyHtml, footerBtns){
  document.getElementById('eq-modal-title').textContent = title;
  document.getElementById('eq-modal-body').innerHTML = bodyHtml;
  document.getElementById('eq-modal-footer').innerHTML = footerBtns;
  document.getElementById('eq-modal').classList.add('on');
}
function eqCloseModal(){ document.getElementById('eq-modal').classList.remove('on'); eqModalCb=null; }

// ‚îÄ‚îÄ NUEVO EMPLEADO ‚îÄ‚îÄ
function eqNuevoEmpleado(){
  if(!editMode){ toast('Activa el modo edici√≥n primero'); return; }
  const body = `
    <div class="eq-grid2">
      <div class="eq-field"><div class="eq-label">Nombre completo *</div><input id="m-nombre" class="eq-input" placeholder="Nombre del empleado"></div>
      <div class="eq-field"><div class="eq-label">Cargo *</div>
        <select id="m-cargo" class="eq-input">
          <option value="">Seleccionar cargo...</option>
          <option>Cocinero Principal</option><option>Auxiliar de Cocina</option>
          <option>Cajero / Sala</option><option>Mesero</option>
          <option>Bartender</option><option>Encargado Bodega</option><option>Otro</option>
        </select></div>
      <div class="eq-field"><div class="eq-label">Fecha de ingreso</div><input id="m-ingreso" class="eq-input" type="date" value="${new Date().toISOString().slice(0,10)}"></div>
      <div class="eq-field"><div class="eq-label">Tipo de contrato</div>
        <select id="m-contrato" class="eq-input">
          <option>T√©rmino fijo 3 meses</option><option>T√©rmino fijo 6 meses</option>
          <option>T√©rmino fijo 1 a√±o</option><option>Indefinido</option><option>Por obra o labor</option>
        </select></div>
      <div class="eq-field"><div class="eq-label">Per√≠odo de prueba hasta</div><input id="m-prueba" class="eq-input" type="date"></div>
      <div class="eq-field"><div class="eq-label">Salario base pactado</div><input id="m-salario" class="eq-input" placeholder="Ej: $1.423.500"></div>
      <div class="eq-field"><div class="eq-label">Forma de pago</div>
        <select id="m-pago" class="eq-input">
          <option>Transferencia bancaria</option><option>Nequi / Daviplata</option>
          <option>Efectivo</option><option>Mixto</option>
        </select></div>
      <div class="eq-field"><div class="eq-label">Estado</div>
        <select id="m-estado" class="eq-input"><option value="activo">Activo</option><option value="inactivo">Inactivo</option></select></div>
      <div class="eq-field" style="grid-column:1/-1"><div class="eq-label">Observaciones</div>
        <textarea id="m-obs" class="eq-input" rows="2" placeholder="Notas generales del empleado..."></textarea></div>
    </div>`;
  eqOpenModal('Nuevo empleado', body,
    `<button class="eq-modal-btn emb-cancel" onclick="eqCloseModal()">Cancelar</button>
     <button class="eq-modal-btn emb-save" onclick="eqGuardarNuevo()">Guardar empleado</button>`);
}

function eqGuardarNuevo(){
  const nombre = document.getElementById('m-nombre').value.trim();
  const cargo = document.getElementById('m-cargo').value;
  if(!nombre || !cargo){ toast('‚ö† Nombre y cargo son obligatorios'); return; }
  const e = {
    id: eqUID(), nombre, cargo,
    fechaIngreso: document.getElementById('m-ingreso').value,
    tipoContrato: document.getElementById('m-contrato').value,
    prueba: document.getElementById('m-prueba').value,
    salario: document.getElementById('m-salario').value,
    formaPago: document.getElementById('m-pago').value,
    estado: document.getElementById('m-estado').value,
    obsGeneral: document.getElementById('m-obs').value,
    docs:{}, induccion:[], capacitaciones:[], pagos:[], disciplinario:[], evaluaciones:[], novedades:[],
    dotacion:[{},{},{}]
  };
  // Default induccion modules
  const mods = [
    'üî• La empresa ‚Äî prop√≥sito, visi√≥n, sue√±o y valores del restaurante',
    'ü§ù Cultura del equipo ‚Äî l√≠mites, ambiente laboral y trabajo en equipo',
    'üìã Reglamento interno ‚Äî normas, puntualidad y escala disciplinaria',
    'üë§ Rol y funciones del cargo ‚Äî RACI y responsabilidades diarias',
    'üç≥ Alistamiento y mise en place ‚Äî apertura y preparaci√≥n del turno',
    'üòä Protocolo de servicio al cliente ‚Äî lenguaje, actitud y propina',
    '‚öñÔ∏è Porciones, estandarizaci√≥n y recetario oficial',
    'üì¶ Inventarios, control de recursos y econom√≠a del restaurante',
    'üíª Sistemas digitales ‚Äî Cocina v3.0, Bar, Wahio, Dep√≥sito',
    'üßº BPM, higiene personal e INVIMA ‚Äî trampa moscas y tapabocas',
    'üîí Cierre, limpieza y cultura de orden',
    '‚úÖ Evaluaci√≥n final de inducci√≥n'
  ];
  e.induccion = mods.map(m=>({m,ok:false,fecha:''}));
  if(!eqData.empleados) eqData.empleados=[];
  eqData.empleados.push(e);
  eqSave(); eqCloseModal(); eqRender();
  toast('‚úì Empleado agregado');
}

// ‚îÄ‚îÄ EDITAR DATOS ‚îÄ‚îÄ
function eqEditarDatos(eid){
  const e = eqGetEmp(eid);
  if(!e) return;
  const body = `
    <div class="eq-grid2">
      <div class="eq-field"><div class="eq-label">Nombre completo</div><input id="m-nombre" class="eq-input" value="${e.nombre||''}"></div>
      <div class="eq-field"><div class="eq-label">Cargo</div>
        <select id="m-cargo" class="eq-input">
          ${['Cocinero Principal','Auxiliar de Cocina','Cajero / Sala','Mesero','Bartender','Encargado Bodega','Otro'].map(c=>`<option ${c===e.cargo?'selected':''}>${c}</option>`).join('')}
        </select></div>
      <div class="eq-field"><div class="eq-label">Fecha ingreso</div><input id="m-ingreso" class="eq-input" type="date" value="${e.fechaIngreso||''}"></div>
      <div class="eq-field"><div class="eq-label">Tipo contrato</div>
        <select id="m-contrato" class="eq-input">
          ${['T√©rmino fijo 3 meses','T√©rmino fijo 6 meses','T√©rmino fijo 1 a√±o','Indefinido','Por obra o labor'].map(c=>`<option ${c===e.tipoContrato?'selected':''}>${c}</option>`).join('')}
        </select></div>
      <div class="eq-field"><div class="eq-label">Prueba hasta</div><input id="m-prueba" class="eq-input" type="date" value="${e.prueba||''}"></div>
      <div class="eq-field"><div class="eq-label">Salario base</div><input id="m-salario" class="eq-input" value="${e.salario||''}"></div>
      <div class="eq-field"><div class="eq-label">Forma de pago</div>
        <select id="m-pago" class="eq-input">
          ${['Transferencia bancaria','Nequi / Daviplata','Efectivo','Mixto'].map(c=>`<option ${c===e.formaPago?'selected':''}>${c}</option>`).join('')}
        </select></div>
      <div class="eq-field"><div class="eq-label">Estado</div>
        <select id="m-estado" class="eq-input">
          <option value="activo" ${e.estado==='activo'?'selected':''}>Activo</option>
          <option value="inactivo" ${e.estado==='inactivo'?'selected':''}>Inactivo</option>
        </select></div>
      <div class="eq-field" style="grid-column:1/-1"><div class="eq-label">Observaciones</div>
        <textarea id="m-obs" class="eq-input" rows="2">${e.obsGeneral||''}</textarea></div>
    </div>`;
  eqOpenModal('Editar: '+e.nombre, body,
    `<button class="eq-modal-btn emb-cancel" onclick="eqCloseModal()">Cancelar</button>
     <button class="eq-modal-btn emb-save" onclick="eqGuardarEdicion('${eid}')">Guardar cambios</button>`);
}

function eqGuardarEdicion(eid){
  const e = eqGetEmp(eid); if(!e) return;
  e.nombre = document.getElementById('m-nombre').value.trim();
  e.cargo = document.getElementById('m-cargo').value;
  e.fechaIngreso = document.getElementById('m-ingreso').value;
  e.tipoContrato = document.getElementById('m-contrato').value;
  e.prueba = document.getElementById('m-prueba').value;
  e.salario = document.getElementById('m-salario').value;
  e.formaPago = document.getElementById('m-pago').value;
  e.estado = document.getElementById('m-estado').value;
  e.obsGeneral = document.getElementById('m-obs').value;
  eqSave(); eqCloseModal(); eqRefreshCard(eid); toast('‚úì Datos actualizados');
}

// ‚îÄ‚îÄ ARCHIVAR / ELIMINAR ‚îÄ‚îÄ
function eqArchivar(eid){
  const e = eqGetEmp(eid); if(!e) return;
  if(e.estado==='archivado'){ e.estado='activo'; toast('‚úì Empleado restaurado'); }
  else { if(!confirm('¬øArchivar a '+e.nombre+'? Sus datos se conservan.')) return; e.estado='archivado'; toast('‚úì Empleado archivado'); }
  eqSave(); eqRender();
}
function eqEliminar(eid){
  const e = eqGetEmp(eid); if(!e) return;
  if(!confirm('‚ö† ¬øEliminar PERMANENTEMENTE a '+e.nombre+'? Esta acci√≥n no se puede deshacer.')) return;
  eqData.empleados = eqData.empleados.filter(emp=>emp.id!==eid);
  eqSave(); eqRender(); toast('Empleado eliminado');
}

// ‚îÄ‚îÄ EDITAR DOTACI√ìN ‚îÄ‚îÄ
function eqEditDotacion(eid, idx){
  const e = eqGetEmp(eid); if(!e) return;
  if(!e.dotacion) e.dotacion=[{},{},{}];
  const d = e.dotacion[idx]||{};
  const meses = ['1 (antes 30 abril)','2 (antes 31 agosto)','3 (antes 20 diciembre)'];
  const body = `<div class="eq-grid2">
    <div class="eq-field"><div class="eq-label">Fecha de entrega</div><input id="d-fecha" class="eq-input" type="date" value="${d.fecha||''}"></div>
    <div class="eq-field"><div class="eq-label">Talla camisa</div><input id="d-cam" class="eq-input" value="${d.tallaCamisa||''}"></div>
    <div class="eq-field"><div class="eq-label">Talla pantal√≥n</div><input id="d-pant" class="eq-input" value="${d.tallaPant||''}"></div>
    <div class="eq-field"><div class="eq-label">Talla zapatos</div><input id="d-zap" class="eq-input" value="${d.tallaZap||''}"></div>
    <div class="eq-field" style="grid-column:1/-1"><div class="eq-label">√çtems entregados</div>
      <textarea id="d-items" class="eq-input" rows="2" placeholder="Ej: 2 polos, 1 filipina, 2 pantalones, 1 delantal">${d.items||''}</textarea></div>
  </div>`;
  eqOpenModal('Entrega '+meses[idx]+' ‚Äî '+e.nombre, body,
    `<button class="eq-modal-btn emb-cancel" onclick="eqCloseModal()">Cancelar</button>
     <button class="eq-modal-btn emb-save" onclick="eqGuardarDot('${eid}',${idx})">Guardar</button>`);
}
function eqGuardarDot(eid,idx){
  const e=eqGetEmp(eid); if(!e) return;
  if(!e.dotacion) e.dotacion=[{},{},{}];
  e.dotacion[idx]={...e.dotacion[idx],
    fecha:document.getElementById('d-fecha').value,
    tallaCamisa:document.getElementById('d-cam').value,
    tallaPant:document.getElementById('d-pant').value,
    tallaZap:document.getElementById('d-zap').value,
    items:document.getElementById('d-items').value
  };
  eqSave(); eqCloseModal(); eqRefreshCard(eid); toast('‚úì Dotaci√≥n guardada');
}

// ‚îÄ‚îÄ ADD/EDIT CAPACITACI√ìN ‚îÄ‚îÄ
function eqAddCap(eid){ eqEditCap(eid,-1); }
function eqEditCap(eid,idx){
  const e=eqGetEmp(eid); if(!e) return;
  const c=(idx>=0&&e.capacitaciones)?e.capacitaciones[idx]:{};
  const body=`<div class="eq-grid2">
    <div class="eq-field" style="grid-column:1/-1"><div class="eq-label">Tema / Nombre de la capacitaci√≥n *</div><input id="c-tema" class="eq-input" value="${c.tema||''}"></div>
    <div class="eq-field"><div class="eq-label">Fecha</div><input id="c-fecha" class="eq-input" type="date" value="${c.fecha||new Date().toISOString().slice(0,10)}"></div>
    <div class="eq-field"><div class="eq-label">Dictada por</div><input id="c-por" class="eq-input" value="${c.dictadoPor||''}"></div>
    <div class="eq-field"><div class="eq-label">Duraci√≥n</div><input id="c-dur" class="eq-input" placeholder="Ej: 2 horas" value="${c.duracion||''}"></div>
    <div class="eq-field"><div class="eq-label">Firma asistencia</div>
      <select id="c-firma" class="eq-input"><option value="false" ${!c.firmado?'selected':''}>Pendiente</option><option value="true" ${c.firmado?'selected':''}>Firmada</option></select></div>
    <div class="eq-field" style="grid-column:1/-1"><div class="eq-label">Observaciones</div>
      <textarea id="c-obs" class="eq-input" rows="2">${c.obs||''}</textarea></div>
  </div>`;
  eqOpenModal(idx>=0?'Editar capacitaci√≥n':'Nueva capacitaci√≥n', body,
    `<button class="eq-modal-btn emb-cancel" onclick="eqCloseModal()">Cancelar</button>
     <button class="eq-modal-btn emb-save" onclick="eqGuardarCap('${eid}',${idx})">Guardar</button>`);
}
function eqGuardarCap(eid,idx){
  const e=eqGetEmp(eid); if(!e) return;
  if(!e.capacitaciones) e.capacitaciones=[];
  const obj={tema:document.getElementById('c-tema').value.trim(),fecha:document.getElementById('c-fecha').value,
    dictadoPor:document.getElementById('c-por').value,duracion:document.getElementById('c-dur').value,
    firmado:document.getElementById('c-firma').value==='true',obs:document.getElementById('c-obs').value};
  if(!obj.tema){toast('‚ö† El tema es obligatorio');return;}
  if(idx>=0) e.capacitaciones[idx]=obj; else e.capacitaciones.push(obj);
  eqSave(); eqCloseModal(); eqRefreshCard(eid); toast('‚úì Capacitaci√≥n guardada');
}

// ‚îÄ‚îÄ ADD/EDIT PAGO ‚îÄ‚îÄ
function eqAddPago(eid){ eqEditPago(eid,-1); }
function eqEditPago(eid,idx){
  const e=eqGetEmp(eid); if(!e) return;
  const p=(idx>=0&&e.pagos)?e.pagos[idx]:{};
  const body=`<div class="eq-grid2">
    <div class="eq-field"><div class="eq-label">Per√≠odo *</div><input id="p-periodo" class="eq-input" placeholder="Ej: Quincena 1 Feb 2026" value="${p.periodo||''}"></div>
    <div class="eq-field"><div class="eq-label">Fecha de pago</div><input id="p-fecha" class="eq-input" type="date" value="${p.fechaPago||new Date().toISOString().slice(0,10)}"></div>
    <div class="eq-field"><div class="eq-label">Salario base ($)</div><input id="p-base" class="eq-input" type="number" placeholder="711750" value="${p.salarioBase||''}"></div>
    <div class="eq-field"><div class="eq-label">Aux. transporte ($)</div><input id="p-auxtr" class="eq-input" type="number" placeholder="75500" value="${p.auxTransporte||''}"></div>
    <div class="eq-field"><div class="eq-label">Recargo nocturno ($)</div><input id="p-noc" class="eq-input" type="number" value="${p.recNocturno||''}"></div>
    <div class="eq-field"><div class="eq-label">Recargo dominical ($)</div><input id="p-dom" class="eq-input" type="number" value="${p.recDominical||''}"></div>
    <div class="eq-field"><div class="eq-label">Horas extra ($)</div><input id="p-he" class="eq-input" type="number" value="${p.horasExtra||''}"></div>
    <div class="eq-field"><div class="eq-label">Otros devengados ($)</div><input id="p-otros" class="eq-input" type="number" value="${p.otros||''}"></div>
    <div class="eq-field"><div class="eq-label">Ded. salud ($)</div><input id="p-sal" class="eq-input" type="number" value="${p.dedSalud||''}"></div>
    <div class="eq-field"><div class="eq-label">Ded. pensi√≥n ($)</div><input id="p-pen" class="eq-input" type="number" value="${p.dedPension||''}"></div>
    <div class="eq-field"><div class="eq-label">Otras deducciones ($)</div><input id="p-dedo" class="eq-input" type="number" value="${p.dedOtras||''}"></div>
    <div class="eq-field"><div class="eq-label">TOTAL NETO ($) *</div><input id="p-total" class="eq-input" type="number" value="${p.totalNeto||''}" placeholder="Se puede calcular o digitar"></div>
    <div class="eq-field"><div class="eq-label">M√©todo de pago</div>
      <select id="p-metodo" class="eq-input">
        ${['Transferencia bancaria','Nequi','Daviplata','Efectivo','Mixto'].map(m=>`<option ${m===p.metodo?'selected':''}>${m}</option>`).join('')}
      </select></div>
    <div class="eq-field"><div class="eq-label">Observaciones</div><input id="p-obs" class="eq-input" value="${p.obs||''}"></div>
  </div>
  <button class="add-rec" style="margin-top:8px" onclick="eqCalcTotal()">üßÆ Calcular total autom√°tico</button>`;
  eqOpenModal(idx>=0?'Editar pago':'Registrar pago ‚Äî '+e.nombre, body,
    `<button class="eq-modal-btn emb-cancel" onclick="eqCloseModal()">Cancelar</button>
     <button class="eq-modal-btn emb-save" onclick="eqGuardarPago('${eid}',${idx})">Guardar pago</button>`);
}
function eqCalcTotal(){
  const ids=['p-base','p-auxtr','p-noc','p-dom','p-he','p-otros'];
  const deds=['p-sal','p-pen','p-dedo'];
  const dev=ids.reduce((s,id)=>s+(parseFloat(document.getElementById(id).value)||0),0);
  const ded=deds.reduce((s,id)=>s+(parseFloat(document.getElementById(id).value)||0),0);
  document.getElementById('p-total').value=Math.round(dev-ded);
  toast('Total calculado: $'+Math.round(dev-ded).toLocaleString('es-CO'));
}
function eqGuardarPago(eid,idx){
  const e=eqGetEmp(eid); if(!e) return;
  if(!e.pagos) e.pagos=[];
  const obj={periodo:document.getElementById('p-periodo').value.trim(),fechaPago:document.getElementById('p-fecha').value,
    salarioBase:document.getElementById('p-base').value,auxTransporte:document.getElementById('p-auxtr').value,
    recNocturno:document.getElementById('p-noc').value,recDominical:document.getElementById('p-dom').value,
    horasExtra:document.getElementById('p-he').value,otros:document.getElementById('p-otros').value,
    dedSalud:document.getElementById('p-sal').value,dedPension:document.getElementById('p-pen').value,
    dedOtras:document.getElementById('p-dedo').value,totalNeto:document.getElementById('p-total').value,
    metodo:document.getElementById('p-metodo').value,obs:document.getElementById('p-obs').value};
  if(!obj.periodo){toast('‚ö† El per√≠odo es obligatorio');return;}
  if(idx>=0) e.pagos[idx]=obj; else e.pagos.unshift(obj);
  eqSave(); eqCloseModal(); eqRefreshCard(eid); toast('‚úì Pago registrado');
}

// ‚îÄ‚îÄ ADD/EDIT DISCIPLINARIO ‚îÄ‚îÄ
function eqAddDisc(eid){ eqEditDisc(eid,-1); }
function eqEditDisc(eid,idx){
  const e=eqGetEmp(eid); if(!e) return;
  const d=(idx>=0&&e.disciplinario)?e.disciplinario[idx]:{};
  const body=`<div class="eq-grid2">
    <div class="eq-field"><div class="eq-label">Tipo *</div>
      <select id="d-tipo" class="eq-input">
        ${['Llamado verbal','Amonestaci√≥n escrita','Suspensi√≥n','Reconocimiento','Otro'].map(t=>`<option ${t===d.tipo?'selected':''}>${t}</option>`).join('')}
      </select></div>
    <div class="eq-field"><div class="eq-label">Fecha</div><input id="d-fecha" class="eq-input" type="date" value="${d.fecha||new Date().toISOString().slice(0,10)}"></div>
    <div class="eq-field" style="grid-column:1/-1"><div class="eq-label">Descripci√≥n de los hechos *</div>
      <textarea id="d-desc" class="eq-input" rows="3">${d.descripcion||''}</textarea></div>
    <div class="eq-field"><div class="eq-label">¬øFirm√≥ descargo?</div>
      <select id="d-firma" class="eq-input"><option value="false" ${!d.firmoDescargo?'selected':''}>No</option><option value="true" ${d.firmoDescargo?'selected':''}>S√≠</option></select></div>
    <div class="eq-field"><div class="eq-label">Observaciones</div><input id="d-obs" class="eq-input" value="${d.obs||''}"></div>
  </div>`;
  eqOpenModal(idx>=0?'Editar registro disciplinario':'Nueva novedad disciplinaria', body,
    `<button class="eq-modal-btn emb-cancel" onclick="eqCloseModal()">Cancelar</button>
     <button class="eq-modal-btn emb-save" onclick="eqGuardarDisc('${eid}',${idx})">Guardar</button>`);
}
function eqGuardarDisc(eid,idx){
  const e=eqGetEmp(eid); if(!e) return;
  if(!e.disciplinario) e.disciplinario=[];
  const obj={tipo:document.getElementById('d-tipo').value,fecha:document.getElementById('d-fecha').value,
    descripcion:document.getElementById('d-desc').value,firmoDescargo:document.getElementById('d-firma').value==='true',
    obs:document.getElementById('d-obs').value};
  if(!obj.descripcion){toast('‚ö† La descripci√≥n es obligatoria');return;}
  if(idx>=0) e.disciplinario[idx]=obj; else e.disciplinario.push(obj);
  eqSave(); eqCloseModal(); eqRefreshCard(eid); toast('‚úì Registro guardado');
}

// ‚îÄ‚îÄ ADD/EDIT EVALUACI√ìN ‚îÄ‚îÄ
function eqAddEval(eid){ eqEditEval(eid,-1); }
function eqEditEval(eid,idx){
  const e=eqGetEmp(eid); if(!e) return;
  const ev=(idx>=0&&e.evaluaciones)?e.evaluaciones[idx]:{};
  const areas=[{k:'puntualidad',l:'Puntualidad'},{k:'calidad',l:'Calidad del trabajo'},{k:'actitud',l:'Actitud y valores'},
    {k:'sistemas',l:'Uso de sistemas'},{k:'trabajo_equipo',l:'Trabajo en equipo'}];
  const body=`<div class="eq-grid2">
    <div class="eq-field"><div class="eq-label">Per√≠odo evaluado</div><input id="ev-periodo" class="eq-input" placeholder="Ej: Q1 2026" value="${ev.periodo||''}"></div>
    <div class="eq-field"><div class="eq-label">Fecha</div><input id="ev-fecha" class="eq-input" type="date" value="${ev.fecha||new Date().toISOString().slice(0,10)}"></div>
  </div>
  ${areas.map(a=>`<div class="eq-field" style="margin-bottom:10px">
    <div class="eq-label">${a.l}</div>
    <div style="display:flex;gap:6px;align-items:center">
      ${[1,2,3,4,5].map(n=>`<span style="font-size:22px;cursor:pointer;opacity:${(parseInt(ev[a.k])||3)>=n?1:.25}" 
        onclick="eqSetStar('${a.k}',${n},this.parentNode)">‚òÖ</span>`).join('')}
      <input type="hidden" id="ev-${a.k}" value="${ev[a.k]||3}">
    </div>
  </div>`).join('')}
  <div class="eq-field"><div class="eq-label">Observaciones generales</div>
    <textarea id="ev-obs" class="eq-input" rows="3">${ev.obs||''}</textarea></div>`;
  eqOpenModal(idx>=0?'Editar evaluaci√≥n':'Nueva evaluaci√≥n ‚Äî '+e.nombre, body,
    `<button class="eq-modal-btn emb-cancel" onclick="eqCloseModal()">Cancelar</button>
     <button class="eq-modal-btn emb-save" onclick="eqGuardarEval('${eid}',${idx})">Guardar evaluaci√≥n</button>`);
}
function eqSetStar(area,val,container){
  document.getElementById('ev-'+area).value=val;
  const stars=container.querySelectorAll('span');
  stars.forEach((s,i)=>s.style.opacity=i<val?1:0.25);
}
function eqGuardarEval(eid,idx){
  const e=eqGetEmp(eid); if(!e) return;
  if(!e.evaluaciones) e.evaluaciones=[];
  const areas=['puntualidad','calidad','actitud','sistemas','trabajo_equipo'];
  const obj={periodo:document.getElementById('ev-periodo').value,fecha:document.getElementById('ev-fecha').value,
    obs:document.getElementById('ev-obs').value};
  areas.forEach(a=>{obj[a]=document.getElementById('ev-'+a).value;});
  if(idx>=0) e.evaluaciones[idx]=obj; else e.evaluaciones.push(obj);
  eqSave(); eqCloseModal(); eqRefreshCard(eid); toast('‚úì Evaluaci√≥n guardada');
}

// ‚îÄ‚îÄ ADD/EDIT NOVEDAD ‚îÄ‚îÄ
function eqAddNov(eid){ eqEditNov(eid,-1); }
function eqEditNov(eid,idx){
  const e=eqGetEmp(eid); if(!e) return;
  const n=(idx>=0&&e.novedades)?e.novedades[idx]:{};
  const body=`<div class="eq-grid2">
    <div class="eq-field"><div class="eq-label">Tipo *</div>
      <select id="n-tipo" class="eq-input">
        ${['Incapacidad m√©dica','Permiso remunerado','Permiso no remunerado','Cambio de cargo','Aumento salarial','Vacaciones','Otro'].map(t=>`<option ${t===n.tipo?'selected':''}>${t}</option>`).join('')}
      </select></div>
    <div class="eq-field"><div class="eq-label">Fecha</div><input id="n-fecha" class="eq-input" type="date" value="${n.fecha||new Date().toISOString().slice(0,10)}"></div>
    <div class="eq-field"><div class="eq-label">D√≠as (si aplica)</div><input id="n-dias" class="eq-input" type="number" value="${n.dias||''}"></div>
    <div class="eq-field"><div class="eq-label">Autorizado por</div><input id="n-auth" class="eq-input" value="${n.autorizadoPor||'Sergio Barreras'}"></div>
    <div class="eq-field" style="grid-column:1/-1"><div class="eq-label">Descripci√≥n</div>
      <textarea id="n-desc" class="eq-input" rows="2">${n.descripcion||''}</textarea></div>
  </div>`;
  eqOpenModal(idx>=0?'Editar novedad':'Nueva novedad laboral', body,
    `<button class="eq-modal-btn emb-cancel" onclick="eqCloseModal()">Cancelar</button>
     <button class="eq-modal-btn emb-save" onclick="eqGuardarNov('${eid}',${idx})">Guardar</button>`);
}
function eqGuardarNov(eid,idx){
  const e=eqGetEmp(eid); if(!e) return;
  if(!e.novedades) e.novedades=[];
  const obj={tipo:document.getElementById('n-tipo').value,fecha:document.getElementById('n-fecha').value,
    dias:document.getElementById('n-dias').value,autorizadoPor:document.getElementById('n-auth').value,
    descripcion:document.getElementById('n-desc').value};
  if(idx>=0) e.novedades[idx]=obj; else e.novedades.push(obj);
  eqSave(); eqCloseModal(); eqRefreshCard(eid); toast('‚úì Novedad guardada');
}

// ‚îÄ‚îÄ ADD M√ìDULO INDUCCI√ìN ‚îÄ‚îÄ
function eqAddIndModulo(eid){
  const e=eqGetEmp(eid); if(!e) return;
  const body=`<div class="eq-field"><div class="eq-label">Nombre del m√≥dulo</div><input id="ind-m" class="eq-input" placeholder="Ej: Manejo de residuos s√≥lidos"></div>`;
  eqOpenModal('Agregar m√≥dulo de inducci√≥n', body,
    `<button class="eq-modal-btn emb-cancel" onclick="eqCloseModal()">Cancelar</button>
     <button class="eq-modal-btn emb-save" onclick="eqGuardarIndModulo('${eid}')">Agregar</button>`);
}
function eqGuardarIndModulo(eid){
  const e=eqGetEmp(eid); if(!e) return;
  const m=document.getElementById('ind-m').value.trim();
  if(!m){toast('‚ö† Escribe el nombre del m√≥dulo');return;}
  if(!e.induccion) e.induccion=[];
  e.induccion.push({m,ok:false,fecha:''});
  eqSave(); eqCloseModal(); eqRefreshCard(eid); toast('‚úì M√≥dulo agregado');
}

// ‚îÄ‚îÄ IMPRIMIR DESPRENDIBLE DE PAGO ‚îÄ‚îÄ
function eqImprimirDesprendible(eid,idx){
  const e=eqGetEmp(eid); if(!e) return;
  const p=e.pagos[idx]; if(!p) return;
  const ded=(parseFloat(p.dedSalud)||0)+(parseFloat(p.dedPension)||0)+(parseFloat(p.dedOtras)||0);
  const dev=(parseFloat(p.salarioBase)||0)+(parseFloat(p.auxTransporte)||0)+(parseFloat(p.recNocturno)||0)+(parseFloat(p.recDominical)||0)+(parseFloat(p.horasExtra)||0)+(parseFloat(p.otros)||0);
  const f = n => n ? '$'+parseFloat(n).toLocaleString('es-CO') : '‚Äî';
  const html=`<div style="font-family:Arial,sans-serif;color:#000;max-width:600px;margin:0 auto;border:2px solid #8B0D12;border-radius:4px;overflow:hidden">
    <div style="background:#8B0D12;color:#fff;padding:12px 16px;display:flex;justify-content:space-between;align-items:center">
      <div><div style="font-size:18px;font-weight:900;letter-spacing:2px">EL RINC√ìN DEL BARRIL</div>
        <div style="font-size:10px;opacity:.7">NIT: 1090436126 ¬∑ C√∫cuta, Norte de Santander</div></div>
      <div style="text-align:right"><div style="font-size:11px">DESPRENDIBLE DE N√ìMINA</div>
        <div style="font-size:10px;opacity:.7">${p.periodo||''}</div></div>
    </div>
    <div style="padding:12px 16px;display:grid;grid-template-columns:1fr 1fr;gap:8px;border-bottom:1px solid #eee">
      <div><div style="font-size:9px;color:#999;text-transform:uppercase;letter-spacing:1px">Empleado</div><div style="font-weight:700">${e.nombre}</div></div>
      <div><div style="font-size:9px;color:#999;text-transform:uppercase;letter-spacing:1px">Cargo</div><div>${e.cargo}</div></div>
      <div><div style="font-size:9px;color:#999;text-transform:uppercase;letter-spacing:1px">Per√≠odo</div><div>${p.periodo||'‚Äî'}</div></div>
      <div><div style="font-size:9px;color:#999;text-transform:uppercase;letter-spacing:1px">Fecha de pago</div><div>${p.fechaPago||'‚Äî'}</div></div>
    </div>
    <div style="padding:12px 16px;display:grid;grid-template-columns:1fr 1fr;gap:0;border-bottom:1px solid #eee">
      <div style="padding-right:12px;border-right:1px solid #eee">
        <div style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:#333;margin-bottom:6px;border-bottom:1px solid #eee;padding-bottom:4px">DEVENGADOS</div>
        ${[['Salario b√°sico',p.salarioBase],['Aux. transporte',p.auxTransporte],['Rec. nocturno',p.recNocturno],['Rec. dominical',p.recDominical],['Horas extra',p.horasExtra],['Otros',p.otros]].filter(r=>r[1]).map(r=>`
        <div style="display:flex;justify-content:space-between;font-size:11px;padding:2px 0"><span>${r[0]}</span><span>${f(r[1])}</span></div>`).join('')}
        <div style="display:flex;justify-content:space-between;font-size:12px;font-weight:700;margin-top:6px;padding-top:4px;border-top:1px solid #eee"><span>Total devengado</span><span>${f(dev)}</span></div>
      </div>
      <div style="padding-left:12px">
        <div style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:#333;margin-bottom:6px;border-bottom:1px solid #eee;padding-bottom:4px">DEDUCCIONES</div>
        ${[['Salud (4%)',p.dedSalud],['Pensi√≥n (4%)',p.dedPension],['Otras ded.',p.dedOtras]].filter(r=>r[1]).map(r=>`
        <div style="display:flex;justify-content:space-between;font-size:11px;padding:2px 0"><span>${r[0]}</span><span>-${f(r[1])}</span></div>`).join('')}
        <div style="display:flex;justify-content:space-between;font-size:12px;font-weight:700;margin-top:6px;padding-top:4px;border-top:1px solid #eee"><span>Total deducciones</span><span>-${f(ded)}</span></div>
      </div>
    </div>
    <div style="background:#f9f0f0;padding:12px 16px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #eee">
      <div style="font-weight:700;font-size:14px">NETO A PAGAR</div>
      <div style="font-weight:900;font-size:20px;color:#8B0D12">${f(p.totalNeto)}</div>
    </div>
    <div style="padding:10px 16px;font-size:10px;color:#888">M√©todo de pago: ${p.metodo||'‚Äî'}${p.obs?' ¬∑ '+p.obs:''}</div>
    <div style="padding:12px 16px;display:grid;grid-template-columns:1fr 1fr;gap:40px;border-top:1px solid #eee;margin-top:8px">
      <div><div style="border-top:1px solid #333;padding-top:4px;font-size:10px;color:#555">Firma del trabajador ‚Äî ${e.nombre}</div></div>
      <div><div style="border-top:1px solid #333;padding-top:4px;font-size:10px;color:#555">Sergio Barreras ‚Äî Propietario</div></div>
    </div>
    <div style="text-align:center;padding:8px;font-size:9px;color:#aaa;border-top:1px solid #eee">
      Este desprendible es soporte del pago realizado. Cons√©rvelo como evidencia. Generado: ${new Date().toLocaleDateString('es-CO',{day:'2-digit',month:'long',year:'numeric'})}
    </div>
  </div>`;
  const zone = document.getElementById('desprendible-zone');
  zone.innerHTML = html;
  zone.style.display='block';
  setTimeout(()=>{ window.print(); setTimeout(()=>{ zone.innerHTML=''; zone.style.display='none'; },800); },200);
}

// ‚îÄ‚îÄ IMPRIMIR ACTA DOTACI√ìN ‚îÄ‚îÄ
function eqImprimirDotacion(eid,idx){
  const e=eqGetEmp(eid); if(!e) return;
  const d=(e.dotacion||[])[idx]||{};
  const meses=['1 ‚Äî antes 30 de abril','2 ‚Äî antes 31 de agosto','3 ‚Äî antes 20 de diciembre'];
  const html=`<div style="font-family:Arial,sans-serif;color:#000;max-width:600px;margin:0 auto;border:2px solid #8B0D12;border-radius:4px;overflow:hidden">
    <div style="background:#8B0D12;color:#fff;padding:12px 16px"><div style="font-size:18px;font-weight:900;letter-spacing:2px">EL RINC√ìN DEL BARRIL</div>
      <div style="font-size:12px;margin-top:2px">ACTA DE ENTREGA DE DOTACI√ìN ‚Äî Entrega ${meses[idx]}</div>
      <div style="font-size:10px;opacity:.7">NIT: 1090436126 ¬∑ Documento v√°lido como evidencia ante Ministerio de Trabajo (Art. 230 CST)</div></div>
    <div style="padding:14px 16px;display:grid;grid-template-columns:1fr 1fr;gap:10px;border-bottom:1px solid #eee">
      <div><div style="font-size:9px;color:#999;text-transform:uppercase">Empleado</div><div style="font-weight:700">${e.nombre}</div></div>
      <div><div style="font-size:9px;color:#999;text-transform:uppercase">Cargo</div><div>${e.cargo}</div></div>
      <div><div style="font-size:9px;color:#999;text-transform:uppercase">Fecha de ingreso</div><div>${e.fechaIngreso||'‚Äî'}</div></div>
      <div><div style="font-size:9px;color:#999;text-transform:uppercase">Fecha de entrega</div><div>${d.fecha||'‚Äî'}</div></div>
      <div><div style="font-size:9px;color:#999;text-transform:uppercase">Talla camisa</div><div>${d.tallaCamisa||'‚Äî'}</div></div>
      <div><div style="font-size:9px;color:#999;text-transform:uppercase">Talla pantal√≥n</div><div>${d.tallaPant||'‚Äî'}</div></div>
    </div>
    <div style="padding:14px 16px;border-bottom:1px solid #eee">
      <div style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px">Elementos entregados:</div>
      <div style="font-size:13px">${d.items||'‚Äî Pendiente de especificar ‚Äî'}</div>
    </div>
    <div style="padding:14px 16px;font-size:12px;color:#444;border-bottom:1px solid #eee">
      Declaro haber recibido la dotaci√≥n descrita anteriormente en buen estado y me comprometo a su uso exclusivo durante la jornada laboral y a su cuidado y conservaci√≥n.
    </div>
    <div style="padding:14px 16px;display:grid;grid-template-columns:1fr 1fr;gap:40px">
      <div><div style="border-top:1px solid #333;padding-top:4px;font-size:10px;color:#555">Firma empleado ‚Äî ${e.nombre}</div>
        <div style="margin-top:4px;font-size:10px;color:#aaa">C.C.: ___________________________</div></div>
      <div><div style="border-top:1px solid #333;padding-top:4px;font-size:10px;color:#555">Sergio Barreras ‚Äî Propietario</div>
        <div style="margin-top:4px;font-size:10px;color:#aaa">Testigo: _______________________</div></div>
    </div>
  </div>`;
  const zone=document.getElementById('desprendible-zone');
  zone.innerHTML=html; zone.style.display='block';
  setTimeout(()=>{ window.print(); setTimeout(()=>{ zone.innerHTML=''; zone.style.display='none'; },800); },200);
}

// ‚îÄ‚îÄ INIT ‚îÄ‚îÄ
eqLoad();
document.addEventListener('DOMContentLoaded', function(){
  if(document.getElementById('eq-list')) eqRender();
});
// Re-render when switching to equipo tab
const _origSwitch = window.switchTab;
window.switchTab = function(tab, btn){
  _origSwitch(tab, btn);
  if(tab === 'eq') eqRender();
};
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  function exportarJSON() {
    try {
      const datos = {
        version: 'central-personal-rb-v1',
        fecha: new Date().toISOString(),
        restaurante: 'El Rincon del Barril',
        datos: {
          central: localStorage.getItem('mfb_v5') || null,
          equipo:  localStorage.getItem('mfb_equipo_v1') || null
        }
      };
      const blob = new Blob([JSON.stringify(datos, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      const fecha = new Date().toISOString().slice(0,10);
      a.href = url;
      a.download = 'respaldo-central-personal-' + fecha + '.json';
      a.click();
      URL.revokeObjectURL(url);
      toast('‚úì Respaldo descargado correctamente');
    } catch(e) {
      toast('‚ö† Error al generar respaldo: ' + e.message);
    }
  }

  function importarJSON() {
    if (!confirm('¬øRestaurar datos desde un respaldo? Esto reemplazar√° los datos actuales del sistema.')) return;
    document.getElementById('jsonInput').click();
  }

  function leerJSON(input) {
    const file = input.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = function(e) {
      try {
        const datos = JSON.parse(e.target.result);
        if (!datos.datos) throw new Error('Archivo de respaldo inv√°lido o da√±ado');
        if (datos.datos.central) localStorage.setItem('mfb_v5', datos.datos.central);
        if (datos.datos.equipo)  localStorage.setItem('mfb_equipo_v1', datos.datos.equipo);
        input.value = '';
        toast('‚úì Respaldo restaurado ‚Äî recargando...');
        setTimeout(() => location.reload(), 1200);
      } catch(err) {
        toast('‚ùå Error: ' + err.message);
        input.value = '';
      }
    };
    reader.readAsText(file);
  }

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  // RESPALDO JSON
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  function exportarJSON() {
    try {
      const datos = {
        version: 'central-personal-rb-v1',
        fecha: new Date().toLocaleDateString('es-CO'),
        restaurante: 'El Rincon del Barril',
        datos: {
          central: localStorage.getItem('mfb_v5') || null,
          equipo: localStorage.getItem('mfb_equipo_v1') || null,
        }
      };
      const blob = new Blob([JSON.stringify(datos, null, 2)], {type:'application/json'});
      const url  = URL.createObjectURL(blob);
      const a    = document.createElement('a');
      a.href = url;
      a.download = 'respaldo-central-personal-' + new Date().toISOString().slice(0,10) + '.json';
      a.click();
      URL.revokeObjectURL(url);
      toast && toast('‚úì Respaldo descargado');
    } catch(e) {
      alert('Error al generar respaldo: ' + e.message);
    }
  }

  function leerJSON(input) {
    const file = input.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = function(e) {
      try {
        const d = JSON.parse(e.target.result);
        if (!d.datos) throw new Error('Archivo inv√°lido');
        if (!confirm('¬øRestaurar desde este respaldo? Los datos actuales ser√°n reemplazados.')) {
          input.value = ''; return;
        }
        if (d.datos.central) localStorage.setItem('mfb_v5', d.datos.central);
        if (d.datos.equipo) localStorage.setItem('mfb_equipo_v1', d.datos.equipo);
        input.value = '';
        toast && toast('‚úì Datos restaurados ‚Äî recargando...');
        setTimeout(() => location.reload(), 1200);
      } catch(err) {
        alert('Error al restaurar: ' + err.message);
        input.value = '';
      }
    };
    reader.readAsText(file);
  }
</script>

<!-- ‚îÄ‚îÄ PRINT HEADER (visible only on print) ‚îÄ‚îÄ -->
<div class="print-hdr" id="print-hdr">
  <div style="display:flex;align-items:center;gap:12px">
    <div style="font-size:22px;font-weight:900;color:#D01920;letter-spacing:2px;font-family:Arial,sans-serif">EL RINC√ìN DEL BARRIL</div>
    <div style="font-size:11px;color:#666;border-left:2px solid #eee;padding-left:12px" id="print-doc-title">Central de Personal RB</div>
  </div>
  <div style="font-size:10px;color:#999;margin-top:4px" id="print-date"></div>
</div>

<!-- ‚îÄ‚îÄ PRINT ZONE (populated dynamically) ‚îÄ‚îÄ -->
<div id="print-zone" class="print-zone" style="display:none"></div>

<!-- ‚îÄ‚îÄ EXPORT MODAL ‚îÄ‚îÄ -->
<div class="exp-overlay" id="exp-overlay">
  <div class="exp-modal">
    <div class="exp-hdr">
      <div class="exp-title">üìÑ Imprimir / Exportar</div>
      <button class="exp-close" onclick="closeExport()">‚úï</button>
    </div>
    <div class="exp-body">
      <!-- Tipo de documento -->
      <div class="exp-section">
        <div class="exp-sec-title">¬øQu√© documento?</div>
        <div class="exp-tabs">
          <div class="exp-tab on" id="etab-fn" onclick="setExpTab('fn')">üìã Central de Personal RB</div>
          <div class="exp-tab" id="etab-prf" onclick="setExpTab('prf')">üë§ Perfiles de Cargo</div>
        </div>
      </div>

      <!-- Selecci√≥n de cargos -->
      <div class="exp-section">
        <div class="exp-sec-title" style="display:flex;align-items:center;justify-content:space-between">
          <span>¬øCu√°l(es) cargos?</span>
          <button class="exp-all" onclick="toggleAll()">Seleccionar todos</button>
        </div>
        <div id="exp-cargo-list"><!-- populated by JS --></div>
      </div>

      <!-- Secciones (solo manual) -->
      <div class="exp-section" id="exp-secs-wrap">
        <div class="exp-sec-title">¬øQu√© secciones incluir?</div>
        <div style="display:flex;gap:6px;flex-wrap:wrap" id="exp-secs">
          <label class="sub-check on" id="sec-dias"><input type="checkbox" class="hidden-cb" checked onchange="togSub(this,'sec-dias')">üìÖ D√≠as activos</label>
          <label class="sub-check on" id="sec-func"><input type="checkbox" class="hidden-cb" checked onchange="togSub(this,'sec-func')">‚öô Funciones</label>
          <label class="sub-check on" id="sec-hora"><input type="checkbox" class="hidden-cb" checked onchange="togSub(this,'sec-hora')">‚è∞ Horario</label>
        </div>
      </div>

      <!-- Secciones perfil -->
      <div class="exp-section" id="exp-prf-secs-wrap" style="display:none">
        <div class="exp-sec-title">¬øQu√© secciones incluir?</div>
        <div style="display:flex;gap:6px;flex-wrap:wrap" id="exp-prf-secs">
          <label class="sub-check on" id="psec-req"><input type="checkbox" class="hidden-cb" checked onchange="togSub(this,'psec-req')">‚ö† Requisitos</label>
          <label class="sub-check on" id="psec-hab"><input type="checkbox" class="hidden-cb" checked onchange="togSub(this,'psec-hab')">‚ú¶ Habilidades</label>
          <label class="sub-check on" id="psec-act"><input type="checkbox" class="hidden-cb" checked onchange="togSub(this,'psec-act')">‚úì Actitud</label>
          <label class="sub-check on" id="psec-con"><input type="checkbox" class="hidden-cb" checked onchange="togSub(this,'psec-con')">‚óà Condiciones</label>
          <label class="sub-check on" id="psec-preg"><input type="checkbox" class="hidden-cb" checked onchange="togSub(this,'psec-preg')">‚òÖ Preguntas entrevista</label>
        </div>
      </div>

    </div>
    <div class="exp-footer">
      <button class="exp-btn exp-print" onclick="doPrint()">üñ® Imprimir</button>
      <button class="exp-btn exp-word" onclick="doWord()">üìù Exportar a Word</button>
    </div>
  </div>
</div>

</body>
</html>